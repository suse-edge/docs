# SOME DESCRIPTIVE TITLE
# Copyright (C) YEAR Free Software Foundation, Inc.
# This file is distributed under the same license as the PACKAGE package.
# FIRST AUTHOR <EMAIL@ADDRESS>, YEAR.
#
#, fuzzy
msgid ""
msgstr ""
"Project-Id-Version: PACKAGE VERSION\n"
"POT-Creation-Date: 2024-07-23 11:17+0100\n"
"PO-Revision-Date: YEAR-MO-DA HO:MI+ZONE\n"
"Last-Translator: FULL NAME <EMAIL@ADDRESS>\n"
"Language-Team: LANGUAGE <LL@li.org>\n"
"Language: \n"
"MIME-Version: 1.0\n"
"Content-Type: text/plain; charset=UTF-8\n"
"Content-Transfer-Encoding: 8bit\n"

#. type: Title ==
#: asciidoc/day2/downstream-cluster-helm.adoc:1
#, no-wrap
msgid "Helm chart upgrade"
msgstr ""

#. type: delimited block =
#: asciidoc/day2/downstream-cluster-helm.adoc:2
msgid ""
"The below sections focus on using `Fleet` functionalities to achieve a Helm "
"chart update."
msgstr ""

#. type: delimited block =
#: asciidoc/day2/downstream-cluster-helm.adoc:3
msgid ""
"Users adopting a third-party GitOps workflow, should take the configurations "
"for their desired helm chart from its `fleet.yaml` located at "
"`fleets/day2/chart-templates/<chart-name>`. *Make sure you are retrieving "
"the chart data from a valid \"Day 2\" Edge "
"link:https://github.com/suse-edge/fleet-examples/releases[release].*"
msgstr ""

#. type: Title ===
#: asciidoc/day2/downstream-cluster-helm.adoc:4
#: asciidoc/day2/downstream-cluster-k8s.adoc:3
#: asciidoc/day2/downstream-cluster-os.adoc:2
#: asciidoc/day2/downstream-clusters-introduction.adoc:6
#, no-wrap
msgid "Components"
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-helm.adoc:5
msgid ""
"Apart from the default `Day 2` <<day2-downstream-components, components>>, "
"no other custom components are needed for this operation."
msgstr ""

#. type: Title ===
#: asciidoc/day2/downstream-cluster-helm.adoc:6
#, no-wrap
msgid "Preparation for air-gapped environments"
msgstr ""

#. type: Title ====
#: asciidoc/day2/downstream-cluster-helm.adoc:7
#, no-wrap
msgid "Ensure that you have access to your Helm chart's upgrade `fleet.yaml` file"
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-helm.adoc:8
msgid ""
"Host the needed resources on a local git server that is accessible by your "
"`management cluster`."
msgstr ""

#. type: Title ====
#: asciidoc/day2/downstream-cluster-helm.adoc:9
#, no-wrap
msgid "Find the required assets for your Edge release version"
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-helm.adoc:10
msgid ""
"Go to the Day 2 "
"link:https://github.com/suse-edge/fleet-examples/releases[release] page and "
"find the Edge 3.X.Y release that you want to upgrade your chart to and click "
"*Assets*."
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-helm.adoc:11
msgid ""
"From the release's *Assets* section, download the following files, which are "
"required for an air-gapped upgrade of a SUSE supported helm chart:"
msgstr ""

#. type: Table
#: asciidoc/day2/downstream-cluster-helm.adoc:12
#, no-wrap
msgid ""
"|*Release File* \n"
"|*Description*\n"
"\n"
"|_edge-save-images.sh_\n"
"|This script pulls the images in the `edge-release-images.txt` file and "
"saves them to a '.tar.gz' archive that can then be used in your air-gapped "
"environment.\n"
"\n"
"|_edge-save-oci-artefacts.sh_\n"
"|This script pulls the SUSE OCI chart artefacts in the "
"`edge-release-helm-oci-artefacts.txt` file and creates a '.tar.gz' archive "
"of a directory containing all other chart OCI archives.\n"
"\n"
"|_edge-load-images.sh_\n"
"|This script loads the images in the '.tar.gz' archive generated by "
"`edge-save-images.sh`, retags them and pushes them to your private "
"registry.\n"
"\n"
"|_edge-load-oci-artefacts.sh_\n"
"|This script takes a directory containing '.tgz' SUSE OCI charts and loads "
"all OCI charts to your private registry. The directory is retrieved from the "
"'.tar.gz' archive that the `edge-save-oci-artefacts.sh` script has "
"generated.\n"
"\n"
"|_edge-release-helm-oci-artefacts.txt_\n"
"|This file contains a list of OCI artefacts for the SUSE Edge release Helm "
"charts.\n"
"\n"
"|_edge-release-images.txt_\n"
"|This file contains a list of images needed by the Edge release Helm "
"charts.\n"
msgstr ""

#. type: Title ====
#: asciidoc/day2/downstream-cluster-helm.adoc:13
#, no-wrap
msgid "Create the SUSE Edge release images archive"
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-helm.adoc:14
#: asciidoc/day2/downstream-cluster-helm.adoc:23
msgid "_On a machine with internet access:_"
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-helm.adoc:15
msgid "Make `edge-save-images.sh` executable:"
msgstr ""

#. type: delimited block -
#: asciidoc/day2/downstream-cluster-helm.adoc:16
#, no-wrap
msgid "chmod +x edge-save-images.sh\n"
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-helm.adoc:17
msgid ""
"Use `edge-save-images.sh` script to create a _Docker_ importable '.tar.gz' "
"archive:"
msgstr ""

#. type: delimited block -
#: asciidoc/day2/downstream-cluster-helm.adoc:18
#, no-wrap
msgid "./edge-save-images.sh --source-registry registry.suse.com\n"
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-helm.adoc:19
msgid ""
"This will create a ready to load `edge-images.tar.gz` (unless you have "
"specified the `-i|--images` option) archive with the needed images."
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-helm.adoc:20
#: asciidoc/day2/downstream-cluster-helm.adoc:29
msgid "Copy this archive to your *air-gapped* machine"
msgstr ""

#. type: delimited block -
#: asciidoc/day2/downstream-cluster-helm.adoc:21
#, no-wrap
msgid "scp edge-images.tar.gz <user>@<machine_ip>:/path\n"
msgstr ""

#. type: Title ====
#: asciidoc/day2/downstream-cluster-helm.adoc:22
#, no-wrap
msgid "Create a SUSE Edge Helm chart OCI images archive"
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-helm.adoc:24
msgid "Make `edge-save-oci-artefacts.sh` executable:"
msgstr ""

#. type: delimited block -
#: asciidoc/day2/downstream-cluster-helm.adoc:25
#, no-wrap
msgid "chmod +x edge-save-oci-artefacts.sh\n"
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-helm.adoc:26
msgid ""
"Use `edge-save-oci-artefacts.sh` script to create a '.tar.gz' archive of all "
"SUSE Edge Helm chart OCI images:"
msgstr ""

#. type: delimited block -
#: asciidoc/day2/downstream-cluster-helm.adoc:27
#, no-wrap
msgid "./edge-save-oci-artefacts.sh --source-registry registry.suse.com\n"
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-helm.adoc:28
msgid ""
"This will create a `oci-artefacts.tar.gz` archive containing all SUSE Edge "
"Helm chart OCI images"
msgstr ""

#. type: delimited block -
#: asciidoc/day2/downstream-cluster-helm.adoc:30
#, no-wrap
msgid "scp oci-artefacts.tar.gz <user>@<machine_ip>:/path\n"
msgstr ""

#. type: Title ====
#: asciidoc/day2/downstream-cluster-helm.adoc:31
#, no-wrap
msgid "Load SUSE Edge release images to your air-gapped machine"
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-helm.adoc:32
#: asciidoc/day2/downstream-cluster-helm.adoc:40
msgid "_On your air-gapped machine:_"
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-helm.adoc:33
#: asciidoc/day2/downstream-cluster-helm.adoc:41
msgid "Log into your private registry (if required):"
msgstr ""

#. type: delimited block -
#: asciidoc/day2/downstream-cluster-helm.adoc:34
#: asciidoc/day2/downstream-cluster-helm.adoc:42
#, no-wrap
msgid "podman login <REGISTRY.YOURDOMAIN.COM:PORT>\n"
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-helm.adoc:35
msgid "Make `edge-load-images.sh` executable:"
msgstr ""

#. type: delimited block -
#: asciidoc/day2/downstream-cluster-helm.adoc:36
#, no-wrap
msgid "chmod +x edge-load-images.sh\n"
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-helm.adoc:37
msgid ""
"Use `edge-load-images.sh` to load the images from the *copied* "
"`edge-images.tar.gz` archive, retag them and push them to your private "
"registry:"
msgstr ""

#. type: delimited block -
#: asciidoc/day2/downstream-cluster-helm.adoc:38
#, no-wrap
msgid ""
"./edge-load-images.sh --source-registry registry.suse.com --registry "
"<REGISTRY.YOURDOMAIN.COM:PORT> --images edge-images.tar.gz\n"
msgstr ""

#. type: Title ====
#: asciidoc/day2/downstream-cluster-helm.adoc:39
#, no-wrap
msgid "Load SUSE Edge Helm chart OCI images to your air-gapped machine"
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-helm.adoc:43
msgid "Make `edge-load-oci-artefacts.sh` executable:"
msgstr ""

#. type: delimited block -
#: asciidoc/day2/downstream-cluster-helm.adoc:44
#, no-wrap
msgid "chmod +x edge-load-oci-artefacts.sh\n"
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-helm.adoc:45
msgid "Untar the copied `oci-artefacts.tar.gz` archive:"
msgstr ""

#. type: delimited block -
#: asciidoc/day2/downstream-cluster-helm.adoc:46
#, no-wrap
msgid "tar -xvf oci-artefacts.tar.gz\n"
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-helm.adoc:47
msgid ""
"This will produce a directory with the naming template "
"`edge-release-oci-tgz-<date>`"
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-helm.adoc:48
msgid ""
"Pass this directory to the `edge-load-oci-artefacts.sh` script to load the "
"SUSE Edge helm chart OCI images to your private registry:"
msgstr ""

#. type: delimited block =
#: asciidoc/day2/downstream-cluster-helm.adoc:49
msgid ""
"This script assumes the `helm` CLI has been pre-installed on your "
"environment. For Helm installation instructions, see "
"link:https://helm.sh/docs/intro/install/[Installing Helm]."
msgstr ""

#. type: delimited block -
#: asciidoc/day2/downstream-cluster-helm.adoc:50
#, no-wrap
msgid ""
"./edge-load-oci-artefacts.sh --archive-directory edge-release-oci-tgz-<date> "
"--registry <REGISTRY.YOURDOMAIN.COM:PORT> --source-registry "
"registry.suse.com\n"
msgstr ""

#. type: Title ====
#: asciidoc/day2/downstream-cluster-helm.adoc:51
#, no-wrap
msgid ""
"Create registry mirrors pointing to your private registry for your "
"Kubernetes distribution"
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-helm.adoc:52
msgid ""
"For RKE2, see "
"link:https://docs.rke2.io/install/containerd_registry_configuration[Containerd "
"Registry Configuration]"
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-helm.adoc:53
msgid ""
"For K3s, see link:https://docs.k3s.io/installation/registry-mirror[Embedded "
"Registry Mirror]"
msgstr ""

#. type: Title ===
#: asciidoc/day2/downstream-cluster-helm.adoc:54
#: asciidoc/day2/downstream-cluster-k8s.adoc:27
#, no-wrap
msgid "Upgrade procedure"
msgstr ""

#. type: delimited block =
#: asciidoc/day2/downstream-cluster-helm.adoc:55
msgid ""
"The below upgrade procedure utilises Rancher's <<components-fleet,Fleet>> "
"funtionality. Users using a third-party GitOps workflow should retrieve the "
"chart versions supported by each Edge release from the <<release-notes>> and "
"populate these versions to their third-party GitOps workflow."
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-helm.adoc:56
msgid "This section focuses on the following Helm upgrade procedure use-cases:"
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-helm.adoc:57
msgid ""
"<<day2-helm-upgrade-new-cluster, I have a new cluster and would like to "
"deploy and manage a SUSE Helm chart>>"
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-helm.adoc:58
msgid ""
"<<day2-helm-upgrade-fleet-managed-chart, I would like to upgrade a Fleet "
"managed Helm chart>>"
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-helm.adoc:59
msgid ""
"<<day2-helm-upgrade-eib-chart, I would like to upgrade an EIB created Helm "
"chart>>"
msgstr ""

#. type: delimited block =
#: asciidoc/day2/downstream-cluster-helm.adoc:60
msgid ""
"Manually deployed Helm charts cannot be reliably upgraded. We suggest to "
"redeploy the helm chart using the <<day2-helm-upgrade-new-cluster>> method."
msgstr ""

#. type: Title ====
#: asciidoc/day2/downstream-cluster-helm.adoc:61
#, no-wrap
msgid "I have a new cluster and would like to deploy and manage a SUSE Helm chart"
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-helm.adoc:62
msgid "For users that want to manage their Helm chart lifecycle through Fleet."
msgstr ""

#. type: Title =====
#: asciidoc/day2/downstream-cluster-helm.adoc:63
#, no-wrap
msgid "Prepare your Fleet resources"
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-helm.adoc:64
msgid ""
"Acquire the Chart's Fleet resources from the Edge "
"link:https://github.com/suse-edge/fleet-examples/releases[release] tag that "
"you wish to use"
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-helm.adoc:65
msgid ""
"From the selected Edge release tag revision, navigate to the Helm chart "
"fleet - `fleets/day2/chart-templates/<chart>`"
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-helm.adoc:66
msgid ""
"Copy the chart Fleet directory to the Git repository that you will be using "
"for your GitOps workflow"
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-helm.adoc:67
msgid ""
"*Optionally*, if the Helm chart requires configurations to its *values*, "
"edit the `.helm.values` configuration inside the `fleet.yaml` file of the "
"copied directory"
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-helm.adoc:68
msgid ""
"*Optionally*, there may be use-cases where you need to add additional "
"resources to your chart's fleet so that it can better fit your "
"environment. For information on how to enhance your Fleet directory, see "
"link:https://fleet.rancher.io/gitrepo-content[Git Repository Contents]"
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-helm.adoc:69
msgid "An *example* for the `longhorn` helm chart would look like:"
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-helm.adoc:70
msgid "User Git repository strucutre:"
msgstr ""

#. type: delimited block -
#: asciidoc/day2/downstream-cluster-helm.adoc:71
#, no-wrap
msgid ""
"<user_repository_root>\n"
"└── longhorn\n"
"    └── fleet.yaml\n"
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-helm.adoc:72
msgid "`fleet.yaml` content populated with user `longhorn` data:"
msgstr ""

#. type: delimited block -
#: asciidoc/day2/downstream-cluster-helm.adoc:73
#, no-wrap
msgid "defaultNamespace: longhorn-system\n"
msgstr ""

#. type: delimited block -
#: asciidoc/day2/downstream-cluster-helm.adoc:74
#, no-wrap
msgid ""
"helm:\n"
"  releaseName: \"longhorn\"\n"
"  chart: \"longhorn\"\n"
"  repo: \"https://charts.longhorn.io\"\n"
"  version: \"1.6.1\"\n"
"  takeOwnership: true\n"
"  # custom chart value overrides\n"
"  values: \n"
"    # Example for user provided custom values content\n"
"    defaultSettings:\n"
"      deletingConfirmationFlag: true\n"
msgstr ""

#. type: delimited block -
#: asciidoc/day2/downstream-cluster-helm.adoc:75
#, no-wrap
msgid ""
"# https://fleet.rancher.io/bundle-diffs\n"
"diff:\n"
"  comparePatches:\n"
"  - apiVersion: apiextensions.k8s.io/v1\n"
"    kind: CustomResourceDefinition\n"
"    name: engineimages.longhorn.io\n"
"    operations:\n"
"    - {\"op\":\"remove\", \"path\":\"/status/conditions\"}\n"
"    - {\"op\":\"remove\", \"path\":\"/status/storedVersions\"}\n"
"    - {\"op\":\"remove\", \"path\":\"/status/acceptedNames\"}\n"
"  - apiVersion: apiextensions.k8s.io/v1\n"
"    kind: CustomResourceDefinition\n"
"    name: nodes.longhorn.io\n"
"    operations:\n"
"    - {\"op\":\"remove\", \"path\":\"/status/conditions\"}\n"
"    - {\"op\":\"remove\", \"path\":\"/status/storedVersions\"}\n"
"    - {\"op\":\"remove\", \"path\":\"/status/acceptedNames\"}\n"
"  - apiVersion: apiextensions.k8s.io/v1\n"
"    kind: CustomResourceDefinition\n"
"    name: volumes.longhorn.io\n"
"    operations:\n"
"    - {\"op\":\"remove\", \"path\":\"/status/conditions\"}\n"
"    - {\"op\":\"remove\", \"path\":\"/status/storedVersions\"}\n"
"    - {\"op\":\"remove\", \"path\":\"/status/acceptedNames\"}\n"
msgstr ""

#. type: delimited block =
#: asciidoc/day2/downstream-cluster-helm.adoc:76
msgid ""
"These are just example values that are used to illustrate custom "
"configurations over the `longhorn` chart. They should *NOT* be treated as "
"deployment guidelines for the `longhorn` chart."
msgstr ""

#. type: Title =====
#: asciidoc/day2/downstream-cluster-helm.adoc:77
#, no-wrap
msgid "Create the GitRepo"
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-helm.adoc:78
msgid ""
"After populating your repository with the chart's Fleet resources, you must "
"create a link:https://fleet.rancher.io/ref-gitrepo[GitRepo] resource. This "
"resource will hold information on how to access your chart's Fleet resources "
"and to which clusters it needs to apply those resources."
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-helm.adoc:79
msgid ""
"The `GitRepo` resource can be created through the Rancher UI, or by manually "
"deploying the resource to the `management cluster`."
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-helm.adoc:80
msgid ""
"For information on how to create and deploy the GitRepo resource *manually*, "
"see link:https://fleet.rancher.io/tut-deployment[Creating a Deployment]."
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-helm.adoc:81
msgid ""
"To create a `GitRepo` resource through the *Rancher UI*, see "
"link:https://ranchermanager.docs.rancher.com/v2.8/integrations-in-rancher/fleet/overview#accessing-fleet-in-the-rancher-ui[Accessing "
"Fleet in the Rancher UI]."
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-helm.adoc:82
msgid "_Example *longhorn* `GitRepo` resource for *manual* deployment:_"
msgstr ""

#. type: delimited block -
#: asciidoc/day2/downstream-cluster-helm.adoc:83
#, no-wrap
msgid ""
"apiVersion: fleet.cattle.io/v1alpha1\n"
"kind: GitRepo\n"
"metadata:\n"
"  name: longhorn-git-repo\n"
"  namespace: fleet-default\n"
"spec:\n"
"  # If using a tag\n"
"  # revision: <user_repository_tag>\n"
"  # \n"
"  # If using a branch\n"
"  # branch: <user_repository_branch>\n"
"  paths:\n"
"  # As seen in the 'Prepare your Fleet resources' example\n"
"  - longhorn\n"
"  repo: <user_repository_url>\n"
"  targets:\n"
"  # Match all clusters\n"
"  - clusterSelector: {}\n"
msgstr ""

#. type: Title =====
#: asciidoc/day2/downstream-cluster-helm.adoc:84
#, no-wrap
msgid "Managing the deployed Helm chart"
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-helm.adoc:85
msgid ""
"Once deployed with Fleet, for Helm chart upgrades, see "
"<<day2-helm-upgrade-fleet-managed-chart>>."
msgstr ""

#. type: Title ====
#: asciidoc/day2/downstream-cluster-helm.adoc:86
#, no-wrap
msgid "I would like to upgrade a Fleet managed Helm chart"
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-helm.adoc:87
msgid ""
"Determine the version to which you need to upgrade your chart so that it is "
"compatible with an Edge 3.X.Y release. Helm chart version per Edge release "
"can be viewed from the <<release-notes>>."
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-helm.adoc:88
msgid ""
"In your Fleet monitored Git repository, edit the Helm chart's `fleet.yaml` "
"file with the correct chart *version* and *repository* from the "
"<<release-notes>>."
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-helm.adoc:89
msgid ""
"After commiting and pushing the changes to your repository, this will "
"trigger an upgrade of the desired Helm chart"
msgstr ""

#. type: Title ====
#: asciidoc/day2/downstream-cluster-helm.adoc:90
#, no-wrap
msgid "I would like to upgrade an EIB created Helm chart"
msgstr ""

#. type: delimited block =
#: asciidoc/day2/downstream-cluster-helm.adoc:91
msgid ""
"This section assumes that you have deployed the system-upgrade-controller "
"(SUC) beforehand, if you have not done so, or are unsure why you need it, "
"see the default <<day2-downstream-components, Day 2 components>> list."
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-helm.adoc:92
msgid ""
"EIB deploys Helm charts by utilizing the auto-deploy manifests functionality "
"of "
"link:https://docs.rke2.io/advanced#auto-deploying-manifests[rke2]/link:https://docs.k3s.io/installation/packaged-components#auto-deploying-manifests-addons[k3s]. "
"It creates a "
"link:https://github.com/k3s-io/helm-controller#helm-controller[HelmChart] "
"resource definition manifest unter the "
"`/var/lib/rancher/<rke2/k3s>/server/manifests` location of the initialiser "
"node and lets `rke2/k3s` pick it up and auto-deploy it in the cluster."
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-helm.adoc:93
msgid ""
"From a `Day 2` point of view this would mean that any upgrades of the Helm "
"chart need to happen by editing the `HelmChart` manifest file of the "
"specific chart. To automate this process for multiple clusters, this section "
"uses *SUC Plans*."
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-helm.adoc:94
msgid "Below you can find information on:"
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-helm.adoc:95
msgid ""
"The general <<day2-helm-upgrade-eib-chart-overview,overview>> of the helm "
"chart upgrade workflow."
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-helm.adoc:96
msgid ""
"The necessary <<day2-helm-upgrade-eib-chart-upgrade-steps,upgrade steps>> "
"needed for a successful helm chart upgrade."
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-helm.adoc:97
msgid ""
"An <<day2-helm-upgrade-eib-chart-example, example>> showcasing a "
"link:https://longhorn.io[Longhorn] chart upgrade using the explained method."
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-helm.adoc:98
msgid ""
"How to use the upgrade process with "
"<<day2-helm-upgrade-eib-chart-third-party, a different GitOps tool>>."
msgstr ""

#. type: Title ====
#: asciidoc/day2/downstream-cluster-helm.adoc:99
#: asciidoc/day2/downstream-cluster-k8s.adoc:35
#: asciidoc/day2/downstream-cluster-os.adoc:28
#, no-wrap
msgid "Overview"
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-helm.adoc:100
msgid ""
"This section is meant to give a high overview of the workflow that the user "
"goes through in order to upgrade one or multiple Helm charts. For a detailed "
"explanation of the steps needed for a Helm chart upgrade, see "
"<<day2-helm-upgrade-eib-chart-upgrade-steps>>."
msgstr ""

#. type: Block title
#: asciidoc/day2/downstream-cluster-helm.adoc:101
#, no-wrap
msgid "Helm chart upgrade workflow"
msgstr ""

#. type: Target for macro image
#: asciidoc/day2/downstream-cluster-helm.adoc:102
#, no-wrap
msgid "day2_helm_chart_upgrade_diagram.png"
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-helm.adoc:103
msgid ""
"The workflow begins with the user "
"link:https://helm.sh/docs/helm/helm_pull/[pulling] the new Helm chart "
"archive(s) that he wishes to upgrade his chart(s) to."
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-helm.adoc:104
msgid ""
"The archive(s) should then be _encoded_ and passed as configuration to the "
"`eib-chart-upgrade-user-data.yaml` file that is located under the fleet "
"directory for the related SUC Plan. This is further explained in the "
"<<day2-helm-upgrade-eib-chart-upgrade-steps, upgrade steps>> section."
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-helm.adoc:105
msgid ""
"The user then proceeds to configure and deploy a `GitRepo` resource that "
"will ship all the needed resources (SUC Plan, secrets, etc.) to the "
"downstream clusters."
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-helm.adoc:106
msgid ""
"The resource is deployed on the `management cluster` under the "
"`fleet-default` namespace."
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-helm.adoc:107
msgid ""
"<<components-fleet,Fleet>> detects the deployed resource and deploys all the "
"configured resources to the specified downstream clusters. Deployed "
"resources include:"
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-helm.adoc:108
msgid ""
"The `eib-chart-upgrade` SUC Plan that will be used by SUC to create an "
"*Upgrade Pod* on each node."
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-helm.adoc:109
msgid ""
"The `eib-chart-upgrade-script` Secret that ships the `upgrade script` that "
"the *Upgrade Pod* will use to upgrade the `HelmChart` manifests on the "
"initialiser node."
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-helm.adoc:110
msgid ""
"The `eib-chart-upgrade-user-data` Secret that ships the chart data that the "
"`upgrade script` will use in order to understand which chart manifests it "
"needs to upgrade."
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-helm.adoc:111
msgid ""
"Once the `eib-chart-upgrade` SUC Plan has been deployed, the SUC picks it up "
"and creates a Job which deploys the *Upgrade Pod*."
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-helm.adoc:112
msgid ""
"Once deployed, the *Upgrade Pod* mounts the `eib-chart-upgrade-script` and "
"`eib-chart-upgrade-user-data` Secrets and executes the `upgrade script` that "
"is shipped by the `eib-chart-upgrade-script` Secret."
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-helm.adoc:113
msgid "The `upgrade script` does the following:"
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-helm.adoc:114
msgid ""
"Determine whether the Pod that the script is running on has been deployed on "
"the `initialiser` node. The `initialiser` node is the node that is hosting "
"the `HelmChart` manifests. For a single-node cluster it is the single "
"control-plane node. For HA clusters it is the node that you have marked as "
"`initializer` when creating the cluster in EIB. If you have not specified "
"the `initializer` property, then the first node from the `nodes` list is "
"marked as `initializer`. For more information, see the "
"link:https://github.com/suse-edge/edge-image-builder/blob/main/docs/building-images.md#kubernetes[upstream] "
"documentation for EIB."
msgstr ""

#. type: delimited block =
#: asciidoc/day2/downstream-cluster-helm.adoc:115
msgid ""
"If the `upgrade script` is running on a non-initialiser node, it immediately "
"finishes its execution and does not go through the steps below."
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-helm.adoc:116
msgid ""
"Backup the manifests that will be edited in order to ensure disaster "
"recover."
msgstr ""

#. type: delimited block =
#: asciidoc/day2/downstream-cluster-helm.adoc:117
msgid ""
"By default backups of the manifests are stored under the "
"`/tmp/eib-helm-chart-upgrade-<date>` directory. If you wish to use a custom "
"location you can pass the `MANIFEST_BACKUP_DIR` enviroment variable to the "
"Helm chart upgrade SUC Plan (example in the Plan)."
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-helm.adoc:118
msgid ""
"Edit the `HelmChart` manifests. As of this version, the following properties "
"are changed in order to trigger a chart upgrade:"
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-helm.adoc:119
msgid ""
"The content of the `chartContent` property is replaced with the encoded "
"archive provided in the `eib-chart-upgrade-user-data` Secret."
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-helm.adoc:120
msgid ""
"The value of the `version` property is replaced with the version provided in "
"the `eib-chart-upgrade-user-data` Secret."
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-helm.adoc:121
msgid ""
"After the successful execution of the `upgrade script`, the Helm integration "
"for link:https://docs.rke2.io/helm[RKE2]/link:https://docs.k3s.io/helm[K3s] "
"will pickup the change and automatically trigger an upgrade on the Helm "
"chart."
msgstr ""

#. type: Title =====
#: asciidoc/day2/downstream-cluster-helm.adoc:122
#, no-wrap
msgid "Upgrade Steps"
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-helm.adoc:123
msgid ""
"Determine an Edge "
"link:https://github.com/suse-edge/fleet-examples/releases[relase tag] from "
"which you wish to copy the Helm chart upgrade logic."
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-helm.adoc:124
msgid ""
"Copy the `fleets/day2/system-upgrade-controller-plans/eib-chart-upgrade` "
"fleet to the repository that your Fleet will be using to do GitOps from."
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-helm.adoc:125
msgid ""
"link:https://helm.sh/docs/helm/helm_pull/[Pull] the Helm chart archive that "
"you wish to upgrade to:"
msgstr ""

#. type: delimited block -
#: asciidoc/day2/downstream-cluster-helm.adoc:126
#, no-wrap
msgid "helm pull [chart URL | repo/chartname]\n"
msgstr ""

#. type: delimited block -
#: asciidoc/day2/downstream-cluster-helm.adoc:127
#, no-wrap
msgid ""
"# Alternatively if you want to pull a specific version:\n"
"# helm pull [chart URL | repo/chartname] --version 0.0.0\n"
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-helm.adoc:128
msgid "Encode the chart archive that you pulled:"
msgstr ""

#. type: delimited block -
#: asciidoc/day2/downstream-cluster-helm.adoc:129
#, no-wrap
msgid ""
"# Encode the archive and disable line wrapping\n"
"base64 -w 0 <chart-archive>.tgz\n"
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-helm.adoc:130
msgid ""
"Configure the `eib-chart-upgrade-user-data.yaml` secret located under the "
"`eib-chart-upgrade` fleet that you copied from step (2):"
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-helm.adoc:131
msgid ""
"The secret ships a file called `chart_upgrade_data.txt`. This file holds the "
"chart upgrade data that the `upgrade script` will use to know which charts "
"need to be upgraded. The file expects one-line per chart entries in the "
"following format *\"<name>|<version>|<base64_encoded_archive>\"*:"
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-helm.adoc:132
msgid ""
"`name` - is the name of the helm chart as seen in the "
"`kubernetes.helm.charts.name[]` property of the EIB definition file."
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-helm.adoc:133
msgid ""
"`version` - should hold the new version of the Helm chart. During the "
"upgrade this value will be used to replace the old `version` value of the "
"`HelmChart` manifest."
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-helm.adoc:134
msgid ""
"`base64_encoded_archive` - pass the output of the `base64 -w 0 "
"<chart-archive>.tgz` here. During upgrade this value will be used to replace "
"the old `chartContent` value of the `HelmChart` manifest."
msgstr ""

#. type: delimited block =
#: asciidoc/day2/downstream-cluster-helm.adoc:135
msgid ""
"The *<name>|<version>|<base64_encoded_archive>* line should be removed from "
"the file before you start adding your data. It serves as an example of where "
"and how you should configure your chart data."
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-helm.adoc:136
msgid ""
"Configure a `GitRepo` resource that will be shipping your chart upgrade "
"`fleet`. For more information on what a `GitRepo` is, see "
"link:https://fleet.rancher.io/ref-gitrepo[GitRepo Resource]."
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-helm.adoc:137
msgid "Configure `GitRepo` through the Rancher UI:"
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-helm.adoc:138
#: asciidoc/day2/downstream-cluster-k8s.adoc:65
#: asciidoc/day2/downstream-cluster-os.adoc:63
#: asciidoc/day2/downstream-cluster-suc.adoc:19
#: asciidoc/day2/downstream-cluster-suc.adoc:50
msgid "In the upper left corner, *☰ -> Continuous Delivery*"
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-helm.adoc:139
#: asciidoc/day2/downstream-cluster-k8s.adoc:66
#: asciidoc/day2/downstream-cluster-os.adoc:64
#: asciidoc/day2/downstream-cluster-suc.adoc:20
msgid "Go to *Git Repos -> Add Repository*"
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-helm.adoc:140
msgid "Here pass your *repository data* and *path* to your chart `upgrade fleet`"
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-helm.adoc:141
msgid ""
"Select *Next* and specify the *target* clusters of which you want to upgrade "
"the configured charts"
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-helm.adoc:142
#: asciidoc/day2/downstream-cluster-k8s.adoc:74
#: asciidoc/day2/downstream-cluster-k8s.adoc:112
#: asciidoc/day2/downstream-cluster-os.adoc:70
#: asciidoc/day2/downstream-cluster-suc.adoc:60
msgid "*Create*"
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-helm.adoc:143
msgid ""
"If `Rancher` is not available on your setup, you can configure a `GitRepo` "
"manually on your `management cluster`:"
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-helm.adoc:144
msgid "Populate the following template with your data:"
msgstr ""

#. type: delimited block -
#: asciidoc/day2/downstream-cluster-helm.adoc:145
#, no-wrap
msgid ""
"apiVersion: fleet.cattle.io/v1alpha1\n"
"kind: GitRepo\n"
"metadata:\n"
"  name: CHANGE_ME\n"
"  namespace: fleet-default\n"
"spec:\n"
"  # if running from a tag\n"
"  # revision: CHANGE_ME\n"
"  # if running from a branch\n"
"  # branch: CHANGE_ME\n"
"  paths:\n"
"  # path to your chart upgrade fleet relative to your repository\n"
"  - CHANGE_ME\n"
"  # your repository URL\n"
"  repo: CHANGE_ME\n"
"  targets:\n"
"  # Select target clusters\n"
"  - clusterSelector: CHANGE_ME\n"
"  # To match all clusters:\n"
"  # - clusterSelector: {}\n"
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-helm.adoc:146
msgid ""
"For more information on how to setup and deploy a `GitRepo` resource, see "
"link:https://fleet.rancher.io/ref-gitrepo[GitRepo Resource] and "
"link:https://fleet.rancher.io/gitrepo-add[Create a GitRepo Resource]."
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-helm.adoc:147
msgid ""
"For information on how to match *taget* clusters on a more granular level, "
"see link:https://fleet.rancher.io/gitrepo-targets[Mapping to Downstream "
"Clusters]."
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-helm.adoc:148
msgid ""
"Deploy the configured `GitRepo` resource to the `fleet-default` namespace of "
"the `management cluster`."
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-helm.adoc:149
msgid ""
"Executing this steps should result in a successfully created `GitRepo` "
"resource. It will then be picked up by Fleet and a Bundle will be "
"created. This Bunlde will hold the *raw* Kubernetes resources that the "
"`GitRepo` has configured under its fleet directory."
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-helm.adoc:150
msgid ""
"Fleet will then deploy all the Kubernetes resources from the Bundle to the "
"specified downstream clusters. One of this resources will be a SUC Plan that "
"will trigger the chart upgrade. For a full list of the resoruces that will "
"be deployed and the workflow of the upgrade process, refer to the "
"<<day2-helm-upgrade-eib-chart-overview, overview>> section."
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-helm.adoc:151
msgid ""
"To track the upgrade process itself, refer to the <<monitor-suc-plans, "
"Monitor SUC Plans>> section."
msgstr ""

#. type: Title =====
#: asciidoc/day2/downstream-cluster-helm.adoc:152
#, no-wrap
msgid "Example"
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-helm.adoc:153
msgid ""
"The following section serves to provide a real life example to the "
"<<day2-helm-upgrade-eib-chart-upgrade-steps>> section."
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-helm.adoc:154
msgid "I have the following two EIB deployed clusters:"
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-helm.adoc:155
msgid "`longhorn-single-k3s` - single node K3s cluster"
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-helm.adoc:156
msgid "`longhorn-ha-rke2` - HA RKE2 cluster"
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-helm.adoc:157
msgid ""
"Both clusters are running link:https://longhorn.io[Longhorn] and have been "
"deployed through EIB, using the following image definition _snippet_:"
msgstr ""

#. type: delimited block -
#: asciidoc/day2/downstream-cluster-helm.adoc:158
#, no-wrap
msgid ""
"kubernetes:\n"
"  # HA RKE2 cluster specific snippet\n"
"  # nodes:\n"
"  # - hostname: cp1rke2.example.com\n"
"  #   initializer: true\n"
"  #   type: server\n"
"  # - hostname: cp2rke2.example.com\n"
"  #   type: server\n"
"  # - hostname: cp3rke2.example.com\n"
"  #   type: server\n"
"  # - hostname: agent1rke2.example.com\n"
"  #   type: agent\n"
"  # - hostname: agent2rke2.example.com\n"
"  #   type: agent\n"
"  # version depending on the distribution\n"
"  version: v1.28.9+k3s1/v1.28.9+rke2r1\n"
"  helm:\n"
"    charts:\n"
"    - name: longhorn\n"
"      repositoryName: longhorn\n"
"      targetNamespace: longhorn-system\n"
"      createNamespace: true\n"
"      version: 1.5.5\n"
"    repositories:\n"
"    - name: longhorn\n"
"      url: https://charts.longhorn.io\n"
"...\n"
msgstr ""

#. type: Block title
#: asciidoc/day2/downstream-cluster-helm.adoc:159
#, no-wrap
msgid "longhorn-single-k3s installed Longhorn version"
msgstr ""

#. type: Target for macro image
#: asciidoc/day2/downstream-cluster-helm.adoc:160
#, no-wrap
msgid "day2_helm_chart_upgrade_example_k3s_old.png"
msgstr ""

#. type: Block title
#: asciidoc/day2/downstream-cluster-helm.adoc:161
#, no-wrap
msgid "longhorn-ha-rke2 installed Longhorn version"
msgstr ""

#. type: Target for macro image
#: asciidoc/day2/downstream-cluster-helm.adoc:162
#, no-wrap
msgid "day2_helm_chart_upgrade_example_rke2_old.png"
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-helm.adoc:163
msgid ""
"The problem with this is that currently `longhorn-single-k3s` and "
"`longhorn-ha-rke2` are running with a Longhorn version that is not "
"compatible with any Edge release."
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-helm.adoc:164
msgid ""
"We need to upgrade the chart on both clusters to a Edge supported Longhorn "
"version."
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-helm.adoc:165
msgid "To do this we follow these steps:"
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-helm.adoc:166
msgid ""
"Determine the Edge "
"link:https://github.com/suse-edge/fleet-examples/releases[relase tag] from "
"which we want to take the upgrade logic. For example, this example will use "
"the `release-3.0.1` release tag for which the supported Longhorn version is "
"`1.6.1`."
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-helm.adoc:167
msgid ""
"Clone the `release-3.0.1` release tag and copy the "
"`fleets/day2/system-upgrade-controller-plans/eib-chart-upgrade` directory to "
"our own repository."
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-helm.adoc:168
msgid ""
"For simplicity this section works from a branch of the "
"`suse-edge/fleet-examples` repository, so the directory structure is the "
"same, but you can place the `eib-chart-upgrade` fleet anywhere in your "
"repository."
msgstr ""

#. type: Block title
#: asciidoc/day2/downstream-cluster-helm.adoc:169
#, no-wrap
msgid "Directory structure example"
msgstr ""

#. type: delimited block -
#: asciidoc/day2/downstream-cluster-helm.adoc:170
#, no-wrap
msgid ""
".\n"
"...\n"
"|-- fleets\n"
"|   `-- day2\n"
"|       `-- system-upgrade-controller-plans\n"
"|           `-- eib-chart-upgrade\n"
"|               |-- eib-chart-upgrade-script.yaml\n"
"|               |-- eib-chart-upgrade-user-data.yaml\n"
"|               |-- fleet.yaml\n"
"|               `-- plan.yaml\n"
"...\n"
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-helm.adoc:171
msgid "Add the Longhorn chart repository:"
msgstr ""

#. type: delimited block -
#: asciidoc/day2/downstream-cluster-helm.adoc:172
#, no-wrap
msgid "helm repo add longhorn https://charts.longhorn.io\n"
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-helm.adoc:173
msgid "Pull the Longhorn chart version `1.6.1`:"
msgstr ""

#. type: delimited block -
#: asciidoc/day2/downstream-cluster-helm.adoc:174
#, no-wrap
msgid "helm pull longhorn/longhorn --version 1.6.1\n"
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-helm.adoc:175
msgid "This will pull the longhorn as an archvie named `longhorn-1.6.1.tgz`."
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-helm.adoc:176
msgid "Encode the Longhorn archive:"
msgstr ""

#. type: delimited block -
#: asciidoc/day2/downstream-cluster-helm.adoc:177
#, no-wrap
msgid "base64 -w 0 longhorn-1.6.1.tgz\n"
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-helm.adoc:178
msgid "This will output a long one-line base64 encoded string of the archive."
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-helm.adoc:179
msgid ""
"Now we have all the needed data to configure the "
"`eib-chart-upgrade-user-data.yaml` file. The file configuration should look "
"like this:"
msgstr ""

#. type: delimited block -
#: asciidoc/day2/downstream-cluster-helm.adoc:180
#, no-wrap
msgid ""
"apiVersion: v1\n"
"kind: Secret\n"
"metadata:\n"
"  name: eib-chart-upgrade-user-data\n"
"type: Opaque\n"
"stringData:\n"
"  # <name>|<version>|<base64_encoded_archive>\n"
"  chart_upgrade_data.txt: |\n"
"    longhorn|1.6.1|H4sIFAAAAAAA/ykAK2FIUjBjSE02THk5NWIzV...\n"
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-helm.adoc:181
msgid "`longhorn` is the name of the chart as seen in my EIB definition file"
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-helm.adoc:182
msgid ""
"`1.6.1` is the version to which I want to upgrade the `version` property of "
"the Longhorn `HelmChart` manifest"
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-helm.adoc:183
msgid ""
"`H4sIFAAAAAAA/ykAK2FIUjBjSE02THk5NWIzV...` is a snippet of the encoded "
"Longhorn `1.6.1` archive. *A snippet has been added here for better "
"readibility. You should always provide the full base64 encoded archive "
"string here.*"
msgstr ""

#. type: delimited block =
#: asciidoc/day2/downstream-cluster-helm.adoc:184
msgid ""
"This example shows configuration for a single chart upgrade, but if your "
"use-case requires to upgrade multiple charts on multiple clusters, you can "
"append the additional chart data as seen below:"
msgstr ""

#. type: delimited block -
#: asciidoc/day2/downstream-cluster-helm.adoc:185
#, no-wrap
msgid ""
"apiVersion: v1\n"
"kind: Secret\n"
"metadata:\n"
"  name: eib-chart-upgrade-user-data\n"
"type: Opaque\n"
"stringData:\n"
"  # <name>|<version>|<base64_encoded_archive>\n"
"  chart_upgrade_data.txt: |\n"
"    chartA|0.0.0|<chartA_base64_archive>\n"
"    chartB|0.0.0|<chartB_base64_archive>\n"
"    chartC|0.0.0|<chartC_base64_archive>\n"
"    ...\n"
msgstr ""

#. type: delimited block =
#: asciidoc/day2/downstream-cluster-helm.adoc:186
msgid ""
"We also decided that we do not want to keep manifest backups at `/tmp`, so "
"the following configuration was added to the `plan.yaml` file:"
msgstr ""

#. type: delimited block -
#: asciidoc/day2/downstream-cluster-helm.adoc:187
#, no-wrap
msgid ""
"apiVersion: upgrade.cattle.io/v1\n"
"kind: Plan\n"
"metadata:\n"
"  name: eib-chart-upgrade\n"
"spec:\n"
"  ...\n"
"  upgrade:\n"
"    ...\n"
"    # For when you want to backup your chart\n"
"    # manifest data under a specific directory\n"
"    # \n"
"    envs:\n"
"    - name: MANIFEST_BACKUP_DIR\n"
"      value: \"/root\"\n"
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-helm.adoc:188
msgid ""
"This will ensure that manifest backups will be saved under the `/root` "
"directory instead of `/tmp`."
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-helm.adoc:189
msgid ""
"Now that we have made all the needed configurations, what is left is to "
"create the `GitRepo` resource. This example creates the `GitRepo` resource "
"through the `Rancher UI`."
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-helm.adoc:190
msgid ""
"Following the steps described in the "
"<<day2-helm-upgrade-eib-chart-upgrade-steps, Upgrade Steps>>, we:"
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-helm.adoc:191
msgid "Named the `GitRepo` \"longhorn-upgrade\"."
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-helm.adoc:192
msgid ""
"Passed the URL to the repository that will be used - "
"https://github.com/suse-edge/fleet-examples.git"
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-helm.adoc:193
msgid "Passed the branch of the repository - \"doc-example\""
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-helm.adoc:194
msgid ""
"Passed the path to the `eib-chart-upgrade` fleet as seen in the repo - "
"`fleets/day2/system-upgrade-controller-plans/eib-chart-upgrade`"
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-helm.adoc:195
msgid "Selected the target clusters and created the resource"
msgstr ""

#. type: Block title
#: asciidoc/day2/downstream-cluster-helm.adoc:196
#, no-wrap
msgid "Successfully deployed SUC and longhorn GitRepos"
msgstr ""

#. type: Target for macro image
#: asciidoc/day2/downstream-cluster-helm.adoc:197
#, no-wrap
msgid "day2_helm_chart_upgrade_example_gitrepo.png"
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-helm.adoc:198
msgid "Now we need to monitor the upgrade procedures on the clusters:"
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-helm.adoc:199
msgid ""
"Check the status of the *Upgrade Pods*, following the directions from the "
"<<monitor-suc-plans, SUC plan monitor>> section."
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-helm.adoc:200
msgid ""
"A successfully completed *Upgrade Pod* that has been working on an "
"`intialiser` node should hold logs similar to:"
msgstr ""

#. type: Block title
#: asciidoc/day2/downstream-cluster-helm.adoc:201
#, no-wrap
msgid "Upgrade Pod running on an initialiser node"
msgstr ""

#. type: Target for macro image
#: asciidoc/day2/downstream-cluster-helm.adoc:202
#, no-wrap
msgid "day2_helm_chart_upgrade_example_initialiser_logs.png"
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-helm.adoc:203
msgid ""
"A successfully completed *Upgrade Pod* that has been working on a "
"`non-initialiser` node should hold logs similar to:"
msgstr ""

#. type: Block title
#: asciidoc/day2/downstream-cluster-helm.adoc:204
#, no-wrap
msgid "Upgrade Pod running on a non-initialiser node"
msgstr ""

#. type: Target for macro image
#: asciidoc/day2/downstream-cluster-helm.adoc:205
#, no-wrap
msgid "day2_helm_chart_upgrade_example_non_initialiser_logs.png"
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-helm.adoc:206
msgid ""
"After a successful *Upgrade Pod* completion, we would also need to wait and "
"monitor for the pods that wil lbe created by the helm controller. These pods "
"will do the actual upgrade based on the file chagnes that the *Upgrade Pod* "
"has done to the `HelmChart` manifest file."
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-helm.adoc:207
msgid ""
"In your cluster, go to *Workloads -> Pods* and search for a pod that "
"contains the `longhorn` string in the `default` namespace. This should "
"produce a pod with the naming template `helm-install-longhorn-*`, view the "
"logs of this pod."
msgstr ""

#. type: Block title
#: asciidoc/day2/downstream-cluster-helm.adoc:208
#, no-wrap
msgid "Successfully completed helm-install pod"
msgstr ""

#. type: Target for macro image
#: asciidoc/day2/downstream-cluster-helm.adoc:209
#, no-wrap
msgid "day2_helm_chart_upgrade_example_helm_install.png"
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-helm.adoc:210
msgid "The logs should be similar to:"
msgstr ""

#. type: Block title
#: asciidoc/day2/downstream-cluster-helm.adoc:211
#, no-wrap
msgid "Successfully completed helm-install pod logs"
msgstr ""

#. type: Target for macro image
#: asciidoc/day2/downstream-cluster-helm.adoc:212
#, no-wrap
msgid "day2_helm_chart_upgrade_example_successfully_upgraded_pod.png"
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-helm.adoc:213
msgid ""
"Now that we have ensured that everything has completed succesfully, we need "
"to verify the version change:"
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-helm.adoc:214
msgid ""
"On the clusters we need to go to *More Resources -> Helm -> HelmCharts* and "
"in the `default` namespace search for the `longhorn` HelmChart resource:"
msgstr ""

#. type: Block title
#: asciidoc/day2/downstream-cluster-helm.adoc:215
#, no-wrap
msgid "longhorn-single-k3s upgraded Longhorn version"
msgstr ""

#. type: Target for macro image
#: asciidoc/day2/downstream-cluster-helm.adoc:216
#, no-wrap
msgid "day2_helm_chart_upgrade_example_k3s_longhorn_upgrade.png"
msgstr ""

#. type: Block title
#: asciidoc/day2/downstream-cluster-helm.adoc:217
#, no-wrap
msgid "longhorn-ha-rke2 upgraded Longhorn version"
msgstr ""

#. type: Target for macro image
#: asciidoc/day2/downstream-cluster-helm.adoc:218
#, no-wrap
msgid "day2_helm_chart_upgrade_example_rke2_longhorn_upgrade.png"
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-helm.adoc:219
msgid ""
"This ensures that the `Longhorn` helm chart has been successfully upgraded "
"and concludes this example."
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-helm.adoc:220
msgid ""
"If for some reason we would like to revert to the previous chart version of "
"Longhorn, the previous Longhorn manifest will be located under "
"`/root/longhorn.yaml` on the initialiser node. This is true, because we have "
"specified the `MANIFEST_BACKUP_DIR` in the SUC Plan."
msgstr ""

#. type: Title =====
#: asciidoc/day2/downstream-cluster-helm.adoc:221
#, no-wrap
msgid "Helm chart upgrade using a third-party GitOps tool"
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-helm.adoc:222
msgid ""
"There might be use-cases where users would like to use this upgrade "
"procedure with a GitOps workflow other than Fleet (e.g. `Flux`)."
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-helm.adoc:223
msgid ""
"To get the resources related to EIB deployed Helm chart upgrades you need to "
"first determine the Edge "
"link:https://github.com/suse-edge/fleet-examples/releases[release] tag of "
"the "
"link:https://github.com/suse-edge/fleet-examples.git[suse-edge/fleet-examples] "
"repository that you would like to use."
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-helm.adoc:224
msgid ""
"After that, resources can be found at "
"`fleets/day2/system-upgrade-controller-plans/eib-chart-upgrade`, where:"
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-helm.adoc:225
msgid ""
"`plan.yaml` - system-upgrade-controller Plan related to the upgrade "
"procedure."
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-helm.adoc:226
msgid ""
"`eib-chart-upgrade-script.yaml` - Secret holding the `upgrade script` that "
"is responsible for editing and upgrade the `HelmChart` manifest files."
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-helm.adoc:227
msgid ""
"`eib-chart-upgrade-user-data.yaml` - Secret holding a file that is utilised "
"by the `upgrade scritp`; populated by the user with relevat chart upgrade "
"data beforehand."
msgstr ""

#. type: delimited block =
#: asciidoc/day2/downstream-cluster-helm.adoc:228
msgid ""
"These `Plan` resources are interpreted by the `system-upgrade-controller` "
"and should be deployed on each downstream cluster that holds charts in need "
"of an upgrade. For information on how to deploy the "
"`system-upgrade-controller`, see <<day2-suc-third-party-gitops>>."
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-helm.adoc:229
msgid ""
"To better understand how your GitOps workflow can be used to deploy the *SUC "
"Plans* for the upgrade process, it can be beneficial to take a look at the "
"<<day2-helm-upgrade-eib-chart-overview,overview>> of the process using "
"`Fleet`."
msgstr ""

#. type: Title ==
#: asciidoc/day2/downstream-cluster-k8s.adoc:1
#, no-wrap
msgid "Kubernetes version upgrade"
msgstr ""

#. type: delimited block =
#: asciidoc/day2/downstream-cluster-k8s.adoc:2
msgid ""
"This section covers Kubernetes upgrades for downstream clusters that have "
"*NOT* been created through a <<components-rancher,Rancher>> instance. For "
"information on how to upgrade the Kubernetes version of `Rancher` created "
"clusters, see "
"link:https://ranchermanager.docs.rancher.com/v2.8/getting-started/installation-and-upgrade/upgrade-and-roll-back-kubernetes#upgrading-the-kubernetes-version[Upgrading "
"and Rolling Back Kubernetes]."
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-k8s.adoc:4
msgid ""
"This section covers the custom components that the `Kubernetes upgrade` "
"process uses over the default `Day 2` <<day2-downstream-components, "
"components>>."
msgstr ""

#. type: Title ====
#: asciidoc/day2/downstream-cluster-k8s.adoc:5
#, no-wrap
msgid "rke2-upgrade"
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-k8s.adoc:6
msgid "Image responsible for upgrading the RKE2 version of a specific node."
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-k8s.adoc:7
msgid ""
"Shipped through a Pod created by *SUC* based on a *SUC Plan*. The Plan "
"should be located on each *downstream cluster* that is in need of a RKE2 "
"upgrade."
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-k8s.adoc:8
msgid ""
"For more information regarding how the `rke2-upgrade` image performs the "
"upgrade, see the "
"link:https://github.com/rancher/rke2-upgrade/tree/master[upstream] "
"documentation."
msgstr ""

#. type: Title ====
#: asciidoc/day2/downstream-cluster-k8s.adoc:9
#, no-wrap
msgid "k3s-upgrade"
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-k8s.adoc:10
msgid "Image responsible for upgrading the K3s version of a specific node."
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-k8s.adoc:11
msgid ""
"Shipped through a Pod created by *SUC* based on a *SUC Plan*. The Plan "
"should be located on each *downstream cluster* that is in need of a K3s "
"upgrade."
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-k8s.adoc:12
msgid ""
"For more information regarding how the `k3s-upgrade` image performs the "
"upgrade, see the link:https://github.com/k3s-io/k3s-upgrade[upstream] "
"documentation."
msgstr ""

#. type: Title ===
#: asciidoc/day2/downstream-cluster-k8s.adoc:13
#: asciidoc/day2/downstream-cluster-os.adoc:8
#, no-wrap
msgid "Requirements"
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-k8s.adoc:14
msgid "*Backup your Kubernetes distribution:*"
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-k8s.adoc:15
msgid ""
"For *imported RKE2 clusters*, see the "
"link:https://docs.rke2.io/backup_restore[RKE2 Backup and Restore] "
"documentation."
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-k8s.adoc:16
msgid ""
"For *imported K3s clusters*, see the "
"link:https://docs.k3s.io/datastore/backup-restore[K3s Backup and Restore] "
"documentation."
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-k8s.adoc:17
#: asciidoc/day2/downstream-cluster-os.adoc:11
msgid ""
"*Make sure that SUC Plan tolerations match node tolerations* - If your "
"Kubernetes cluster nodes have custom *taints*, make sure to add "
"link:https://kubernetes.io/docs/concepts/scheduling-eviction/taint-and-toleration/[tolerations] "
"for those taints in the *SUC Plans*. By default *SUC Plans* have tolerations "
"only for *control-plane* nodes. Default tolerations include:"
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-k8s.adoc:18
#: asciidoc/day2/downstream-cluster-os.adoc:12
msgid "_CriticalAddonsOnly=true:NoExecute_"
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-k8s.adoc:19
#: asciidoc/day2/downstream-cluster-os.adoc:13
msgid "_node-role.kubernetes.io/control-plane:NoSchedule_"
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-k8s.adoc:20
#: asciidoc/day2/downstream-cluster-os.adoc:14
msgid "_node-role.kubernetes.io/etcd:NoExecute_"
msgstr ""

#. type: delimited block =
#: asciidoc/day2/downstream-cluster-k8s.adoc:21
msgid ""
"Any additional tolerations must be added under the `.spec.tolerations` "
"section of each Plan. *SUC Plans* related to the Kubernetes version upgrade "
"can be found in the "
"link:https://github.com/suse-edge/fleet-examples[suse-edge/fleet-examples] "
"repository under:"
msgstr ""

#. type: delimited block =
#: asciidoc/day2/downstream-cluster-k8s.adoc:22
msgid "For *RKE2* - `fleets/day2/system-upgrade-controller-plans/rke2-upgrade`"
msgstr ""

#. type: delimited block =
#: asciidoc/day2/downstream-cluster-k8s.adoc:23
msgid "For *K3s* - `fleets/day2/system-upgrade-controller-plans/k3s-upgrade`"
msgstr ""

#. type: delimited block =
#: asciidoc/day2/downstream-cluster-k8s.adoc:24
msgid ""
"*Make sure you use the Plans from a valid repository "
"link:https://github.com/suse-edge/fleet-examples/releases[release] tag.*"
msgstr ""

#. type: delimited block =
#: asciidoc/day2/downstream-cluster-k8s.adoc:25
msgid ""
"An example of defining custom tolerations for the RKE2 *control-plane* SUC "
"Plan, would look like this:"
msgstr ""

#. type: delimited block -
#: asciidoc/day2/downstream-cluster-k8s.adoc:26
#, no-wrap
msgid ""
"apiVersion: upgrade.cattle.io/v1\n"
"kind: Plan\n"
"metadata:\n"
"  name: rke2-plan-control-plane\n"
"spec:\n"
"  ...\n"
"  tolerations:\n"
"  # default tolerations\n"
"  - key: \"CriticalAddonsOnly\"\n"
"    operator: \"Equal\"\n"
"    value: \"true\"\n"
"    effect: \"NoExecute\"\n"
"  - key: \"node-role.kubernetes.io/control-plane\"\n"
"    operator: \"Equal\"\n"
"    effect: \"NoSchedule\"\n"
"  - key: \"node-role.kubernetes.io/etcd\"\n"
"    operator: \"Equal\"\n"
"    effect: \"NoExecute\"\n"
"  # custom toleration\n"
"  - key: \"foo\"\n"
"    operator: \"Equal\"\n"
"    value: \"bar\"\n"
"    effect: \"NoSchedule\"\n"
"...\n"
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-k8s.adoc:28
msgid ""
"This section assumes you will be deploying *SUC Plans* using "
"<<components-fleet,Fleet>>. If you intend to deploy the *SUC Plan* using a "
"different approach, refer to "
"<<k8s-upgrade-suc-plan-deployment-third-party>>."
msgstr ""

#. type: delimited block =
#: asciidoc/day2/downstream-cluster-k8s.adoc:29
msgid ""
"The `Kubernetes version upgrade procedure` revolves around deploying *SUC "
"Plans* to downstream clusters. These plans hold information that instructs "
"the *SUC* on which nodes to create Pods which run the `rke2/k3s-upgrade` "
"images. For information regarding the structure of a *SUC Plan*, refer to "
"the "
"https://github.com/rancher/system-upgrade-controller?tab=readme-ov-file#example-plans[upstream] "
"documentation."
msgstr ""

#. type: delimited block =
#: asciidoc/day2/downstream-cluster-k8s.adoc:30
msgid "`Kubernetes upgrade` Plans are shipped in the following ways:"
msgstr ""

#. type: delimited block =
#: asciidoc/day2/downstream-cluster-k8s.adoc:31
msgid "Through a `GitRepo` resources - <<k8s-upgrade-suc-plan-deployment-git-repo>>"
msgstr ""

#. type: delimited block =
#: asciidoc/day2/downstream-cluster-k8s.adoc:32
msgid "Through a `Bundle` resource - <<k8s-upgrade-suc-plan-deployment-bundle>>"
msgstr ""

#. type: delimited block =
#: asciidoc/day2/downstream-cluster-k8s.adoc:33
#: asciidoc/day2/downstream-cluster-os.adoc:26
msgid ""
"To determine which resource you should use, refer to "
"<<day2-determine-use-case>>."
msgstr ""

#. type: delimited block =
#: asciidoc/day2/downstream-cluster-k8s.adoc:34
msgid ""
"For a full overview of what happens during the _update procedure_, refer to "
"the <<k8s-version-upgrade-overview>> section."
msgstr ""

#. type: delimited block =
#: asciidoc/day2/downstream-cluster-k8s.adoc:36
msgid ""
"This section aims to describe the full workflow that the *_Kubernetes "
"version upgrade process_* goes throught from start to finish."
msgstr ""

#. type: Block title
#: asciidoc/day2/downstream-cluster-k8s.adoc:37
#, no-wrap
msgid "Kubernetes version upgrade workflow"
msgstr ""

#. type: Target for macro image
#: asciidoc/day2/downstream-cluster-k8s.adoc:38
#, no-wrap
msgid "day2_k8s_version_upgrade_diagram.png"
msgstr ""

#. type: delimited block =
#: asciidoc/day2/downstream-cluster-k8s.adoc:39
msgid "Kubernetes version upgrade steps:"
msgstr ""

#. type: delimited block =
#: asciidoc/day2/downstream-cluster-k8s.adoc:40
msgid ""
"Based on his use-case, the user determines whether to use a *GitRepo* or a "
"*Bundle* resource for the deployment of the `Kubernetes upgrade SUC Plans` "
"to the desired downstream clusters. For information on how to map a "
"*GitRepo/Bundle* to a specific set of downstream clusters, see "
"https://fleet.rancher.io/gitrepo-targets[Mapping to Downstream Clusters]."
msgstr ""

#. type: delimited block =
#: asciidoc/day2/downstream-cluster-k8s.adoc:41
#: asciidoc/day2/downstream-cluster-os.adoc:34
msgid ""
"If you are unsure whether you should use a *GitRepo* or a *Bundle* resource "
"for the *SUC Plan* deployment, refer to <<day2-determine-use-case>>."
msgstr ""

#. type: delimited block =
#: asciidoc/day2/downstream-cluster-k8s.adoc:42
msgid ""
"For *GitRepo/Bundle* configuration options, refer to "
"<<k8s-upgrade-suc-plan-deployment-git-repo>> or "
"<<k8s-upgrade-suc-plan-deployment-bundle>>."
msgstr ""

#. type: delimited block =
#: asciidoc/day2/downstream-cluster-k8s.adoc:43
#: asciidoc/day2/downstream-cluster-os.adoc:36
msgid ""
"The user deploys the configured *GitRepo/Bundle* resource to the "
"`fleet-default` namespace in his `management cluster`. This is done either "
"*manually* or thorugh the *Rancher UI* if such is available."
msgstr ""

#. type: delimited block =
#: asciidoc/day2/downstream-cluster-k8s.adoc:44
#: asciidoc/day2/downstream-cluster-os.adoc:37
msgid ""
"<<components-fleet,Fleet>> constantly monitors the `fleet-default` namespace "
"and immediately detects the newly deployed *GitRepo/Bundle* resource. For "
"more information regarding what namespaces does Fleet monitor, refer to "
"Fleet's https://fleet.rancher.io/namespaces[Namespaces] documentation."
msgstr ""

#. type: delimited block =
#: asciidoc/day2/downstream-cluster-k8s.adoc:45
#: asciidoc/day2/downstream-cluster-os.adoc:38
msgid ""
"If the user has deployed a *GitRepo* resource, `Fleet` will reconcile the "
"*GitRepo* and based on its *paths* and *fleet.yaml* configurations it will "
"deploy a *Bundle* resource in the `fleet-default` namespace. For more "
"information, refer to Fleet's "
"https://fleet.rancher.io/gitrepo-content[GitRepo Contents] documentation."
msgstr ""

#. type: delimited block =
#: asciidoc/day2/downstream-cluster-k8s.adoc:46
msgid ""
"`Fleet` then proceeds to deploy the `Kubernetes resources` from this "
"*Bundle* to all the targeted `downstream clusters`. In the context of the "
"`Kubernetes version upgrade`, Fleet deploys the following resources from the "
"*Bundle* (depending on the Kubernetes distrubution):"
msgstr ""

#. type: delimited block =
#: asciidoc/day2/downstream-cluster-k8s.adoc:47
msgid ""
"`rke2-plan-agent`/`k3s-plan-agent` - instructs *SUC* on how to do a "
"Kubernetes upgrade on cluster *_agent_* nodes. Will *not* be interpreted if "
"the cluster consists only from _control-plane_ nodes."
msgstr ""

#. type: delimited block =
#: asciidoc/day2/downstream-cluster-k8s.adoc:48
msgid ""
"`rke2-plan-control-plane`/`k3s-plan-control-plane` - instructs *SUC* on how "
"to do a Kubernetes upgrade on cluster *_control-plane_* nodes."
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-k8s.adoc:49
msgid ""
"The above *SUC Plans* will be deployed in the `cattle-system` namespace of "
"each downstream cluster."
msgstr ""

#. type: delimited block =
#: asciidoc/day2/downstream-cluster-k8s.adoc:50
#: asciidoc/day2/downstream-cluster-os.adoc:44
msgid ""
"On the downstream cluster, *SUC* picks up the newly deployed *SUC Plans* and "
"deploys an *_Update Pod_* on each node that matches the *node selector* "
"defined in the *SUC Plan*. For information how to monitor the *SUC Plan "
"Pod*, refer to <<monitor-suc-plans>>."
msgstr ""

#. type: delimited block =
#: asciidoc/day2/downstream-cluster-k8s.adoc:51
msgid ""
"Depending on which *SUC Plans* you have deployed, the *Update Pod* will run "
"either a https://hub.docker.com/r/rancher/rke2-upgrade/tags[rke2-upgrade] or "
"a https://hub.docker.com/r/rancher/k3s-upgrade/tags[k3s-upgrade] image and "
"will execute the following workflow on *each* cluster node:"
msgstr ""

#. type: delimited block =
#: asciidoc/day2/downstream-cluster-k8s.adoc:52
msgid ""
"https://kubernetes.io/docs/reference/kubectl/generated/kubectl_cordon/[Cordon] "
"cluster node - to ensure that no pods are scheduled accidentally on this "
"node while it is being upgraded, we mark it as `unschedulable`."
msgstr ""

#. type: delimited block =
#: asciidoc/day2/downstream-cluster-k8s.adoc:53
msgid ""
"Replace the `rke2/k3s` binary that is installed on the node OS with the "
"binary shipped by the `rke2-upgrade/k3s-upgrade` image that the Pod is "
"currently running."
msgstr ""

#. type: delimited block =
#: asciidoc/day2/downstream-cluster-k8s.adoc:54
msgid ""
"Kill the `rke2/k3s` process that is running on the node OS - this instructs "
"the *supervisor* to automatically restart the `rke2/k3s` process using the "
"new version."
msgstr ""

#. type: delimited block =
#: asciidoc/day2/downstream-cluster-k8s.adoc:55
msgid ""
"https://kubernetes.io/docs/reference/kubectl/generated/kubectl_uncordon/[Uncordon] "
"cluster node - after the successful Kubernetes distribution upgrade, the "
"node is again marked as `scheduable`."
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-k8s.adoc:56
msgid ""
"For further information regarding how the `rke2-upgrade` and `k3s-upgrade` "
"images work, see the https://github.com/rancher/rke2-upgrade[rke2-upgrade] "
"and https://github.com/k3s-io/k3s-upgrade[k3s-upgrade] upstream projects."
msgstr ""

#. type: delimited block =
#: asciidoc/day2/downstream-cluster-k8s.adoc:57
msgid ""
"With the above steps executed, the Kubernetes version of each cluster node "
"should have been upgraded to the desired Edge compatible "
"link:https://github.com/suse-edge/fleet-examples/releases[release]."
msgstr ""

#. type: Title ===
#: asciidoc/day2/downstream-cluster-k8s.adoc:58
#, no-wrap
msgid "Kubernetes version upgrade - SUC Plan deployment"
msgstr ""

#. type: Title ====
#: asciidoc/day2/downstream-cluster-k8s.adoc:59
#: asciidoc/day2/downstream-cluster-os.adoc:57
#, no-wrap
msgid "SUC Plan deployment - GitRepo resource"
msgstr ""

#. type: delimited block =
#: asciidoc/day2/downstream-cluster-k8s.adoc:60
msgid ""
"A *GitRepo* resource, that ships the needed `Kubernetes upgrade` *SUC "
"Plans*, can be deployed in one of the following ways:"
msgstr ""

#. type: delimited block =
#: asciidoc/day2/downstream-cluster-k8s.adoc:61
msgid ""
"Through the `Rancher UI` - "
"<<k8s-upgrade-suc-plan-deployment-git-repo-rancher>> (when `Rancher` is "
"available)."
msgstr ""

#. type: delimited block =
#: asciidoc/day2/downstream-cluster-k8s.adoc:62
msgid ""
"By <<k8s-upgrade-suc-plan-deployment-git-repo-manual, manually deploying>> "
"the resource to your `management cluster`."
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-k8s.adoc:63
#: asciidoc/day2/downstream-cluster-k8s.adoc:98
msgid ""
"Once deployed, to monitor the Kubernetes upgrade process of the nodes of "
"your targeted cluster, refer to the <<monitor-suc-plans>> documentation."
msgstr ""

#. type: Title =====
#: asciidoc/day2/downstream-cluster-k8s.adoc:64
#: asciidoc/day2/downstream-cluster-os.adoc:62
#, no-wrap
msgid "GitRepo creation - Rancher UI"
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-k8s.adoc:67
#: asciidoc/day2/downstream-cluster-os.adoc:65
#: asciidoc/day2/downstream-cluster-suc.adoc:21
msgid "If you use the `suse-edge/fleet-examples` repository:"
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-k8s.adoc:68
#: asciidoc/day2/downstream-cluster-os.adoc:66
#: asciidoc/day2/downstream-cluster-suc.adoc:22
msgid "*Repository URL* - `https://github.com/suse-edge/fleet-examples.git`"
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-k8s.adoc:69
#: asciidoc/day2/downstream-cluster-os.adoc:67
msgid ""
"*Watch -> Revision* - choose a "
"link:https://github.com/suse-edge/fleet-examples/releases[release] tag for "
"the `suse-edge/fleet-examples` repository that you wish to use"
msgstr ""

#. type: delimited block =
#: asciidoc/day2/downstream-cluster-k8s.adoc:70
msgid ""
"Under *Paths* add the path to the Kubernetes distribution upgrade Fleets as "
"seen in the release tag:"
msgstr ""

#. type: delimited block =
#: asciidoc/day2/downstream-cluster-k8s.adoc:71
msgid "For RKE2 - `fleets/day2/system-upgrade-controller-plans/rke2-upgrade`"
msgstr ""

#. type: delimited block =
#: asciidoc/day2/downstream-cluster-k8s.adoc:72
msgid "For K3s - `fleets/day2/system-upgrade-controller-plans/k3s-upgrade`"
msgstr ""

#. type: delimited block =
#: asciidoc/day2/downstream-cluster-k8s.adoc:73
msgid ""
"Select *Next* to move to the *target* configuration section. *Only select "
"clusters for which you wish to upgrade the desired Kubernetes distribution*"
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-k8s.adoc:75
#: asciidoc/day2/downstream-cluster-os.adoc:71
#: asciidoc/day2/downstream-cluster-suc.adoc:27
msgid ""
"Alternatively, if you decide to use your own repository to host these files, "
"you would need to provide your repo data above."
msgstr ""

#. type: Title =====
#: asciidoc/day2/downstream-cluster-k8s.adoc:76
#: asciidoc/day2/downstream-cluster-os.adoc:72
#: asciidoc/day2/downstream-cluster-suc.adoc:28
#, no-wrap
msgid "GitRepo creation - manual"
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-k8s.adoc:77
#: asciidoc/day2/downstream-cluster-k8s.adoc:114
msgid ""
"Choose the desired Edge "
"link:https://github.com/suse-edge/fleet-examples/releases[release] tag that "
"you wish to apply the Kubernetes *SUC upgrade Plans* from (referenced below "
"as `$\\{REVISION\\}`)."
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-k8s.adoc:78
#: asciidoc/day2/downstream-cluster-os.adoc:74
#: asciidoc/day2/downstream-cluster-suc.adoc:30
msgid "Pull the *GitRepo* resource:"
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-k8s.adoc:79
#: asciidoc/day2/downstream-cluster-k8s.adoc:116
msgid "For *RKE2* clusters:"
msgstr ""

#. type: delimited block -
#: asciidoc/day2/downstream-cluster-k8s.adoc:80
#, no-wrap
msgid ""
"curl -o rke2-upgrade-gitrepo.yaml "
"https://raw.githubusercontent.com/suse-edge/fleet-examples/${REVISION}/gitrepos/day2/rke2-upgrade-gitrepo.yaml\n"
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-k8s.adoc:81
#: asciidoc/day2/downstream-cluster-k8s.adoc:118
msgid "For *K3s* clusters:"
msgstr ""

#. type: delimited block -
#: asciidoc/day2/downstream-cluster-k8s.adoc:82
#, no-wrap
msgid ""
"curl -o k3s-upgrade-gitrepo.yaml "
"https://raw.githubusercontent.com/suse-edge/fleet-examples/${REVISION}/gitrepos/day2/k3s-upgrade-gitrepo.yaml\n"
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-k8s.adoc:83
#: asciidoc/day2/downstream-cluster-os.adoc:76
msgid ""
"Edit the *GitRepo* configuration, under `spec.targets` specify your desired "
"target list. By default the `GitRepo` resources from the "
"`suse-edge/fleet-examples` are *NOT* mapped to any down stream clusters."
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-k8s.adoc:84
#: asciidoc/day2/downstream-cluster-os.adoc:77
msgid "To match all clusters change the default `GitRepo` *target* to:"
msgstr ""

#. type: delimited block -
#: asciidoc/day2/downstream-cluster-k8s.adoc:85
#: asciidoc/day2/downstream-cluster-k8s.adoc:110
#: asciidoc/day2/downstream-cluster-k8s.adoc:122
#: asciidoc/day2/downstream-cluster-os.adoc:78
#: asciidoc/day2/downstream-cluster-os.adoc:99
#: asciidoc/day2/downstream-cluster-os.adoc:108
#: asciidoc/day2/downstream-cluster-suc.adoc:34
#: asciidoc/day2/downstream-cluster-suc.adoc:58
#: asciidoc/day2/downstream-cluster-suc.adoc:67
#, no-wrap
msgid ""
"spec:\n"
"  targets:\n"
"  - clusterSelector: {}\n"
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-k8s.adoc:86
#: asciidoc/day2/downstream-cluster-k8s.adoc:123
#: asciidoc/day2/downstream-cluster-os.adoc:79
#: asciidoc/day2/downstream-cluster-os.adoc:109
msgid ""
"Alternatively, if you want a more granular cluster selection see "
"link:https://fleet.rancher.io/gitrepo-targets[Mapping to Downstream "
"Clusters]"
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-k8s.adoc:87
#: asciidoc/day2/downstream-cluster-os.adoc:80
msgid "Apply the *GitRepo* resources to your `management cluster`:"
msgstr ""

#. type: delimited block -
#: asciidoc/day2/downstream-cluster-k8s.adoc:88
#, no-wrap
msgid ""
"# RKE2\n"
"kubectl apply -f rke2-upgrade-gitrepo.yaml \n"
msgstr ""

#. type: delimited block -
#: asciidoc/day2/downstream-cluster-k8s.adoc:89
#, no-wrap
msgid ""
"# K3s\n"
"kubectl apply -f k3s-upgrade-gitrepo.yaml\n"
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-k8s.adoc:90
#: asciidoc/day2/downstream-cluster-os.adoc:82
#: asciidoc/day2/downstream-cluster-suc.adoc:38
msgid "View the created *GitRepo* resource under the `fleet-default` namespace:"
msgstr ""

#. type: delimited block -
#: asciidoc/day2/downstream-cluster-k8s.adoc:91
#, no-wrap
msgid ""
"# RKE2\n"
"kubectl get gitrepo rke2-upgrade -n fleet-default\n"
msgstr ""

#. type: delimited block -
#: asciidoc/day2/downstream-cluster-k8s.adoc:92
#, no-wrap
msgid ""
"# K3s\n"
"kubectl get gitrepo k3s-upgrade -n fleet-default\n"
msgstr ""

#. type: delimited block -
#: asciidoc/day2/downstream-cluster-k8s.adoc:93
#, no-wrap
msgid ""
"# Example output\n"
"NAME           REPO                                              COMMIT          "
"BUNDLEDEPLOYMENTS-READY   STATUS\n"
"k3s-upgrade    https://github.com/suse-edge/fleet-examples.git   "
"release-3.0.1   0/0                       \n"
"rke2-upgrade   https://github.com/suse-edge/fleet-examples.git   "
"release-3.0.1   0/0                       \n"
msgstr ""

#. type: Title ====
#: asciidoc/day2/downstream-cluster-k8s.adoc:94
#: asciidoc/day2/downstream-cluster-os.adoc:85
#, no-wrap
msgid "SUC Plan deployment - Bundle resource"
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-k8s.adoc:95
msgid ""
"A *Bundle* resource, that ships the needed `Kubernetes upgrade` *SUC Plans*, "
"can be deployed in one of the following ways:"
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-k8s.adoc:96
msgid ""
"Through the `Rancher UI` - "
"<<k8s-upgrade-suc-plan-deployment-bundle-rancher>> (when `Rancher` is "
"available)."
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-k8s.adoc:97
msgid ""
"By <<k8s-upgrade-suc-plan-deployment-bundle-manual, manually deploying>> the "
"resource to your `management cluster`."
msgstr ""

#. type: Title =====
#: asciidoc/day2/downstream-cluster-k8s.adoc:99
#: asciidoc/day2/downstream-cluster-os.adoc:90
#: asciidoc/day2/downstream-cluster-suc.adoc:49
#, no-wrap
msgid "Bundle creation - Rancher UI"
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-k8s.adoc:100
#: asciidoc/day2/downstream-cluster-os.adoc:91
msgid "In the upper left corner, click *☰ -> Continuous Delivery*"
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-k8s.adoc:101
#: asciidoc/day2/downstream-cluster-os.adoc:92
#: asciidoc/day2/downstream-cluster-suc.adoc:51
msgid "Go to *Advanced* > *Bundles*"
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-k8s.adoc:102
#: asciidoc/day2/downstream-cluster-os.adoc:93
#: asciidoc/day2/downstream-cluster-suc.adoc:52
msgid "Select *Create from YAML*"
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-k8s.adoc:103
#: asciidoc/day2/downstream-cluster-os.adoc:94
#: asciidoc/day2/downstream-cluster-suc.adoc:53
msgid "From here you can create the Bundle in one of the following ways:"
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-k8s.adoc:104
msgid ""
"By manually copying the *Bundle* content to the *Create from YAML* "
"page. Content can be retrieved:"
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-k8s.adoc:105
msgid ""
"For RKE2 - "
"https://raw.githubusercontent.com/suse-edge/fleet-examples/$\\{REVISION\\}/bundles/day2/system-upgrade-controller-plans/rke2-upgrade/plan-bundle.yaml"
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-k8s.adoc:106
msgid ""
"For K3s - "
"https://raw.githubusercontent.com/suse-edge/fleet-examples/$\\{REVISION\\}/bundles/day2/system-upgrade-controller-plans/k3s-upgrade/plan-bundle.yaml"
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-k8s.adoc:107
msgid ""
"By cloning the "
"link:https://github.com/suse-edge/fleet-examples.git[suse-edge/fleet-examples] "
"repository to the desired "
"link:https://github.com/suse-edge/fleet-examples/releases[release] tag and "
"selecting the *Read from File* option in the *Create from YAML* page. From "
"there, navigate to the bundle that you need "
"(`/bundles/day2/system-upgrade-controller-plans/rke2-upgrade/plan-bundle.yaml` "
"for RKE2 and "
"`/bundles/day2/system-upgrade-controller-plans/k3s-upgrade/plan-bundle.yaml` "
"for K3s). This will auto-populate the *Create from YAML* page with the "
"Bundle content"
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-k8s.adoc:108
#: asciidoc/day2/downstream-cluster-os.adoc:97
#: asciidoc/day2/downstream-cluster-suc.adoc:56
msgid "Change the *target* clusters for the `Bundle`:"
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-k8s.adoc:109
#: asciidoc/day2/downstream-cluster-os.adoc:98
#: asciidoc/day2/downstream-cluster-suc.adoc:57
msgid ""
"To match all downstream clusters change the default Bundle `.spec.targets` "
"to:"
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-k8s.adoc:111
#: asciidoc/day2/downstream-cluster-os.adoc:100
#: asciidoc/day2/downstream-cluster-suc.adoc:59
msgid ""
"For a more granular downstream cluster mappings, see "
"link:https://fleet.rancher.io/gitrepo-targets[Mapping to Downstream "
"Clusters]."
msgstr ""

#. type: Title =====
#: asciidoc/day2/downstream-cluster-k8s.adoc:113
#: asciidoc/day2/downstream-cluster-os.adoc:102
#: asciidoc/day2/downstream-cluster-suc.adoc:61
#, no-wrap
msgid "Bundle creation - manual"
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-k8s.adoc:115
msgid "Pull the *Bundle* resources:"
msgstr ""

#. type: delimited block -
#: asciidoc/day2/downstream-cluster-k8s.adoc:117
#, no-wrap
msgid ""
"curl -o rke2-plan-bundle.yaml "
"https://raw.githubusercontent.com/suse-edge/fleet-examples/${REVISION}/bundles/day2/system-upgrade-controller-plans/rke2-upgrade/plan-bundle.yaml\n"
msgstr ""

#. type: delimited block -
#: asciidoc/day2/downstream-cluster-k8s.adoc:119
#, no-wrap
msgid ""
"curl -o k3s-plan-bundle.yaml "
"https://raw.githubusercontent.com/suse-edge/fleet-examples/${REVISION}/bundles/day2/system-upgrade-controller-plans/k3s-upgrade/plan-bundle.yaml\n"
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-k8s.adoc:120
#: asciidoc/day2/downstream-cluster-os.adoc:106
#: asciidoc/day2/downstream-cluster-suc.adoc:65
msgid ""
"Edit the `Bundle` *target* configurations, under `spec.targets` provide your "
"desired target list. By default the `Bundle` resources from the "
"`suse-edge/fleet-examples` are *NOT* mapped to any down stream clusters."
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-k8s.adoc:121
#: asciidoc/day2/downstream-cluster-os.adoc:107
#: asciidoc/day2/downstream-cluster-suc.adoc:66
msgid "To match all clusters change the default `Bundle` *target* to:"
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-k8s.adoc:124
#: asciidoc/day2/downstream-cluster-os.adoc:110
msgid "Apply the *Bundle* resources to your `management cluster`:"
msgstr ""

#. type: delimited block -
#: asciidoc/day2/downstream-cluster-k8s.adoc:125
#, no-wrap
msgid ""
"# For RKE2\n"
"kubectl apply -f rke2-plan-bundle.yaml\n"
msgstr ""

#. type: delimited block -
#: asciidoc/day2/downstream-cluster-k8s.adoc:126
#, no-wrap
msgid ""
"# For K3s\n"
"kubectl apply -f k3s-plan-bundle.yaml\n"
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-k8s.adoc:127
#: asciidoc/day2/downstream-cluster-os.adoc:112
#: asciidoc/day2/downstream-cluster-suc.adoc:71
msgid "View the created *Bundle* resource under the `fleet-default` namespace:"
msgstr ""

#. type: delimited block -
#: asciidoc/day2/downstream-cluster-k8s.adoc:128
#, no-wrap
msgid ""
"# For RKE2\n"
"kubectl get bundles rke2-upgrade -n fleet-default\n"
msgstr ""

#. type: delimited block -
#: asciidoc/day2/downstream-cluster-k8s.adoc:129
#, no-wrap
msgid ""
"# For K3s\n"
"kubectl get bundles k3s-upgrade -n fleet-default\n"
msgstr ""

#. type: delimited block -
#: asciidoc/day2/downstream-cluster-k8s.adoc:130
#, no-wrap
msgid ""
"# Example output\n"
"NAME           BUNDLEDEPLOYMENTS-READY   STATUS\n"
"k3s-upgrade    0/0                       \n"
"rke2-upgrade   0/0                       \n"
msgstr ""

#. type: Title ====
#: asciidoc/day2/downstream-cluster-k8s.adoc:131
#: asciidoc/day2/downstream-cluster-os.adoc:115
#, no-wrap
msgid "SUC Plan deployment - third-party GitOps workflow"
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-k8s.adoc:132
msgid ""
"There might be use-cases where users would like to incorporate the "
"Kubernetes upgrade resources to their own third-party GitOps workflow "
"(e.g. `Flux`)."
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-k8s.adoc:133
msgid ""
"To get the upgrade resources that you need, first determine the he Edge "
"link:https://github.com/suse-edge/fleet-examples/releases[release] tag of "
"the "
"link:https://github.com/suse-edge/fleet-examples.git[suse-edge/fleet-examples] "
"repository that you would like to use."
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-k8s.adoc:134
msgid "After that, the resources can be found at:"
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-k8s.adoc:135
msgid "For a RKE2 cluster upgrade:"
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-k8s.adoc:136
msgid ""
"For `control-plane` nodes - "
"`fleets/day2/system-upgrade-controller-plans/rke2-upgrade/plan-control-plane.yaml`"
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-k8s.adoc:137
msgid ""
"For `agent` nodes - "
"`fleets/day2/system-upgrade-controller-plans/rke2-upgrade/plan-agent.yaml`"
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-k8s.adoc:138
msgid "For a K3s cluster upgrade:"
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-k8s.adoc:139
msgid ""
"For `control-plane` nodes - "
"`fleets/day2/system-upgrade-controller-plans/k3s-upgrade/plan-control-plane.yaml`"
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-k8s.adoc:140
msgid ""
"For `agent` nodes - "
"`fleets/day2/system-upgrade-controller-plans/k3s-upgrade/plan-agent.yaml`"
msgstr ""

#. type: delimited block =
#: asciidoc/day2/downstream-cluster-k8s.adoc:141
#: asciidoc/day2/downstream-cluster-os.adoc:122
msgid ""
"These `Plan` resources are interpreted by the `system-upgrade-controller` "
"and should be deployed on each downstream cluster that you wish to "
"upgrade. For information on how to deploy the `system-upgrade-controller`, "
"see <<day2-suc-third-party-gitops>>."
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-k8s.adoc:142
msgid ""
"To better understand how your GitOps workflow can be used to deploy the *SUC "
"Plans* for Kubernetes version upgrade, it can be beneficial to take a look "
"at the <<k8s-version-upgrade-overview,overview>> of the update procedure "
"using `Fleet`."
msgstr ""

#. type: Title ==
#: asciidoc/day2/downstream-cluster-os.adoc:1
#, no-wrap
msgid "OS package update"
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-os.adoc:3
msgid ""
"This section covers the custom components that the `OS package update` "
"process uses over the default `Day 2` <<day2-downstream-components, "
"components>>."
msgstr ""

#. type: Title ====
#: asciidoc/day2/downstream-cluster-os.adoc:4
#, no-wrap
msgid "edge-update.service"
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-os.adoc:5
msgid ""
"Systemd service responsible for performing the `OS package update`. Uses the "
"link:https://kubic.opensuse.org/documentation/man-pages/transactional-update.8.html[transactional-update] "
"command to perform a "
"link:https://en.opensuse.org/SDB:Zypper_usage#Distribution_upgrade[distribution "
"upgrade] (`dup`)."
msgstr ""

#. type: delimited block =
#: asciidoc/day2/downstream-cluster-os.adoc:6
msgid ""
"If you wish to use a "
"link:https://en.opensuse.org/SDB:Zypper_usage#Updating_packages[normal "
"upgrade] method, create a `edge-update.conf` file under `/etc/edge/` on each "
"node. Inside this file, add the `UPDATE_METHOD=up` variable."
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-os.adoc:7
msgid ""
"Shipped through a *SUC plan*, which should be located on each *downstream "
"cluster* that is in need of a OS package update."
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-os.adoc:9
msgid "_General:_"
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-os.adoc:10
msgid ""
"*SCC registered machine* - All downstream cluster nodes should be registered "
"to `https://scc.suse.com/`. This is needed so that the `edge-update.service` "
"can successfully connect to the needed OS RPM repositories."
msgstr ""

#. type: delimited block =
#: asciidoc/day2/downstream-cluster-os.adoc:15
msgid ""
"Any additional tolerations must be added under the `.spec.tolerations` "
"section of each Plan. *SUC Plans* related to the OS package update can be "
"found in the "
"link:https://github.com/suse-edge/fleet-examples[suse-edge/fleet-examples] "
"repository under "
"`fleets/day2/system-upgrade-controller-plans/os-pkg-update`. *Make sure you "
"use the Plans from a valid repository "
"link:https://github.com/suse-edge/fleet-examples/releases[release] tag.*"
msgstr ""

#. type: delimited block =
#: asciidoc/day2/downstream-cluster-os.adoc:16
msgid ""
"An example of defining custom tolerations for the *control-plane* SUC Plan, "
"would look like this:"
msgstr ""

#. type: delimited block -
#: asciidoc/day2/downstream-cluster-os.adoc:17
#, no-wrap
msgid ""
"apiVersion: upgrade.cattle.io/v1\n"
"kind: Plan\n"
"metadata:\n"
"  name: os-pkg-plan-control-plane\n"
"spec:\n"
"  ...\n"
"  tolerations:\n"
"  # default tolerations\n"
"  - key: \"CriticalAddonsOnly\"\n"
"    operator: \"Equal\"\n"
"    value: \"true\"\n"
"    effect: \"NoExecute\"\n"
"  - key: \"node-role.kubernetes.io/control-plane\"\n"
"    operator: \"Equal\"\n"
"    effect: \"NoSchedule\"\n"
"  - key: \"node-role.kubernetes.io/etcd\"\n"
"    operator: \"Equal\"\n"
"    effect: \"NoExecute\"\n"
"  # custom toleration\n"
"  - key: \"foo\"\n"
"    operator: \"Equal\"\n"
"    value: \"bar\"\n"
"    effect: \"NoSchedule\"\n"
"...\n"
msgstr ""

#. type: delimited block =
#: asciidoc/day2/downstream-cluster-os.adoc:18
msgid "_Air-gapped:_"
msgstr ""

#. type: delimited block =
#: asciidoc/day2/downstream-cluster-os.adoc:19
msgid ""
"*Mirror SUSE RPM repositories* - OS RPM repositories should be locally "
"mirrored so that `edge-update.service` can have access to them. This can be "
"achieved using link:https://github.com/SUSE/rmt[RMT]."
msgstr ""

#. type: Title ===
#: asciidoc/day2/downstream-cluster-os.adoc:20
#, no-wrap
msgid "Update procedure"
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-os.adoc:21
msgid ""
"This section assumes you will be deploying the `OS package update` *SUC "
"Plan* using <<components-fleet,Fleet>>. If you intend to deploy the *SUC "
"Plan* using a different approach, refer to "
"<<os-pkg-suc-plan-deployment-third-party>>."
msgstr ""

#. type: delimited block =
#: asciidoc/day2/downstream-cluster-os.adoc:22
msgid ""
"The `OS package update procedure` revolves around deploying *SUC Plans* to "
"downstream clusters. These plans then hold information about how and on "
"which nodes to deploy the `edge-update.service` systemd.service. For "
"information regarding the structure of a *SUC Plan*, refer to the "
"https://github.com/rancher/system-upgrade-controller?tab=readme-ov-file#example-plans[upstream] "
"documentation."
msgstr ""

#. type: delimited block =
#: asciidoc/day2/downstream-cluster-os.adoc:23
msgid "`OS package update` SUC Plans are shipped in the following ways:"
msgstr ""

#. type: delimited block =
#: asciidoc/day2/downstream-cluster-os.adoc:24
msgid "Through a `GitRepo` resources - <<os-pkg-suc-plan-deployment-git-repo>>"
msgstr ""

#. type: delimited block =
#: asciidoc/day2/downstream-cluster-os.adoc:25
msgid "Through a `Bundle` resource - <<os-pkg-suc-plan-deployment-bundle>>"
msgstr ""

#. type: delimited block =
#: asciidoc/day2/downstream-cluster-os.adoc:27
msgid ""
"For a full overview of what happens during the _update procedure_, refer to "
"the <<os-pkg-update-overview>> section."
msgstr ""

#. type: delimited block =
#: asciidoc/day2/downstream-cluster-os.adoc:29
msgid ""
"This section aims to describe the full workflow that the *_OS package update "
"process_* goes throught from start to finish."
msgstr ""

#. type: Block title
#: asciidoc/day2/downstream-cluster-os.adoc:30
#, no-wrap
msgid "OS package update workflow"
msgstr ""

#. type: Target for macro image
#: asciidoc/day2/downstream-cluster-os.adoc:31
#, no-wrap
msgid "day2_os_pkg_update_diagram.png"
msgstr ""

#. type: delimited block =
#: asciidoc/day2/downstream-cluster-os.adoc:32
msgid "OS pacakge update steps:"
msgstr ""

#. type: delimited block =
#: asciidoc/day2/downstream-cluster-os.adoc:33
msgid ""
"Based on his use-case, the user determines whether to use a *GitRepo* or a "
"*Bundle* resource for the deployment of the `OS package update SUC Plans` to "
"the desired downstream clusters. For information on how to map a "
"*GitRepo/Bundle* to a specific set of downstream clusters, see "
"https://fleet.rancher.io/gitrepo-targets[Mapping to Downstream Clusters]."
msgstr ""

#. type: delimited block =
#: asciidoc/day2/downstream-cluster-os.adoc:35
msgid ""
"For *GitRepo/Bundle* configuration options, refer to "
"<<os-pkg-suc-plan-deployment-git-repo>> or "
"<<os-pkg-suc-plan-deployment-bundle>>."
msgstr ""

#. type: delimited block =
#: asciidoc/day2/downstream-cluster-os.adoc:39
msgid ""
"`Fleet` then proceeds to deploy the `Kubernetes resources` from this "
"*Bundle* to all the targeted `downstream clusters`. In the context of `OS "
"package updates`, Fleet deploys the following resources from the *Bundle*:"
msgstr ""

#. type: delimited block =
#: asciidoc/day2/downstream-cluster-os.adoc:40
msgid ""
"`os-pkg-plan-agent` *SUC Plan* - instructs *SUC* on how to do a package "
"update on cluster *_agent_* nodes. Will *not* be interpreted if the cluster "
"consists only from _control-plane_ nodes."
msgstr ""

#. type: delimited block =
#: asciidoc/day2/downstream-cluster-os.adoc:41
msgid ""
"`os-pkg-plan-control-plane` *SUC Plan* - instructs *SUC* on how to do a "
"package update on cluster *_control-plane_* nodes."
msgstr ""

#. type: delimited block =
#: asciidoc/day2/downstream-cluster-os.adoc:42
msgid ""
"`os-pkg-update` *Secret* - referenced in each *SUC Plan*; ships an "
"`update.sh` script responsible for creating the `edge-update.service` "
"*_sustemd.service_* which will do the actual package update."
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-os.adoc:43
msgid ""
"The above resources will be deployed in the `cattle-system` namespace of "
"each downstream cluster."
msgstr ""

#. type: delimited block =
#: asciidoc/day2/downstream-cluster-os.adoc:45
msgid ""
"The *Update Pod* (deployed on each node) *mounts* the `os-pkg-update` Secret "
"and *executes* the `update.sh` script that the Secret ships."
msgstr ""

#. type: delimited block =
#: asciidoc/day2/downstream-cluster-os.adoc:46
msgid "The `update.sh` proceeds to do the following:"
msgstr ""

#. type: delimited block =
#: asciidoc/day2/downstream-cluster-os.adoc:47
msgid ""
"Create the `edge-update.service` - the service created will be of type "
"*oneshot* and will adopt the following workflow:"
msgstr ""

#. type: delimited block =
#: asciidoc/day2/downstream-cluster-os.adoc:48
msgid "Update all package versions on the node OS, by executing:"
msgstr ""

#. type: delimited block -
#: asciidoc/day2/downstream-cluster-os.adoc:49
#, no-wrap
msgid "transactional-update cleanup dup\n"
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-os.adoc:50
msgid ""
"After a successful `transactional-update`, shedule a system *reboot* so that "
"the package version updates can take effect"
msgstr ""

#. type: delimited block =
#: asciidoc/day2/downstream-cluster-os.adoc:51
msgid ""
"System reboot will be scheduled for *1 minute* after a successful "
"`transactional-update` execution."
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-os.adoc:52
msgid "Start the `edge-update.service` and wait for it to complete"
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-os.adoc:53
msgid ""
"Cleanup the `edge-update.service` - after the *_systemd.service_* has done "
"its job, it is removed from the system in order to ensure that no accidental "
"executions/reboots happen in the future."
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-os.adoc:54
msgid ""
"The OS package update procedure finishes with the *_system reboot_*. After "
"the reboot all OS package versions should be updated to their respective "
"latest version as seen in the available OS RPM repositories."
msgstr ""

#. type: Title ===
#: asciidoc/day2/downstream-cluster-os.adoc:55
#, no-wrap
msgid "OS package update - SUC Plan deployment"
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-os.adoc:56
msgid ""
"This section describes how to orchestrate the deployment of *SUC Plans* "
"related OS package updates using Fleet's *GitRepo* and *Bundle* resources."
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-os.adoc:58
msgid ""
"A *GitRepo* resource, that ships the needed `OS package update` *SUC Plans*, "
"can be deployed in one of the following ways:"
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-os.adoc:59
msgid ""
"Through the `Rancher UI` - <<os-pkg-suc-plan-deployment-git-repo-rancher>> "
"(when `Rancher` is available)."
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-os.adoc:60
msgid ""
"By <<os-pkg-suc-plan-deployment-git-repo-manual, manually deploying>> the "
"resource to your `management cluster`."
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-os.adoc:61
#: asciidoc/day2/downstream-cluster-os.adoc:89
msgid ""
"Once deployed, to monitor the OS package update process of the nodes of your "
"targeted cluster, refer to the <<monitor-suc-plans>> documentation."
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-os.adoc:68
msgid ""
"Under *Paths* add the path to the OS package update Fleets that you wish to "
"use - `fleets/day2/system-upgrade-controller-plans/os-pkg-update`"
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-os.adoc:69
msgid ""
"Select *Next* to move to the *target* configuration section. *Only select "
"clusters whose node's packages you wish to upgrade*"
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-os.adoc:73
msgid ""
"Choose the desired Edge "
"link:https://github.com/suse-edge/fleet-examples/releases[release] tag that "
"you wish to apply the OS *SUC update Plans* from (referenced below as "
"`$\\{REVISION\\}`)."
msgstr ""

#. type: delimited block -
#: asciidoc/day2/downstream-cluster-os.adoc:75
#, no-wrap
msgid ""
"curl -o os-pkg-update-gitrepo.yaml "
"https://raw.githubusercontent.com/suse-edge/fleet-examples/${REVISION}/gitrepos/day2/os-pkg-update-gitrepo.yaml\n"
msgstr ""

#. type: delimited block -
#: asciidoc/day2/downstream-cluster-os.adoc:81
#, no-wrap
msgid "kubectl apply -f os-pkg-update-gitrepo.yaml\n"
msgstr ""

#. type: delimited block -
#: asciidoc/day2/downstream-cluster-os.adoc:83
#, no-wrap
msgid "kubectl get gitrepo os-pkg-update -n fleet-default\n"
msgstr ""

#. type: delimited block -
#: asciidoc/day2/downstream-cluster-os.adoc:84
#, no-wrap
msgid ""
"# Example output\n"
"NAME            REPO                                              COMMIT         "
"BUNDLEDEPLOYMENTS-READY   STATUS\n"
"os-pkg-update   https://github.com/suse-edge/fleet-examples.git   "
"release-3.0.1  0/0                       \n"
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-os.adoc:86
msgid ""
"A *Bundle* resource, that ships the needed `OS package update` *SUC Plans*, "
"can be deployed in one of the following ways:"
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-os.adoc:87
msgid ""
"Through the `Rancher UI` - <<os-pkg-suc-plan-deployment-bundle-rancher>> "
"(when `Rancher` is available)."
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-os.adoc:88
msgid ""
"By <<os-pkg-suc-plan-deployment-bundle-manual, manually deploying>> the "
"resource to your `management cluster`."
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-os.adoc:95
msgid ""
"By manually copying the *Bundle* content to the *Create from YAML* "
"page. Content can be retrieved from "
"https://raw.githubusercontent.com/suse-edge/fleet-examples/$\\{REVISION\\}/bundles/day2/system-upgrade-controller-plans/os-pkg-update/pkg-update-bundle.yaml, "
"where `$\\{REVISION\\}` is the Edge "
"link:https://github.com/suse-edge/fleet-examples/releases[release] that you "
"are using"
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-os.adoc:96
msgid ""
"By cloning the "
"link:https://github.com/suse-edge/fleet-examples.git[suse-edge/fleet-examples] "
"repository to the desired "
"link:https://github.com/suse-edge/fleet-examples/releases[release] tag and "
"selecting the *Read from File* option in the *Create from YAML* page. From "
"there, navigate to "
"`bundles/day2/system-upgrade-controller-plans/os-pkg-update` directory and "
"select `pkg-update-bundle.yaml`. This will auto-populate the *Create from "
"YAML* page with the Bundle content."
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-os.adoc:101
msgid "Select *Create*"
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-os.adoc:103
msgid ""
"Choose the desired Edge "
"link:https://github.com/suse-edge/fleet-examples/releases[release] tag that "
"you wish to apply the OS package update *SUC Plans* from (referenced below "
"as `$\\{REVISION\\}`)."
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-os.adoc:104
#: asciidoc/day2/downstream-cluster-suc.adoc:63
msgid "Pull the *Bundle* resource:"
msgstr ""

#. type: delimited block -
#: asciidoc/day2/downstream-cluster-os.adoc:105
#, no-wrap
msgid ""
"curl -o pkg-update-bundle.yaml "
"https://raw.githubusercontent.com/suse-edge/fleet-examples/${REVISION}/bundles/day2/system-upgrade-controller-plans/os-pkg-update/pkg-update-bundle.yaml\n"
msgstr ""

#. type: delimited block -
#: asciidoc/day2/downstream-cluster-os.adoc:111
#, no-wrap
msgid "kubectl apply -f pkg-update-bundle.yaml\n"
msgstr ""

#. type: delimited block -
#: asciidoc/day2/downstream-cluster-os.adoc:113
#, no-wrap
msgid "kubectl get bundles os-pkg-update -n fleet-default\n"
msgstr ""

#. type: delimited block -
#: asciidoc/day2/downstream-cluster-os.adoc:114
#, no-wrap
msgid ""
"# Example output\n"
"NAME            BUNDLEDEPLOYMENTS-READY   STATUS\n"
"os-pkg-update   0/0                       \n"
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-os.adoc:116
msgid ""
"There might be use-cases where users would like to incorporate the OS "
"package update *SUC Plans* to their own third-party GitOps workflow "
"(e.g. `Flux`)."
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-os.adoc:117
msgid ""
"To get the OS package update resources that you need, first determine the "
"Edge link:https://github.com/suse-edge/fleet-examples/releases[release] tag "
"of the "
"link:https://github.com/suse-edge/fleet-examples.git[suse-edge/fleet-examples] "
"repository that you would like to use."
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-os.adoc:118
msgid ""
"After that, resources can be found at "
"`fleets/day2/system-upgrade-controller-plans/os-pkg-update`, where:"
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-os.adoc:119
msgid ""
"`plan-control-plane.yaml` - `system-upgrade-controller` Plan resource for "
"*control-plane* nodes"
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-os.adoc:120
msgid ""
"`plan-agent.yaml` - `system-upgrade-controller` Plan resource for *agent* "
"nodes"
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-os.adoc:121
msgid ""
"`secret.yaml` - secret that ships a script that creates the "
"`edge-update.service` "
"link:https://www.freedesktop.org/software/systemd/man/latest/systemd.service.html[systemd.service]"
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-os.adoc:123
msgid ""
"To better understand how your GitOps workflow can be used to deploy the *SUC "
"Plans* for OS package update, it can be beneficial to take a look at the "
"<<os-pkg-update-overview,overview>> of the update procedure using `Fleet`."
msgstr ""

#. type: Title ==
#: asciidoc/day2/downstream-cluster-suc.adoc:1
#, no-wrap
msgid "System upgrade controller deployment guide"
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-suc.adoc:2
msgid ""
"The *system-upgrade-controller (SUC)* is responsible for deploying resources "
"on specific nodes of a cluster based on configurations defined in a custom "
"resource called a *Plan*. For more information, see the "
"link:https://github.com/rancher/system-upgrade-controller[upstream] "
"documentation."
msgstr ""

#. type: delimited block =
#: asciidoc/day2/downstream-cluster-suc.adoc:3
msgid ""
"This section focuses solely on deploying the "
"`system-upgrade-controller`. *Plan* resources should be deployed from the "
"following documentations:"
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-suc.adoc:4
#: asciidoc/day2/downstream-clusters-introduction.adoc:39
msgid "<<day2-os-package-update, OS package update>>"
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-suc.adoc:5
#: asciidoc/day2/downstream-clusters-introduction.adoc:40
msgid "<<day2-k8s-upgrade, Kubernetes version upgrade>>"
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-suc.adoc:6
#: asciidoc/day2/downstream-clusters-introduction.adoc:41
msgid "<<day2-helm-upgrade, Helm chart upgrade>>"
msgstr ""

#. type: Title ===
#: asciidoc/day2/downstream-cluster-suc.adoc:7
#, no-wrap
msgid "Deployment"
msgstr ""

#. type: delimited block =
#: asciidoc/day2/downstream-cluster-suc.adoc:8
msgid ""
"This section assumes that you are going to use <<components-fleet,Fleet>> to "
"orchestrate the *SUC* deployment. Users using a third-party GitOps workflow "
"should see <<day2-suc-third-party-gitops>> for information on what resources "
"they need to setup in their workflow."
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-suc.adoc:9
msgid "To determine the resource to use, refer to <<day2-determine-use-case>>."
msgstr ""

#. type: Title ====
#: asciidoc/day2/downstream-cluster-suc.adoc:10
#, no-wrap
msgid "SUC deployment using a GitRepo resource"
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-suc.adoc:11
msgid ""
"This section covers how to create a `GitRepo` resource that will ship the "
"needed `SUC Plans` for a successful *SUC* deployment to your *target* "
"downstream clusters."
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-suc.adoc:12
msgid ""
"The Edge team maintains a ready to use `GitRepo` resource for *SUC* in each "
"of our `suse-edge/fleet-examples` "
"link:https://github.com/suse-edge/fleet-examples/releases[releases] under "
"`gitrepos/day2/system-upgrade-controller-gitrepo.yaml`."
msgstr ""

#. type: delimited block =
#: asciidoc/day2/downstream-cluster-suc.adoc:13
#: asciidoc/day2/downstream-cluster-suc.adoc:44
msgid ""
"If using the `suse-edge/fleet-examples` repository, make sure you are using "
"the resources from a dedicated "
"link:https://github.com/suse-edge/fleet-examples/releases[release] tag."
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-suc.adoc:14
msgid "`GitRepo` creation can be done in one of of the following ways:"
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-suc.adoc:15
msgid ""
"Through the <<day2-suc-dep-gitrepo-rancher,Rancher UI>> (when `Rancher` is "
"available)"
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-suc.adoc:16
msgid ""
"By <<day2-suc-dep-gitrepo-manual, manually deploying>> the resources to your "
"`management cluster`"
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-suc.adoc:17
msgid ""
"Once created, `Fleet` will be responsible for picking up the resource and "
"deploying the *SUC* resources to all your *target* clusters. For information "
"on how to track the deployment process, see <<monitor-suc-deployment>>."
msgstr ""

#. type: Title =====
#: asciidoc/day2/downstream-cluster-suc.adoc:18
#, no-wrap
msgid "GitRepo deployment - Rancher UI"
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-suc.adoc:23
msgid ""
"*Watch -> Revision* - choose a "
"link:https://github.com/suse-edge/fleet-examples/releases[release] tag for "
"the `suse-edge/fleet-examples` repository that you wish to use, "
"e.g. `release-3.0.1`."
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-suc.adoc:24
msgid ""
"Under *Paths* add the path to the *system-upgrade-controller* as seen in the "
"release tag - `fleets/day2/system-upgrade-controller`"
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-suc.adoc:25
msgid "Select *Next* to move to the *target* configuration section"
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-suc.adoc:26
msgid ""
"*Only select clusters for which you wish to deploy the "
"`system-upgrade-controller`.* When you are satisfied with your "
"configurations, click *Create*"
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-suc.adoc:29
msgid ""
"Choose the desired Edge "
"link:https://github.com/suse-edge/fleet-examples/releases[release] tag that "
"you wish to deploy the *SUC* `GitRepo` from (referenced below as "
"`$\\{REVISION\\}`)."
msgstr ""

#. type: delimited block -
#: asciidoc/day2/downstream-cluster-suc.adoc:31
#, no-wrap
msgid ""
"curl -o system-upgrade-controller-gitrepo.yaml "
"https://raw.githubusercontent.com/suse-edge/fleet-examples/{REVISION}/gitrepos/day2/system-upgrade-controller-gitrepo.yaml\n"
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-suc.adoc:32
msgid ""
"Edit the *GitRepo* configurations, under `spec.targets` specify your desired "
"target list. By default, the `GitRepo` resources from the "
"`suse-edge/fleet-examples` are *NOT* mapped to any down stream clusters."
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-suc.adoc:33
msgid "To match all clusters, change the default `GitRepo` *target* to:"
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-suc.adoc:35
#: asciidoc/day2/downstream-cluster-suc.adoc:68
msgid ""
"Alternatively, if you want a more granular cluster selection, see "
"link:https://fleet.rancher.io/gitrepo-targets[Mapping to Downstream "
"Clusters]"
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-suc.adoc:36
msgid "Apply the *GitRepo* resource to your `management cluster`:"
msgstr ""

#. type: delimited block -
#: asciidoc/day2/downstream-cluster-suc.adoc:37
#, no-wrap
msgid "kubectl apply -f system-upgrade-controller-gitrepo.yaml\n"
msgstr ""

#. type: delimited block -
#: asciidoc/day2/downstream-cluster-suc.adoc:39
#, no-wrap
msgid "kubectl get gitrepo system-upgrade-controller -n fleet-default\n"
msgstr ""

#. type: delimited block -
#: asciidoc/day2/downstream-cluster-suc.adoc:40
#, no-wrap
msgid ""
"# Example output\n"
"NAME                        REPO                                               "
"COMMIT       BUNDLEDEPLOYMENTS-READY   STATUS\n"
"system-upgrade-controller   https://github.com/suse-edge/fleet-examples.git   "
"release-3.0.1   0/0                       \n"
msgstr ""

#. type: Title ====
#: asciidoc/day2/downstream-cluster-suc.adoc:41
#, no-wrap
msgid "SUC deployment using a Bundle resource"
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-suc.adoc:42
msgid ""
"This section covers how to create a `Bundle` resource that will ship the "
"needed `SUC Plans` for a successful *SUC* deployment to your *target* "
"downstream clusters."
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-suc.adoc:43
msgid ""
"The Edge team maintains a ready to use `Bundle` resources for *SUC* in each "
"of our `suse-edge/fleet-examples` "
"link:https://github.com/suse-edge/fleet-examples/releases[releases] under "
"`bundles/day2/system-upgrade-controller/controller-bundle.yaml`."
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-suc.adoc:45
msgid "`Bundle` creation can be done in one of of the following ways:"
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-suc.adoc:46
msgid ""
"Through the <<day2-suc-dep-bundle-rancher,Rancher UI>> (when `Rancher` is "
"available)"
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-suc.adoc:47
msgid ""
"By <<day2-suc-dep-bundle-manual, manually deploying>> the resources to your "
"`management cluster`"
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-suc.adoc:48
msgid ""
"Once created, `Fleet` will be responsible for pickuping the resource and "
"deploying the *SUC* resources to all your *target* clusters. For information "
"on how to track the deployment process, see <<monitor-suc-deployment>>."
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-suc.adoc:54
msgid ""
"By manually copying the file content to the *Create from YAML* page. File "
"content can be retrieved from this url - "
"https://raw.githubusercontent.com/suse-edge/fleet-examples/$\\{REVISION\\}/bundles/day2/system-upgrade-controller/controller-bundle.yaml. "
"Where `$\\{REVISION\\}` is the Edge "
"link:https://github.com/suse-edge/fleet-examples/releases[release] tag that "
"you desire (e.g. `release-3.0.1`)."
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-suc.adoc:55
msgid ""
"By cloning the `suse-edge/fleet-examples` repository to the desired "
"link:https://github.com/suse-edge/fleet-examples/releases[release] tag and "
"selecting the *Read from File* option in the *Create from YAML* page. From "
"there, navigate to `bundles/day2/system-upgrade-controller` directory and "
"select `controller-bundle.yaml`. This will auto-populate the *Create from "
"YAML* page with the Bundle content."
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-suc.adoc:62
msgid ""
"Choose the desired Edge "
"link:https://github.com/suse-edge/fleet-examples/releases[release] tag that "
"you wish to deploy the *SUC* `Bundle` from (referenced below as "
"`$\\{REVISION\\}`)."
msgstr ""

#. type: delimited block -
#: asciidoc/day2/downstream-cluster-suc.adoc:64
#, no-wrap
msgid ""
"curl -o controller-bundle.yaml "
"https://raw.githubusercontent.com/suse-edge/fleet-examples/${REVISION}/bundles/day2/system-upgrade-controller/controller-bundle.yaml\n"
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-suc.adoc:69
msgid "Apply the *Bundle* resource to your `management cluster`:"
msgstr ""

#. type: delimited block -
#: asciidoc/day2/downstream-cluster-suc.adoc:70
#, no-wrap
msgid "kubectl apply -f controller-bundle.yaml \n"
msgstr ""

#. type: delimited block -
#: asciidoc/day2/downstream-cluster-suc.adoc:72
#, no-wrap
msgid "kubectl get bundles system-upgrade-controller -n fleet-default\n"
msgstr ""

#. type: delimited block -
#: asciidoc/day2/downstream-cluster-suc.adoc:73
#, no-wrap
msgid ""
"# Example output\n"
"NAME                        BUNDLEDEPLOYMENTS-READY   STATUS\n"
"system-upgrade-controller   0/0                       \n"
msgstr ""

#. type: Title ====
#: asciidoc/day2/downstream-cluster-suc.adoc:74
#, no-wrap
msgid "Deploying system-upgrade-controller when using a third-party GitOps workflow"
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-suc.adoc:75
msgid ""
"To deploy the `system-upgrade-controller` using a third-party GitOps tool, "
"depending on the tool, you might need information for the "
"`system-upgrade-controller` Helm chart or Kubernetes resoruces, or both."
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-suc.adoc:76
msgid ""
"Choose a specific Edge "
"link:https://github.com/suse-edge/fleet-examples/releases[release] from "
"which you wish to use the *SUC* from."
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-suc.adoc:77
msgid ""
"From there, the *SUC* Helm chart data can be found under the `helm` "
"configuration section of the "
"`fleets/day2/system-upgrade-controller/fleet.ymal` file."
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-suc.adoc:78
msgid ""
"The *SUC* Kubernetes resources can be found under the *SUC* `Bundle` "
"configuration under `.spec.resources.content`. The location for the bundle "
"is `bundles/day2/system-upgrade-controller/controller-bundle.yaml`."
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-suc.adoc:79
msgid ""
"Use the above mentioned resoruces to populate the data that your third-party "
"GitOps workflow needs in order to deploy *SUC*."
msgstr ""

#. type: Title ===
#: asciidoc/day2/downstream-cluster-suc.adoc:80
#, no-wrap
msgid "Monitor SUC resources using Rancher"
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-suc.adoc:81
msgid ""
"This section covers how to monitor the lifecycle of the *SUC* deployment and "
"any deployed *SUC* Plans using the Rancher UI."
msgstr ""

#. type: Title ====
#: asciidoc/day2/downstream-cluster-suc.adoc:82
#, no-wrap
msgid "Monitor SUC deployment"
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-suc.adoc:83
msgid "To check the *SUC* pod logs for a specific cluster:"
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-suc.adoc:84
#: asciidoc/day2/downstream-cluster-suc.adoc:96
msgid "In the upper left corner, *☰ -> <your-cluster-name>*"
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-suc.adoc:85
#: asciidoc/day2/downstream-cluster-suc.adoc:97
msgid "Select *Workloads -> Pods*"
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-suc.adoc:86
#: asciidoc/day2/downstream-cluster-suc.adoc:98
msgid "Under the namespace drop down menu select the `cattle-system` namespace"
msgstr ""

#. type: Target for macro image
#: asciidoc/day2/downstream-cluster-suc.adoc:87
#: asciidoc/day2/downstream-cluster-suc.adoc:99
#, no-wrap
msgid "day2-monitor-suc-deployment-1.png"
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-suc.adoc:88
msgid "In the Pod filter bar, write the *SUC* name - `system-upgrade-controller`"
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-suc.adoc:89
msgid "On the right of the pod select *⋮ -> View Logs*"
msgstr ""

#. type: Target for macro image
#: asciidoc/day2/downstream-cluster-suc.adoc:90
#, no-wrap
msgid "day2-monitor-suc-deployment-2.png"
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-suc.adoc:91
msgid "The *SUC* logs should looks something similar to:"
msgstr ""

#. type: Target for macro image
#: asciidoc/day2/downstream-cluster-suc.adoc:92
#, no-wrap
msgid "day2-monitor-suc-deployment-3.png"
msgstr ""

#. type: Title ====
#: asciidoc/day2/downstream-cluster-suc.adoc:93
#, no-wrap
msgid "Monitor SUC Plans"
msgstr ""

#. type: delimited block =
#: asciidoc/day2/downstream-cluster-suc.adoc:94
msgid ""
"The *SUC Plan* Pods are kept alive for *15* minutes. After that they are "
"removed by the corresponding Job that created them. To have access to the "
"*SUC Plan* Pod logs, you should enable logging for your cluster. For "
"information on how to do this in Rancher, see "
"link:https://ranchermanager.docs.rancher.com/v2.8/integrations-in-rancher/logging[Rancher "
"Integration with Logging Services]."
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-suc.adoc:95
msgid "To check *Pod* logs for the specific *SUC* plan:"
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-suc.adoc:100
msgid ""
"In the Pod filter bar, write the name for your *SUC Plan* Pod. The name will "
"be in the following template format: `apply-<plan_name>-on-<node_name>`"
msgstr ""

#. type: Block title
#: asciidoc/day2/downstream-cluster-suc.adoc:101
#, no-wrap
msgid "Example Kubernetes upgrade plan pods"
msgstr ""

#. type: Target for macro image
#: asciidoc/day2/downstream-cluster-suc.adoc:102
#, no-wrap
msgid "day2-k8s-plan-monitor.png"
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-suc.adoc:103
msgid ""
"Note how in _Figure 1_, we have one Pod in *Completed* and one in *Unknown* "
"state. This is expected and has happened due to the Kubernetes version "
"upgrade on the node."
msgstr ""

#. type: Block title
#: asciidoc/day2/downstream-cluster-suc.adoc:104
#, no-wrap
msgid "Example OS pacakge update plan pods"
msgstr ""

#. type: Target for macro image
#: asciidoc/day2/downstream-cluster-suc.adoc:105
#, no-wrap
msgid "day2-os-pkg-plan-monitor.png"
msgstr ""

#. type: Block title
#: asciidoc/day2/downstream-cluster-suc.adoc:106
#, no-wrap
msgid "Example of upgrade plan pods for EIB deployed Helm charts on an HA cluster"
msgstr ""

#. type: Target for macro image
#: asciidoc/day2/downstream-cluster-suc.adoc:107
#, no-wrap
msgid "day2_chart_upgrade_plan_monitor.png"
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-cluster-suc.adoc:108
msgid ""
"Select the pod that you want to review the logs of and navigate to *⋮ -> "
"View Logs*"
msgstr ""

#. type: Title ==
#: asciidoc/day2/downstream-clusters-introduction.adoc:1
#, no-wrap
msgid "Introduction"
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-clusters-introduction.adoc:2
msgid ""
"This section is meant to be a *starting point* for the `Day 2` operations "
"documentation. You can find the following information."
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-clusters-introduction.adoc:3
msgid ""
"The default <<day2-downstream-components, components>> used to achieve `Day "
"2` operations over multiple downstream clusters."
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-clusters-introduction.adoc:4
msgid ""
"Determining which `Day 2` resources should you use for your specific "
"<<day2-determine-use-case, use-case>>."
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-clusters-introduction.adoc:5
msgid ""
"The suggested workflow <<day2-upgrade-workflow,sequence>> for `Day 2` "
"operations."
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-clusters-introduction.adoc:7
msgid ""
"Below you can find a description of the default components that should be "
"setup on either your `management cluster` or your `downstream clusters` so "
"that you can successfully perform `Day 2` operations."
msgstr ""

#. type: Title =====
#: asciidoc/day2/downstream-clusters-introduction.adoc:8
#: asciidoc/day2/mgmt-cluster.adoc:137
#, no-wrap
msgid "Rancher"
msgstr ""

#. type: delimited block =
#: asciidoc/day2/downstream-clusters-introduction.adoc:9
msgid ""
"For use-cases where you want to utilise <<components-fleet,Fleet>> without "
"Rancher, you can skip the Rancher component all together."
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-clusters-introduction.adoc:10
msgid ""
"Responsible for the management of your `downstream clusters`. Should be "
"deployed on your `management cluster`."
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-clusters-introduction.adoc:11
msgid "For more information, see <<components-rancher>>."
msgstr ""

#. type: Title ====
#: asciidoc/day2/downstream-clusters-introduction.adoc:12
#, no-wrap
msgid "Fleet"
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-clusters-introduction.adoc:13
msgid "Responsible for multi-cluster resource deployment."
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-clusters-introduction.adoc:14
msgid ""
"Typically offered by the `Rancher` component. For use-cases where `Rancher` "
"is not used, can be deployed as a standalone component."
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-clusters-introduction.adoc:15
msgid ""
"For more information on installing Fleet as a standalone component, see "
"Fleet's link:https://fleet.rancher.io/installation[Installation Details]."
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-clusters-introduction.adoc:16
msgid ""
"For more information regarding the Fleet component, see "
"<<components-fleet>>."
msgstr ""

#. type: delimited block =
#: asciidoc/day2/downstream-clusters-introduction.adoc:17
msgid ""
"This documentation heavily relies on `Fleet` and more specifically on the "
"`GitRepo` and `Bundle` resources (more on this in "
"<<day2-determine-use-case>>) for establishing a GitOps way of automating the "
"deployment of resources related to `Day 2` operations."
msgstr ""

#. type: delimited block =
#: asciidoc/day2/downstream-clusters-introduction.adoc:18
msgid "For use-cases, where a third party GitOps tool usage is desired, see:"
msgstr ""

#. type: delimited block =
#: asciidoc/day2/downstream-clusters-introduction.adoc:19
msgid "For `OS package updates` - <<os-pkg-suc-plan-deployment-third-party>>"
msgstr ""

#. type: delimited block =
#: asciidoc/day2/downstream-clusters-introduction.adoc:20
msgid ""
"For `Kubernetes distribution upgrades` - "
"<<k8s-upgrade-suc-plan-deployment-third-party>>"
msgstr ""

#. type: delimited block =
#: asciidoc/day2/downstream-clusters-introduction.adoc:21
msgid ""
"For `Helm chart upgrades` - retrieve the chart version supported by the "
"desired Edge release from the <<release-notes>> page and populate the chart "
"version and URL in your third party GitOps tool"
msgstr ""

#. type: Title ====
#: asciidoc/day2/downstream-clusters-introduction.adoc:22
#, no-wrap
msgid "System-upgrade-controller (SUC)"
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-clusters-introduction.adoc:23
msgid ""
"The *system-upgrade-controller (SUC)* is responsible for executing tasks on "
"specified nodes based on configuration data provided through a custom "
"resource, called a `Plan`. Should be located on each `downstream cluster` "
"that requires some sort of a `Day 2` operation."
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-clusters-introduction.adoc:24
msgid ""
"For more information regarding *SUC*, see the upstream "
"link:https://github.com/rancher/system-upgrade-controller[repository]."
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-clusters-introduction.adoc:25
msgid ""
"For information on how to deploy *SUC* on your downstream clusters, first "
"<<day2-determine-use-case, determine your use-case>> and then refer to "
"either <<day2-suc-dep-gitrepo>>, or <<day2-suc-dep-bundle>> for SUC "
"deployment information."
msgstr ""

#. type: Title ===
#: asciidoc/day2/downstream-clusters-introduction.adoc:26
#, no-wrap
msgid "Determine your use-case"
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-clusters-introduction.adoc:27
msgid ""
"As mentioned previously, resources related to `Day 2` operations are "
"propagated to downstream clusters using Fleet's `GitRepo` and `Bundle` "
"resources."
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-clusters-introduction.adoc:28
msgid ""
"Below you can find more information regarding what these resources do and "
"for which use-cases should they be used for `Day 2` operations."
msgstr ""

#. type: Title ====
#: asciidoc/day2/downstream-clusters-introduction.adoc:29
#, no-wrap
msgid "GitRepo"
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-clusters-introduction.adoc:30
msgid ""
"A `GitRepo` is a <<components-fleet, Fleet>> resource that represents a Git "
"repository from which `Fleet` can create `Bundles`. Each `Bundle` is created "
"based on configuration paths defined inside of the `GitRepo` resource. For "
"more information, see the https://fleet.rancher.io/gitrepo-add[GitRepo] "
"documentation."
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-clusters-introduction.adoc:31
msgid ""
"In terms of `Day 2` operations `GitRepo` resources are normally used to "
"deploy `SUC` or `SUC Plans` on *non air-gapped* environments that utilise a "
"_Fleet GitOps_ approach."
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-clusters-introduction.adoc:32
msgid ""
"Alternatively, `GitRepo` resources can also be used to deploy `SUC` or `SUC "
"Plans` on *air-gapped* environments, *if you mirror your repository setup "
"through a local git server*."
msgstr ""

#. type: Title ====
#: asciidoc/day2/downstream-clusters-introduction.adoc:33
#, no-wrap
msgid "Bundle"
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-clusters-introduction.adoc:34
msgid ""
"`Bundles` hold *raw* Kubernetes resources that will be deployed on the "
"targeted cluster. Usually they are created from a `GitRepo` resource, but "
"there are use-cases where they can be deployed manually. For more "
"information refer to the https://fleet.rancher.io/bundle-add[Bundle] "
"documentation."
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-clusters-introduction.adoc:35
msgid ""
"In terms of `Day 2` operations `Bundle` resources are normally used to "
"deploy `SUC` or `SUC Plans` on *air-gapped* environments that do not use "
"some form of _local GitOps_ procedure (e.g. a *local git server*)."
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-clusters-introduction.adoc:36
msgid ""
"Alternatively, if your use-case does not allow for a _GitOps_ workflow "
"(e.g. using a Git repository), *Bundle* resources could also be used to "
"deploy `SUC` or `SUC Plans` on *non air-gapped* environments."
msgstr ""

#. type: Title ===
#: asciidoc/day2/downstream-clusters-introduction.adoc:37
#, no-wrap
msgid "Day 2 workflow"
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-clusters-introduction.adoc:38
msgid ""
"The following is a `Day 2` workflow that should be followed when upgrading a "
"downstream cluster to a specific Edge release."
msgstr ""

#. type: Title =
#: asciidoc/day2/downstream-clusters.adoc:1
#, no-wrap
msgid "Downstream clusters"
msgstr ""

#. type: Plain text
#: asciidoc/day2/downstream-clusters.adoc:2
msgid ""
"This section covers how to do various `Day 2` operations for different parts "
"of your downstream cluster using your `management cluster`."
msgstr ""

#. type: Title =
#: asciidoc/day2/mgmt-cluster.adoc:1
#, no-wrap
msgid "Management Cluster"
msgstr ""

#. type: Plain text
#: asciidoc/day2/mgmt-cluster.adoc:2
msgid ""
"This section covers how to do various `Day 2` operations on a `management "
"cluster`."
msgstr ""

#. type: Title ==
#: asciidoc/day2/mgmt-cluster.adoc:3
#, no-wrap
msgid "RKE2 upgrade"
msgstr ""

#. type: delimited block =
#: asciidoc/day2/mgmt-cluster.adoc:4
msgid ""
"To ensure *disaster recovery*, we advise to do a backup of the RKE2 cluster "
"data. For information on how to do this, check "
"link:https://docs.rke2.io/backup_restore[here]. The default location for the "
"`rke2` binary is `/opt/rke2/bin`."
msgstr ""

#. type: Plain text
#: asciidoc/day2/mgmt-cluster.adoc:5
msgid ""
"You can upgrade the RKE2 version using the RKE2 installation script as "
"follows:"
msgstr ""

#. type: delimited block -
#: asciidoc/day2/mgmt-cluster.adoc:6
#, no-wrap
msgid "curl -sfL https://get.rke2.io | INSTALL_RKE2_VERSION=vX.Y.Z+rke2rN sh -\n"
msgstr ""

#. type: Plain text
#: asciidoc/day2/mgmt-cluster.adoc:7
msgid "Remember to restart the `rke2` process after installing:"
msgstr ""

#. type: delimited block -
#: asciidoc/day2/mgmt-cluster.adoc:8
#, no-wrap
msgid ""
"# For server nodes:\n"
"systemctl restart rke2-server\n"
msgstr ""

#. type: delimited block -
#: asciidoc/day2/mgmt-cluster.adoc:9
#, no-wrap
msgid ""
"# For agent nodes:\n"
"systemctl restart rke2-agent\n"
msgstr ""

#. type: delimited block =
#: asciidoc/day2/mgmt-cluster.adoc:10
msgid ""
"To avoid any unforseen upgrade problems, use the following node upgrade "
"order:"
msgstr ""

#. type: delimited block =
#: asciidoc/day2/mgmt-cluster.adoc:11
msgid "_Server nodes_ - should be upgraded *one* node at a time."
msgstr ""

#. type: delimited block =
#: asciidoc/day2/mgmt-cluster.adoc:12
msgid ""
"_Agent nodes_ - should be upgraded after *all* server node upgrades have "
"finished. Can be upgraded in parallel."
msgstr ""

#. type: Plain text
#: asciidoc/day2/mgmt-cluster.adoc:13
msgid ""
"_For further information, see the "
"link:https://docs.rke2.io/upgrade/manual_upgrade#upgrade-rke2-using-the-installation-script[RKE2 "
"upgrade documentation]._"
msgstr ""

#. type: Title ==
#: asciidoc/day2/mgmt-cluster.adoc:14
#, no-wrap
msgid "OS upgrade"
msgstr ""

#. type: Plain text
#: asciidoc/day2/mgmt-cluster.adoc:15
msgid ""
"This section assumes that you have registered your system to "
"https://scc.suse.com."
msgstr ""

#. type: Plain text
#: asciidoc/day2/mgmt-cluster.adoc:16
msgid ""
"SUSE regularly releases new `SLE Micro` package updates. To retrieve the "
"updated package versions SLE Micro uses `transactional-upgrade`."
msgstr ""

#. type: Plain text
#: asciidoc/day2/mgmt-cluster.adoc:17
msgid ""
"`transactional-upgrade` provides an application and library to update a "
"Linux operating system in a transactional way, i.e. the update will be "
"performed in the background while the system continues running as it "
"is. Only after you *reboot* the system will the update take effect. For "
"further information, see the `transactional-update` "
"https://github.com/openSUSE/transactional-update[GitHub] GitHub page."
msgstr ""

#. type: Block title
#: asciidoc/day2/mgmt-cluster.adoc:18
#, no-wrap
msgid "To update all packages in the system, execute:"
msgstr ""

#. type: delimited block -
#: asciidoc/day2/mgmt-cluster.adoc:19
#, no-wrap
msgid "transactional-update\n"
msgstr ""

#. type: Plain text
#: asciidoc/day2/mgmt-cluster.adoc:20
msgid ""
"Since *rebooting* the node will result in it being unavailable for some "
"time, if you are running a multi-node cluster, you can "
"https://kubernetes.io/docs/reference/kubectl/generated/kubectl_cordon/[cordon] "
"and "
"https://kubernetes.io/docs/reference/kubectl/generated/kubectl_drain/[drain] "
"the node before the *reboot*."
msgstr ""

#. type: Block title
#: asciidoc/day2/mgmt-cluster.adoc:21
#, no-wrap
msgid "To cordon a node, execute:"
msgstr ""

#. type: delimited block -
#: asciidoc/day2/mgmt-cluster.adoc:22
#, no-wrap
msgid "kubectl cordon <node>\n"
msgstr ""

#. type: Plain text
#: asciidoc/day2/mgmt-cluster.adoc:23
msgid ""
"This will result in the node being taken out of the default scheduling "
"mechanism, ensuring that no pods will be assigned to it by mistake."
msgstr ""

#. type: Block title
#: asciidoc/day2/mgmt-cluster.adoc:24
#, no-wrap
msgid "To drain a node, execute:"
msgstr ""

#. type: delimited block -
#: asciidoc/day2/mgmt-cluster.adoc:25
#, no-wrap
msgid "kubectl drain <node>\n"
msgstr ""

#. type: Plain text
#: asciidoc/day2/mgmt-cluster.adoc:26
msgid ""
"This will ensure that all workloads on the node will be transferred to other "
"available nodes."
msgstr ""

#. type: delimited block =
#: asciidoc/day2/mgmt-cluster.adoc:27
msgid ""
"Depending on what workloads you are running on the node, you might also need "
"to provide additional flags (e.g. `--delete-emptydir-data`, "
"`--ignore-daemonsets`) to the command."
msgstr ""

#. type: Block title
#: asciidoc/day2/mgmt-cluster.adoc:28
#, no-wrap
msgid "Reboot node:"
msgstr ""

#. type: delimited block -
#: asciidoc/day2/mgmt-cluster.adoc:29
#, no-wrap
msgid "sudo reboot\n"
msgstr ""

#. type: Plain text
#: asciidoc/day2/mgmt-cluster.adoc:30
msgid ""
"After a successful reboot, the packages on your node will be updated. The "
"only thing left is to bring the node back to the default scheduling "
"mechanism with the "
"https://kubernetes.io/docs/reference/kubectl/generated/kubectl_uncordon/[uncordon] "
"command."
msgstr ""

#. type: Block title
#: asciidoc/day2/mgmt-cluster.adoc:31
#, no-wrap
msgid "Uncordon node:"
msgstr ""

#. type: delimited block -
#: asciidoc/day2/mgmt-cluster.adoc:32
#, no-wrap
msgid "kubectl uncordon <node>\n"
msgstr ""

#. type: delimited block =
#: asciidoc/day2/mgmt-cluster.adoc:33
msgid ""
"In case you want to revert the update, use the above steps with the "
"following `transactional-update` command:"
msgstr ""

#. type: delimited block -
#: asciidoc/day2/mgmt-cluster.adoc:34
#, no-wrap
msgid "transactional-update rollback last\n"
msgstr ""

#. type: Title ==
#: asciidoc/day2/mgmt-cluster.adoc:35
#, no-wrap
msgid "Helm upgrade"
msgstr ""

#. type: Plain text
#: asciidoc/day2/mgmt-cluster.adoc:36
msgid ""
"This section assumes you have installed `helm` on your system. For `helm` "
"installation instructions, check "
"link:https://helm.sh/docs/intro/install[here]."
msgstr ""

#. type: delimited block =
#: asciidoc/day2/mgmt-cluster.adoc:37
msgid ""
"This section covers how to upgrade both an "
"<<day2-mgmt-cluster-eib-helm-chart-upgrade,EIB>> and "
"<<day2-mgmt-cluster-helm-chart-upgrade,non-EIB>> deployed helm chart."
msgstr ""

#. type: Title ===
#: asciidoc/day2/mgmt-cluster.adoc:38
#, no-wrap
msgid "EIB deployed helm chart"
msgstr ""

#. type: delimited block =
#: asciidoc/day2/mgmt-cluster.adoc:39
msgid ""
"EIB deploys helm charts defined in it's <<quickstart-eib-definition-file, "
"image definition file>> by using RKE2's manifest "
"https://docs.rke2.io/advanced#auto-deploying-manifests[auto-deploy] "
"functionality."
msgstr ""

#. type: delimited block =
#: asciidoc/day2/mgmt-cluster.adoc:40
msgid ""
"In order to upgrade a chart that is deployed in such a manner, you need to "
"upgrade the chart manifest file that EIB will create under the "
"`/var/lib/rancher/rke2/server/manifests` directory on your `initializer` "
"node."
msgstr ""

#. type: Plain text
#: asciidoc/day2/mgmt-cluster.adoc:41
msgid ""
"To ensure disaster recovery, we advise that you always backup your chart "
"manifest file as well as follow any documentation related to disaster "
"recovery that your chart offers."
msgstr ""

#. type: delimited block =
#: asciidoc/day2/mgmt-cluster.adoc:42
msgid "To upgrade the chart manifest file, follow these steps:"
msgstr ""

#. type: delimited block =
#: asciidoc/day2/mgmt-cluster.adoc:43
msgid "Locate the `initializer` node"
msgstr ""

#. type: delimited block =
#: asciidoc/day2/mgmt-cluster.adoc:44
msgid ""
"For `multi-node clusters` - in your EIB image definition file, you should "
"have specified the `initializer: true` property for one of your nodes. If "
"you have not specified this property, the initializer node will be the first "
"*server* node in your node list."
msgstr ""

#. type: delimited block =
#: asciidoc/day2/mgmt-cluster.adoc:45
msgid "For `single-node clusters` - the initializer is the currently running node."
msgstr ""

#. type: delimited block =
#: asciidoc/day2/mgmt-cluster.adoc:46
msgid "SSH to the `initializer` node:"
msgstr ""

#. type: delimited block -
#: asciidoc/day2/mgmt-cluster.adoc:47
#, no-wrap
msgid "ssh root@<node_ip>\n"
msgstr ""

#. type: Plain text
#: asciidoc/day2/mgmt-cluster.adoc:48
msgid "link:https://helm.sh/docs/helm/helm_pull/[Pull] the helm chart:"
msgstr ""

#. type: Plain text
#: asciidoc/day2/mgmt-cluster.adoc:49
msgid "For helm charts hosted in a helm chart repository:"
msgstr ""

#. type: delimited block -
#: asciidoc/day2/mgmt-cluster.adoc:50
#, no-wrap
msgid ""
"helm repo add <chart_repo_name> <chart_repo_urls>\n"
"helm pull <chart_repo_name>/<chart_name>\n"
msgstr ""

#. type: delimited block -
#: asciidoc/day2/mgmt-cluster.adoc:51
#, no-wrap
msgid ""
"# Alternatively if you want to pull a specific verison\n"
"helm pull <chart_repo_name>/<chart_name> --version=X.Y.Z\n"
msgstr ""

#. type: Plain text
#: asciidoc/day2/mgmt-cluster.adoc:52
msgid "For OCI-based helm charts:"
msgstr ""

#. type: delimited block -
#: asciidoc/day2/mgmt-cluster.adoc:53
#, no-wrap
msgid "helm pull oci://<chart_oci_url>\n"
msgstr ""

#. type: delimited block -
#: asciidoc/day2/mgmt-cluster.adoc:54
#, no-wrap
msgid ""
"# Alternatively if you want to pull a specific verison\n"
"helm pull oci://<chart_oci_url> --version=X.Y.Z\n"
msgstr ""

#. type: Plain text
#: asciidoc/day2/mgmt-cluster.adoc:55
msgid ""
"Encode the pulled `.tgz` archive so that it can be passed to a `HelmChart` "
"CR config:"
msgstr ""

#. type: delimited block -
#: asciidoc/day2/mgmt-cluster.adoc:56
#, no-wrap
msgid "base64 -w 0 <chart_name>-X.Y.Z.tgz  > <chart_name>-X.Y.Z.txt\n"
msgstr ""

#. type: Plain text
#: asciidoc/day2/mgmt-cluster.adoc:57
msgid "Make a copy of the chart manifest file that we will edit:"
msgstr ""

#. type: delimited block -
#: asciidoc/day2/mgmt-cluster.adoc:58
#, no-wrap
msgid ""
"cp /var/lib/rancher/rke2/server/manifests/<chart_name>.yaml "
"./<chart_name>.yaml\n"
msgstr ""

#. type: Plain text
#: asciidoc/day2/mgmt-cluster.adoc:59
msgid ""
"Change the `chartContent` and `version` configurations of the `bar.yaml` "
"file:"
msgstr ""

#. type: delimited block -
#: asciidoc/day2/mgmt-cluster.adoc:60
#, no-wrap
msgid ""
"sed -i -e \"s|chartContent:.*|chartContent: $(<chart-name-X.Y.Z.txt)|\" -e "
"\"s|version:.*|version: X.Y.Z|\" <chart_name>.yaml\n"
msgstr ""

#. type: delimited block =
#: asciidoc/day2/mgmt-cluster.adoc:61
msgid ""
"If you need to do any additional upgrade changes to the chart (e.g. adding "
"*new* custom chart values), you need to manually edit the chart manifest "
"file."
msgstr ""

#. type: Plain text
#: asciidoc/day2/mgmt-cluster.adoc:62
msgid "Replace the original chart manifest file:"
msgstr ""

#. type: delimited block -
#: asciidoc/day2/mgmt-cluster.adoc:63
#, no-wrap
msgid "cp <chart_name>.yaml /var/lib/rancher/rke2/server/manifests/\n"
msgstr ""

#. type: Plain text
#: asciidoc/day2/mgmt-cluster.adoc:64
msgid ""
"The above commands will trigger an upgrade of the helm chart. The upgrade "
"will be handled by the "
"https://github.com/k3s-io/helm-controller#helm-controller[helm-controller]."
msgstr ""

#. type: Plain text
#: asciidoc/day2/mgmt-cluster.adoc:65
msgid ""
"To track the helm chart upgrade you need to view the logs of the pod that "
"the `helm-controller` creates for the chart upgrade. Refer to the "
"<<day2-mgmt-cluster-eib-helm-chart-upgrade-examples, Examples>> section for "
"more information."
msgstr ""

#. type: Title ====
#: asciidoc/day2/mgmt-cluster.adoc:66 asciidoc/day2/mgmt-cluster.adoc:133
#, no-wrap
msgid "Examples"
msgstr ""

#. type: delimited block =
#: asciidoc/day2/mgmt-cluster.adoc:67
msgid ""
"The examples in this section assume that you have already located and "
"connected to your `initializer` node."
msgstr ""

#. type: Plain text
#: asciidoc/day2/mgmt-cluster.adoc:68 asciidoc/day2/mgmt-cluster.adoc:134
msgid "This section offer examples on how to upgrade a:"
msgstr ""

#. type: Plain text
#: asciidoc/day2/mgmt-cluster.adoc:69
msgid ""
"<<day2-mgmt-cluster-eib-helm-chart-upgrade-examples-rancher, Rancher>> helm "
"chart"
msgstr ""

#. type: Plain text
#: asciidoc/day2/mgmt-cluster.adoc:70
msgid ""
"<<day2-mgmt-cluster-eib-helm-chart-upgrade-examples-metal3, Metal^3^>> helm "
"chart"
msgstr ""

#. type: Title =====
#: asciidoc/day2/mgmt-cluster.adoc:71
#, no-wrap
msgid "Rancher upgrade"
msgstr ""

#. type: delimited block =
#: asciidoc/day2/mgmt-cluster.adoc:72 asciidoc/day2/mgmt-cluster.adoc:138
msgid ""
"To ensure disaster recovery, we advise to do a Rancher backup. For "
"information on how to do this, check "
"link:https://ranchermanager.docs.rancher.com/how-to-guides/new-user-guides/backup-restore-and-disaster-recovery/back-up-rancher[here]."
msgstr ""

#. type: Plain text
#: asciidoc/day2/mgmt-cluster.adoc:73 asciidoc/day2/mgmt-cluster.adoc:139
msgid "This example shows how to upgrade Rancher to the `2.8.4` version."
msgstr ""

#. type: Plain text
#: asciidoc/day2/mgmt-cluster.adoc:74
msgid "Add the `Rancher Prime` Helm repository:"
msgstr ""

#. type: delimited block -
#: asciidoc/day2/mgmt-cluster.adoc:75
#, no-wrap
msgid "helm repo add rancher-prime https://charts.rancher.com/server-charts/prime\n"
msgstr ""

#. type: Plain text
#: asciidoc/day2/mgmt-cluster.adoc:76
msgid "Pull the latest `Rancher Prime` helm chart version:"
msgstr ""

#. type: delimited block -
#: asciidoc/day2/mgmt-cluster.adoc:77
#, no-wrap
msgid "helm pull rancher-prime/rancher --version=2.8.4\n"
msgstr ""

#. type: Plain text
#: asciidoc/day2/mgmt-cluster.adoc:78 asciidoc/day2/mgmt-cluster.adoc:104
msgid "Encode `.tgz` archive so that it can be passed to a `HelmChart` CR config:"
msgstr ""

#. type: delimited block -
#: asciidoc/day2/mgmt-cluster.adoc:79
#, no-wrap
msgid "base64 -w 0 rancher-2.8.4.tgz  > rancher-2.8.4-encoded.txt\n"
msgstr ""

#. type: Plain text
#: asciidoc/day2/mgmt-cluster.adoc:80
msgid "Make a copy of the `rancher.yaml` file that we will edit:"
msgstr ""

#. type: delimited block -
#: asciidoc/day2/mgmt-cluster.adoc:81
#, no-wrap
msgid "cp /var/lib/rancher/rke2/server/manifests/rancher.yaml ./rancher.yaml\n"
msgstr ""

#. type: Plain text
#: asciidoc/day2/mgmt-cluster.adoc:82
msgid ""
"Change the `chartContent` and `version` configurations of the `rancher.yaml` "
"file:"
msgstr ""

#. type: delimited block -
#: asciidoc/day2/mgmt-cluster.adoc:83
#, no-wrap
msgid ""
"sed -i -e \"s|chartContent:.*|chartContent: $(<rancher-2.8.4-encoded.txt)|\" "
"-e \"s|version:.*|version: 2.8.4|\" rancher.yaml\n"
msgstr ""

#. type: delimited block =
#: asciidoc/day2/mgmt-cluster.adoc:84
msgid ""
"If you need to do any additional upgrade changes to the chart (e.g. adding "
"*new* custom chart values), you need to manually edit the `rancher.yaml` "
"file."
msgstr ""

#. type: Plain text
#: asciidoc/day2/mgmt-cluster.adoc:85
msgid "Replace the original `rancher.yaml` file:"
msgstr ""

#. type: delimited block -
#: asciidoc/day2/mgmt-cluster.adoc:86
#, no-wrap
msgid "cp rancher.yaml /var/lib/rancher/rke2/server/manifests/\n"
msgstr ""

#. type: Plain text
#: asciidoc/day2/mgmt-cluster.adoc:87 asciidoc/day2/mgmt-cluster.adoc:113
msgid "To verify the update:"
msgstr ""

#. type: Plain text
#: asciidoc/day2/mgmt-cluster.adoc:88 asciidoc/day2/mgmt-cluster.adoc:114
msgid "List pods in `default` namespace:"
msgstr ""

#. type: delimited block -
#: asciidoc/day2/mgmt-cluster.adoc:89 asciidoc/day2/mgmt-cluster.adoc:115
#, no-wrap
msgid "kubectl get pods -n default\n"
msgstr ""

#. type: delimited block -
#: asciidoc/day2/mgmt-cluster.adoc:90
#, no-wrap
msgid ""
"# Example output\n"
"NAME                              READY   STATUS      RESTARTS   AGE\n"
"helm-install-cert-manager-7v7nm   0/1     Completed   0          88m\n"
"helm-install-rancher-p99k5        0/1     Completed   0          3m21s\n"
msgstr ""

#. type: Plain text
#: asciidoc/day2/mgmt-cluster.adoc:91 asciidoc/day2/mgmt-cluster.adoc:117
msgid "Look at the logs of the `helm-install-rancher-*` pod:"
msgstr ""

#. type: delimited block -
#: asciidoc/day2/mgmt-cluster.adoc:92 asciidoc/day2/mgmt-cluster.adoc:118
#, no-wrap
msgid "kubectl logs <helm_install_rancher_pod> -n default\n"
msgstr ""

#. type: delimited block -
#: asciidoc/day2/mgmt-cluster.adoc:93
#, no-wrap
msgid ""
"# Example\n"
"kubectl logs helm-install-rancher-p99k5 -n default\n"
msgstr ""

#. type: Plain text
#: asciidoc/day2/mgmt-cluster.adoc:94
msgid "Verify `Rancher` pods are running:"
msgstr ""

#. type: delimited block -
#: asciidoc/day2/mgmt-cluster.adoc:95
#, no-wrap
msgid "kubectl get pods -n cattle-system\n"
msgstr ""

#. type: delimited block -
#: asciidoc/day2/mgmt-cluster.adoc:96
#, no-wrap
msgid ""
"# Example output\n"
"NAME                               READY   STATUS      RESTARTS   AGE\n"
"helm-operation-mccvd               0/2     Completed   0          3m52s\n"
"helm-operation-np8kn               0/2     Completed   0          106s\n"
"helm-operation-q8lf7               0/2     Completed   0          2m53s\n"
"rancher-648d4fbc6c-qxfpj           1/1     Running     0          5m27s\n"
"rancher-648d4fbc6c-trdnf           1/1     Running     0          9m57s\n"
"rancher-648d4fbc6c-wvhbf           1/1     Running     0          9m57s\n"
"rancher-webhook-649dcc48b4-zqjs7   1/1     Running     0          100s\n"
msgstr ""

#. type: Plain text
#: asciidoc/day2/mgmt-cluster.adoc:97 asciidoc/day2/mgmt-cluster.adoc:144
msgid "Verify `Rancher` version upgrade:"
msgstr ""

#. type: delimited block -
#: asciidoc/day2/mgmt-cluster.adoc:98 asciidoc/day2/mgmt-cluster.adoc:145
#, no-wrap
msgid "kubectl get settings.management.cattle.io server-version\n"
msgstr ""

#. type: delimited block -
#: asciidoc/day2/mgmt-cluster.adoc:99 asciidoc/day2/mgmt-cluster.adoc:146
#, no-wrap
msgid ""
"# Example output\n"
"NAME             VALUE\n"
"server-version   v2.8.4\n"
msgstr ""

#. type: Title =====
#: asciidoc/day2/mgmt-cluster.adoc:100
#, no-wrap
msgid "Metal^3^ upgrade"
msgstr ""

#. type: Plain text
#: asciidoc/day2/mgmt-cluster.adoc:101 asciidoc/day2/mgmt-cluster.adoc:149
msgid "This example shows how to upgrade Metal^3^ to the `0.7.1` version."
msgstr ""

#. type: Plain text
#: asciidoc/day2/mgmt-cluster.adoc:102
msgid "Pull the latest `Metal^3^` helm chart version:"
msgstr ""

#. type: delimited block -
#: asciidoc/day2/mgmt-cluster.adoc:103
#, no-wrap
msgid "helm pull oci://registry.suse.com/edge/metal3-chart --version 0.7.1\n"
msgstr ""

#. type: delimited block -
#: asciidoc/day2/mgmt-cluster.adoc:105
#, no-wrap
msgid "base64 -w 0 metal3-chart-0.7.1.tgz  > metal3-chart-0.7.1-encoded.txt\n"
msgstr ""

#. type: Plain text
#: asciidoc/day2/mgmt-cluster.adoc:106
msgid "Make a copy of the `Metal^3^` manifest file that we will edit:"
msgstr ""

#. type: delimited block -
#: asciidoc/day2/mgmt-cluster.adoc:107
#, no-wrap
msgid "cp /var/lib/rancher/rke2/server/manifests/metal3.yaml ./metal3.yaml\n"
msgstr ""

#. type: Plain text
#: asciidoc/day2/mgmt-cluster.adoc:108
msgid ""
"Change the `chartContent` and `version` configurations of the `Metal^3^` "
"manifest file:"
msgstr ""

#. type: delimited block -
#: asciidoc/day2/mgmt-cluster.adoc:109
#, no-wrap
msgid ""
"sed -i -e \"s|chartContent:.*|chartContent: "
"$(<metal3-chart-0.7.1-encoded.txt)|\" -e \"s|version:.*|version: 0.7.1|\" "
"metal3.yaml\n"
msgstr ""

#. type: delimited block =
#: asciidoc/day2/mgmt-cluster.adoc:110
msgid ""
"If you need to do any additional upgrade changes to the chart (e.g. adding "
"*new* custom chart values), you need to manually edit the `metal3.yaml` "
"file."
msgstr ""

#. type: Plain text
#: asciidoc/day2/mgmt-cluster.adoc:111
msgid "Replace the original `Metal^3^` manifest file:"
msgstr ""

#. type: delimited block -
#: asciidoc/day2/mgmt-cluster.adoc:112
#, no-wrap
msgid "cp metal3.yaml /var/lib/rancher/rke2/server/manifests/\n"
msgstr ""

#. type: delimited block -
#: asciidoc/day2/mgmt-cluster.adoc:116
#, no-wrap
msgid ""
"# Example output\n"
"NAME                              READY   STATUS      RESTARTS   AGE\n"
"helm-install-metal3-7p7bl         0/1     Completed   0          27s\n"
msgstr ""

#. type: delimited block -
#: asciidoc/day2/mgmt-cluster.adoc:119
#, no-wrap
msgid ""
"# Example\n"
"kubectl logs helm-install-metal3-7p7bl -n default\n"
msgstr ""

#. type: Plain text
#: asciidoc/day2/mgmt-cluster.adoc:120 asciidoc/day2/mgmt-cluster.adoc:154
msgid "Verify `Metal^3^` pods are running:"
msgstr ""

#. type: delimited block -
#: asciidoc/day2/mgmt-cluster.adoc:121 asciidoc/day2/mgmt-cluster.adoc:155
#, no-wrap
msgid "kubectl get pods -n metal3-system\n"
msgstr ""

#. type: delimited block -
#: asciidoc/day2/mgmt-cluster.adoc:122
#, no-wrap
msgid ""
"# Example output\n"
"NAME                                                     READY   STATUS    "
"RESTARTS      AGE\n"
"baremetal-operator-controller-manager-785f99c884-9z87p   2/2     Running   2 "
"(25m ago)   36m\n"
"metal3-metal3-ironic-96fb66cdd-lkss2                     4/4     Running   0             "
"3m54s\n"
"metal3-metal3-mariadb-55fd44b648-q6zhk                   1/1     Running   0             "
"36m\n"
msgstr ""

#. type: Plain text
#: asciidoc/day2/mgmt-cluster.adoc:123
msgid "Verify the `HelmChart` resource version is upgraded:"
msgstr ""

#. type: delimited block -
#: asciidoc/day2/mgmt-cluster.adoc:124
#, no-wrap
msgid "kubectl get helmchart metal3 -n default\n"
msgstr ""

#. type: delimited block -
#: asciidoc/day2/mgmt-cluster.adoc:125
#, no-wrap
msgid ""
"# Example output\n"
"NAME     JOB                   CHART   TARGETNAMESPACE   VERSION   REPO   "
"HELMVERSION   BOOTSTRAP\n"
"metal3   helm-install-metal3           metal3-system     0.7.1                          "
"\n"
msgstr ""

#. type: Title ===
#: asciidoc/day2/mgmt-cluster.adoc:126
#, no-wrap
msgid "Non-EIB deployed helm chart"
msgstr ""

#. type: Plain text
#: asciidoc/day2/mgmt-cluster.adoc:127
msgid ""
"Get the values for the currently running helm chart `.yaml` file and make "
"any changes to them *if necessary*:"
msgstr ""

#. type: delimited block -
#: asciidoc/day2/mgmt-cluster.adoc:128
#, no-wrap
msgid ""
"helm get values <chart_name> -n <chart_namespace> -o yaml > "
"<chart_name>-values.yaml\n"
msgstr ""

#. type: Plain text
#: asciidoc/day2/mgmt-cluster.adoc:129 asciidoc/day2/mgmt-cluster.adoc:142
#: asciidoc/day2/mgmt-cluster.adoc:152
msgid "Update the helm chart:"
msgstr ""

#. type: delimited block -
#: asciidoc/day2/mgmt-cluster.adoc:130
#, no-wrap
msgid ""
"# For charts using a chart repository\n"
"helm upgrade <chart_name> <chart_repo_name>/<chart_name> \\\n"
"  --namespace <chart_namespace> \\\n"
"  -f <chart_name>-values.yaml \\\n"
"  --version=X.Y.Z\n"
msgstr ""

#. type: delimited block -
#: asciidoc/day2/mgmt-cluster.adoc:131
#, no-wrap
msgid ""
"# For OCI based charts\n"
"helm upgrade <chart_name> oci://<oci_registry_url>/<chart_name> \\\n"
"  --namespace <chart_namespace> \\\n"
"  -f <chart_name>-values.yaml \\\n"
"  --version=X.Y.Z\n"
msgstr ""

#. type: Plain text
#: asciidoc/day2/mgmt-cluster.adoc:132
msgid ""
"Verify the chart upgrade. Depending on the chart you may need to verify "
"different resources. For examples of chart upgrades, see the "
"<<day2-mgmt-cluster-helm-chart-upgrade-examples, Examples>> section."
msgstr ""

#. type: Plain text
#: asciidoc/day2/mgmt-cluster.adoc:135
msgid ""
"<<day2-mgmt-cluster-helm-chart-upgrade-examples-rancher, Rancher>> helm "
"chart"
msgstr ""

#. type: Plain text
#: asciidoc/day2/mgmt-cluster.adoc:136
msgid ""
"<<day2-mgmt-cluster-helm-chart-upgrade-examples-metal3, Metal^3^>> helm "
"chart"
msgstr ""

#. type: Plain text
#: asciidoc/day2/mgmt-cluster.adoc:140 asciidoc/day2/mgmt-cluster.adoc:150
msgid ""
"Get the values for the current Rancher release and print them to a "
"`rancher-values.yaml` file:"
msgstr ""

#. type: delimited block -
#: asciidoc/day2/mgmt-cluster.adoc:141
#, no-wrap
msgid "helm get values rancher -n cattle-system -o yaml > rancher-values.yaml\n"
msgstr ""

#. type: delimited block -
#: asciidoc/day2/mgmt-cluster.adoc:143
#, no-wrap
msgid ""
"helm upgrade rancher rancher-prime/rancher \\\n"
"  --namespace cattle-system \\\n"
"  -f rancher-values.yaml \\\n"
"  --version=2.8.4\n"
msgstr ""

#. type: Plain text
#: asciidoc/day2/mgmt-cluster.adoc:147
msgid ""
"_For additional information on the Rancher helm chart upgrade, check "
"link:https://ranchermanager.docs.rancher.com/getting-started/installation-and-upgrade/install-upgrade-on-a-kubernetes-cluster/upgrades[here]._"
msgstr ""

#. type: Title =====
#: asciidoc/day2/mgmt-cluster.adoc:148
#, no-wrap
msgid "Metal^3^"
msgstr ""

#. type: delimited block -
#: asciidoc/day2/mgmt-cluster.adoc:151
#, no-wrap
msgid "helm get values metal3 -n metal3-system -o yaml > metal3-values.yaml\n"
msgstr ""

#. type: delimited block -
#: asciidoc/day2/mgmt-cluster.adoc:153
#, no-wrap
msgid ""
"helm upgrade metal3 oci://registry.suse.com/edge/metal3-chart \\\n"
"  --namespace metal3-system \\\n"
"  -f metal3-values.yaml \\\n"
"  --version=0.7.1\n"
msgstr ""

#. type: delimited block -
#: asciidoc/day2/mgmt-cluster.adoc:156
#, no-wrap
msgid ""
"# Example output\n"
"NAME                                                     READY   STATUS    "
"RESTARTS   AGE\n"
"baremetal-operator-controller-manager-785f99c884-fvsx4   2/2     Running   0          "
"12m\n"
"metal3-metal3-ironic-96fb66cdd-j9mgf                     4/4     Running   0          "
"2m41s\n"
"metal3-metal3-mariadb-55fd44b648-7fmvk                   1/1     Running   0          "
"12m\n"
msgstr ""

#. type: Plain text
#: asciidoc/day2/mgmt-cluster.adoc:157
msgid "Verify `Metal^3^` helm release version change:"
msgstr ""

#. type: delimited block -
#: asciidoc/day2/mgmt-cluster.adoc:158
#, no-wrap
msgid "helm ls -n metal3-system\n"
msgstr ""

#. type: delimited block -
#: asciidoc/day2/mgmt-cluster.adoc:159
#, no-wrap
msgid ""
"# Expected output\n"
"NAME  \tNAMESPACE    \tREVISION\tUPDATED                                "
"\tSTATUS  \tCHART       \tAPP VERSION\n"
"metal3\tmetal3-system\t2       \t2024-06-17 12:43:06.774802846 +0000 "
"UTC\tdeployed\tmetal3-0.7.1\t1.16.0   \n"
msgstr ""
