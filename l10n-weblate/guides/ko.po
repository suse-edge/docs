# Korean translations for PACKAGE package
# PACKAGE 패키지에 대한 한국어 번역문
# Copyright (C) 2024 Free Software Foundation, Inc.
# This file is distributed under the same license as the PACKAGE package.
# Automatically generated, 2024.
#
msgid ""
msgstr ""
"Project-Id-Version: PACKAGE VERSION\n"
"POT-Creation-Date: 2024-07-23 11:17+0100\n"
"PO-Revision-Date: 2024-07-23 11:17+0100\n"
"Last-Translator: Automatically generated\n"
"Language-Team: none\n"
"Language: ko\n"
"MIME-Version: 1.0\n"
"Content-Type: text/plain; charset=UTF-8\n"
"Content-Transfer-Encoding: 8bit\n"
"Plural-Forms: nplurals=1; plural=0;\n"

#. type: Title =
#: asciidoc/guides/air-gapped-eib-deployments.adoc:1
#, no-wrap
msgid "Air-gapped deployments with Edge Image Builder"
msgstr ""

#. type: Title ==
#: asciidoc/guides/air-gapped-eib-deployments.adoc:2
#, no-wrap
msgid "Intro"
msgstr ""

#. type: Plain text
#: asciidoc/guides/air-gapped-eib-deployments.adoc:3
msgid ""
"This guide will show how to deploy several of the SUSE Edge components "
"completely air-gapped on SLE Micro 5.5 utilizing <<components-eib,Edge Image "
"Builder(EIB)>>. With this, you'll be able to boot into a customized, ready "
"to boot (CRB) image created by EIB and have the specified components "
"deployed on either a RKE2 or K3s cluster without an Internet connection or "
"any manual steps. This configuration is highly desirable for customers that "
"want to pre-bake all artifacts required for deployment into their OS image, "
"so they are immediately available on boot."
msgstr ""

#. type: Plain text
#: asciidoc/guides/air-gapped-eib-deployments.adoc:4
msgid "We will cover an air-gapped installation of:"
msgstr ""

#. type: Plain text
#: asciidoc/guides/air-gapped-eib-deployments.adoc:5
msgid "<<components-rancher>>"
msgstr ""

#. type: Plain text
#: asciidoc/guides/air-gapped-eib-deployments.adoc:6
msgid "<<components-neuvector>>"
msgstr ""

#. type: Plain text
#: asciidoc/guides/air-gapped-eib-deployments.adoc:7
msgid "<<components-longhorn>>"
msgstr ""

#. type: Plain text
#: asciidoc/guides/air-gapped-eib-deployments.adoc:8
msgid "<<components-kubevirt>>"
msgstr ""

#. type: delimited block =
#: asciidoc/guides/air-gapped-eib-deployments.adoc:9
msgid ""
"EIB will parse and pre-download all images referenced in the provided Helm "
"charts and Kubernetes manifests. However, some of those may be attempting to "
"pull container images and create Kubernetes resources based on those at "
"runtime. In these cases we have to manually specify the necessary images in "
"the definition file if we want to set up a completely air-gapped environment."
msgstr ""

#. type: Title ==
#: asciidoc/guides/air-gapped-eib-deployments.adoc:10
#: asciidoc/guides/kiwi-images.adoc:4 asciidoc/guides/metallb-k3s.adoc:16
#: asciidoc/guides/metallb-kube-api.adoc:3
#, no-wrap
msgid "Prerequisites"
msgstr ""

#. type: Plain text
#: asciidoc/guides/air-gapped-eib-deployments.adoc:11
msgid ""
"If you're following this guide, it's assumed that you are already familiar "
"with <<components-eib,EIB>>. If not, please follow the <<quickstart-eib,"
"quick start guide>> to better understand the concepts shown in practice "
"below."
msgstr ""

#. type: Title ==
#: asciidoc/guides/air-gapped-eib-deployments.adoc:12
#, no-wrap
msgid "Libvirt Network Configuration"
msgstr ""

#. type: Title =
#: asciidoc/guides/air-gapped-eib-deployments.adoc:13
#, no-wrap
msgid "[NOTE] "
msgstr ""

#. type: Plain text
#: asciidoc/guides/air-gapped-eib-deployments.adoc:14
msgid ""
"To demo the air-gapped deployment, this guide will be done using a simulated "
"air-gapped `libvirt` network and the following configuration will be "
"tailored to that. For your own deployments, you may have to modify the "
"`host1.local.yaml` configuration that will be introduced in the next step."
msgstr ""

#. type: delimited block =
#: asciidoc/guides/air-gapped-eib-deployments.adoc:15
msgid ""
"If you would like to use the same `libvirt` network configuration, follow "
"along. If not, skip to <<config-dir-creation>>."
msgstr ""

#. type: delimited block =
#: asciidoc/guides/air-gapped-eib-deployments.adoc:16
msgid ""
"Let's create an isolated network configuration with an IP address range "
"`192.168.100.2/24` for DHCP:"
msgstr ""

#. type: delimited block -
#: asciidoc/guides/air-gapped-eib-deployments.adoc:17
#, no-wrap
msgid ""
"cat << EOF > isolatednetwork.xml\n"
"<network>\n"
"  <name>isolatednetwork</name>\n"
"  <bridge name='virbr1' stp='on' delay='0'/>\n"
"  <ip address='192.168.100.1' netmask='255.255.255.0'>\n"
"    <dhcp>\n"
"      <range start='192.168.100.2' end='192.168.100.254'/>\n"
"    </dhcp>\n"
"  </ip>\n"
"</network>\n"
"EOF\n"
msgstr ""

#. type: Plain text
#: asciidoc/guides/air-gapped-eib-deployments.adoc:18
msgid "Now, the only thing left is to create the network and start it:"
msgstr ""

#. type: delimited block -
#: asciidoc/guides/air-gapped-eib-deployments.adoc:19
#, no-wrap
msgid ""
"virsh net-define isolatednetwork.xml\n"
"virsh net-start isolatednetwork\n"
msgstr ""

#. type: Title ==
#: asciidoc/guides/air-gapped-eib-deployments.adoc:20
#, no-wrap
msgid "Base Directory Configuration [[config-dir-creation]]"
msgstr ""

#. type: Plain text
#: asciidoc/guides/air-gapped-eib-deployments.adoc:21
msgid ""
"The base directory configuration is the same across all different "
"components, so we will set it up here."
msgstr ""

#. type: Plain text
#: asciidoc/guides/air-gapped-eib-deployments.adoc:22
msgid "We will first create the necessary subdirectories:"
msgstr ""

#. type: delimited block -
#: asciidoc/guides/air-gapped-eib-deployments.adoc:23
#, no-wrap
msgid ""
"export CONFIG_DIR=$HOME/config\n"
"mkdir -p $CONFIG_DIR/base-images\n"
"mkdir -p $CONFIG_DIR/network\n"
"mkdir -p $CONFIG_DIR/kubernetes/helm/values\n"
msgstr ""

#. type: Plain text
#: asciidoc/guides/air-gapped-eib-deployments.adoc:24
msgid ""
"Make sure to add whichever base image you plan to use into the `base-images` "
"directory. This guide will focus on the Self Install ISO found https://www."
"suse.com/download/sle-micro/[here]."
msgstr ""

#. type: Plain text
#: asciidoc/guides/air-gapped-eib-deployments.adoc:25
msgid "Let's copy the downloaded image:"
msgstr ""

#. type: delimited block -
#: asciidoc/guides/air-gapped-eib-deployments.adoc:26
#, no-wrap
msgid "cp SLE-Micro.x86_64-5.5.0-Default-SelfInstall-GM2.install.iso $CONFIG_DIR/base-images/slemicro.iso\n"
msgstr ""

#. type: delimited block =
#: asciidoc/guides/air-gapped-eib-deployments.adoc:27
msgid "EIB is never going to modify the base image input."
msgstr ""

#. type: Plain text
#: asciidoc/guides/air-gapped-eib-deployments.adoc:28
msgid "Let's create a file containing the desired network configuration:"
msgstr ""

#. type: delimited block -
#: asciidoc/guides/air-gapped-eib-deployments.adoc:29
#, no-wrap
msgid ""
"cat << EOF > $CONFIG_DIR/network/host1.local.yaml\n"
"routes:\n"
"  config:\n"
"  - destination: 0.0.0.0/0\n"
"    metric: 100\n"
"    next-hop-address: 192.168.100.1\n"
"    next-hop-interface: eth0\n"
"    table-id: 254\n"
"  - destination: 192.168.100.0/24\n"
"    metric: 100\n"
"    next-hop-address:\n"
"    next-hop-interface: eth0\n"
"    table-id: 254\n"
"dns-resolver:\n"
"  config:\n"
"    server:\n"
"    - 192.168.100.1\n"
"    - 8.8.8.8\n"
"interfaces:\n"
"- name: eth0\n"
"  type: ethernet\n"
"  state: up\n"
"  mac-address: 34:8A:B1:4B:16:E7\n"
"  ipv4:\n"
"    address:\n"
"    - ip: 192.168.100.50\n"
"      prefix-length: 24\n"
"    dhcp: false\n"
"    enabled: true\n"
"  ipv6:\n"
"    enabled: false\n"
"EOF\n"
msgstr ""

#. type: Plain text
#: asciidoc/guides/air-gapped-eib-deployments.adoc:30
msgid ""
"This configuration ensures the following are present on the provisioned "
"systems (using the specified MAC address):"
msgstr ""

#. type: Plain text
#: asciidoc/guides/air-gapped-eib-deployments.adoc:31
msgid "an Ethernet interface with a static IP address"
msgstr ""

#. type: Plain text
#: asciidoc/guides/air-gapped-eib-deployments.adoc:32
msgid "routing"
msgstr ""

#. type: Plain text
#: asciidoc/guides/air-gapped-eib-deployments.adoc:33
msgid "DNS"
msgstr ""

#. type: Plain text
#: asciidoc/guides/air-gapped-eib-deployments.adoc:34
msgid "hostname (`host1.local`)"
msgstr ""

#. type: Plain text
#: asciidoc/guides/air-gapped-eib-deployments.adoc:35
msgid "The resulting file structure should now look like:"
msgstr ""

#. type: delimited block -
#: asciidoc/guides/air-gapped-eib-deployments.adoc:36
#, no-wrap
msgid ""
"├── kubernetes/\n"
"│   └── helm/\n"
"│       └── values/\n"
"├── base-images/\n"
"│   └── slemicro.iso\n"
"└── network/  \n"
"    └── host1.local.yaml\n"
msgstr ""

#. type: Title ==
#: asciidoc/guides/air-gapped-eib-deployments.adoc:37
#, no-wrap
msgid "Base Definition File"
msgstr ""

#. type: Plain text
#: asciidoc/guides/air-gapped-eib-deployments.adoc:38
msgid ""
"Edge Image Builder is using _definition files_ to modify the SLE Micro "
"images. These files contain the majority of configurable options.  Many of "
"these options will be repeated across the different component sections, so "
"we will list and explain those here."
msgstr ""

#. type: delimited block =
#: asciidoc/guides/air-gapped-eib-deployments.adoc:39
msgid ""
"Full list of customization options in the definition file can be found in "
"the https://github.com/suse-edge/edge-image-builder/blob/release-1.0/docs/"
"building-images.md#image-definition-file[upstream documentation]"
msgstr ""

#. type: Plain text
#: asciidoc/guides/air-gapped-eib-deployments.adoc:40
msgid ""
"We will take a look at the following fields which will be present in all "
"definition files:"
msgstr ""

#. type: delimited block -
#: asciidoc/guides/air-gapped-eib-deployments.adoc:41
#, no-wrap
msgid ""
"apiVersion: 1.0\n"
"image:\n"
"  imageType: iso\n"
"  arch: x86_64\n"
"  baseImage: slemicro.iso\n"
"  outputImageName: eib-image.iso\n"
"operatingSystem:\n"
"  users:\n"
"    - username: root\n"
"      encryptedPassword: $6$jHugJNNd3HElGsUZ$eodjVe4te5ps44SVcWshdfWizrP.xAyd71CVEXazBJ/.v799/WRCBXxfYmunlBO2yp1hm/zb4r8EmnrrNCF.P/\n"
"kubernetes:\n"
"  version: v1.28.9+rke2r1\n"
"embeddedArtifactRegistry:\n"
"  images:\n"
"    - ...\n"
msgstr ""

#. type: Plain text
#: asciidoc/guides/air-gapped-eib-deployments.adoc:42
msgid ""
"The `image` section is required, and it specifies the input image, its "
"architecture and type, as well as what the output image will be called."
msgstr ""

#. type: Plain text
#: asciidoc/guides/air-gapped-eib-deployments.adoc:43
msgid ""
"The `operatingSystem` section is optional, and contains configuration to "
"enable login on the provisioned systems with the `root/eib` username/"
"password."
msgstr ""

#. type: Plain text
#: asciidoc/guides/air-gapped-eib-deployments.adoc:44
msgid ""
"The `kubernetes` section is optional, and it defines the Kubernetes type and "
"version. We are going to use Kubernetes 1.28.9 and RKE2 by default.  Use "
"`kubernetes.version: v1.28.9+k3s1` if K3s is desired instead. Unless "
"explicitly configured via the `kubernetes.nodes` field, all clusters we "
"bootstrap in this guide will be single-node ones."
msgstr ""

#. type: Plain text
#: asciidoc/guides/air-gapped-eib-deployments.adoc:45
msgid ""
"The `embeddedArtifactRegistry` section will include all images which are "
"only referenced and pulled at runtime for the specific component."
msgstr ""

#. type: Title ==
#: asciidoc/guides/air-gapped-eib-deployments.adoc:46
#, no-wrap
msgid "Rancher Installation [[rancher-install]]"
msgstr ""

#. type: delimited block =
#: asciidoc/guides/air-gapped-eib-deployments.adoc:47
msgid ""
"The <<components-rancher,Rancher>> deployment that will be demonstrated will "
"be highly slimmed down for demonstration purposes. For your actual "
"deployments, additional artifacts may be necessary depending on your "
"configuration."
msgstr ""

#. type: Plain text
#: asciidoc/guides/air-gapped-eib-deployments.adoc:48
msgid ""
"The https://github.com/rancher/rancher/releases/tag/v2.8.4[Rancher v2.8.4] "
"release assets contain a `rancher-images.txt` file which lists all the "
"images required for an air-gapped installation."
msgstr ""

#. type: Plain text
#: asciidoc/guides/air-gapped-eib-deployments.adoc:49
msgid ""
"There are about 602 container images in total which means that the resulting "
"CRB image would be roughly 28GB+. For our Rancher installation, we will "
"strip down that list to the smallest working configuration. From there, you "
"can add back any images you may need for your deployments."
msgstr ""

#. type: Plain text
#: asciidoc/guides/air-gapped-eib-deployments.adoc:50
msgid ""
"We will create the definition file and include the stripped down image list:"
msgstr ""

#. type: delimited block -
#: asciidoc/guides/air-gapped-eib-deployments.adoc:51
#, no-wrap
msgid ""
"apiVersion: 1.0\n"
"image:\n"
"  imageType: iso\n"
"  arch: x86_64\n"
"  baseImage: slemicro.iso\n"
"  outputImageName: eib-image.iso\n"
"operatingSystem:\n"
"  users:\n"
"    - username: root\n"
"      encryptedPassword: $6$jHugJNNd3HElGsUZ$eodjVe4te5ps44SVcWshdfWizrP.xAyd71CVEXazBJ/.v799/WRCBXxfYmunlBO2yp1hm/zb4r8EmnrrNCF.P/\n"
"kubernetes:\n"
"  version: v1.28.9+rke2r1\n"
"  network:\n"
"    apiVIP: 192.168.100.151\n"
"  manifests:\n"
"    urls:\n"
"    - https://github.com/cert-manager/cert-manager/releases/download/v1.14.2/cert-manager.crds.yaml\n"
"  helm:\n"
"    charts:\n"
"      - name: rancher\n"
"        version: 2.8.4\n"
"        repositoryName: rancher-prime\n"
"        valuesFile: rancher-values.yaml\n"
"        targetNamespace: cattle-system\n"
"        createNamespace: true\n"
"        installationNamespace: kube-system\n"
"      - name: cert-manager\n"
"        installationNamespace: kube-system\n"
"        createNamespace: true\n"
"        repositoryName: jetstack\n"
"        targetNamespace: cert-manager\n"
"        version: 1.14.2\n"
"    repositories:\n"
"      - name: jetstack\n"
"        url: https://charts.jetstack.io\n"
"      - name: rancher-prime\n"
"        url:  https://charts.rancher.com/server-charts/prime\n"
"embeddedArtifactRegistry:\n"
"  images:\n"
"    - name: registry.rancher.com/rancher/backup-restore-operator:v4.0.2\n"
"    - name: registry.rancher.com/rancher/calico-cni:v3.27.0-rancher1\n"
"    - name: registry.rancher.com/rancher/cis-operator:v1.0.13\n"
"    - name: registry.rancher.com/rancher/coreos-kube-state-metrics:v1.9.7\n"
"    - name: registry.rancher.com/rancher/coreos-prometheus-config-reloader:v0.38.1\n"
"    - name: registry.rancher.com/rancher/coreos-prometheus-operator:v0.38.1\n"
"    - name: registry.rancher.com/rancher/flannel-cni:v0.3.0-rancher9\n"
"    - name: registry.rancher.com/rancher/fleet-agent:v0.9.4\n"
"    - name: registry.rancher.com/rancher/fleet:v0.9.4\n"
"    - name: registry.rancher.com/rancher/gitjob:v0.9.7\n"
"    - name: registry.rancher.com/rancher/grafana-grafana:7.1.5\n"
"    - name: registry.rancher.com/rancher/hardened-addon-resizer:1.8.20-build20240410\n"
"    - name: registry.rancher.com/rancher/hardened-calico:v3.27.3-build20240423\n"
"    - name: registry.rancher.com/rancher/hardened-cluster-autoscaler:v1.8.10-build20240124\n"
"    - name: registry.rancher.com/rancher/hardened-cni-plugins:v1.4.1-build20240325\n"
"    - name: registry.rancher.com/rancher/hardened-coredns:v1.11.1-build20240305\n"
"    - name: registry.rancher.com/rancher/hardened-dns-node-cache:1.22.28-build20240125\n"
"    - name: registry.rancher.com/rancher/hardened-etcd:v3.5.9-k3s1-build20240418\n"
"    - name: registry.rancher.com/rancher/hardened-flannel:v0.25.1-build20240423\n"
"    - name: registry.rancher.com/rancher/hardened-k8s-metrics-server:v0.7.1-build20240401\n"
"    - name: registry.rancher.com/rancher/hardened-kubernetes:v1.28.9-rke2r1-build20240416\n"
"    - name: registry.rancher.com/rancher/hardened-multus-cni:v4.0.2-build20240208\n"
"    - name: registry.rancher.com/rancher/hardened-node-feature-discovery:v0.14.1-build20230926\n"
"    - name: registry.rancher.com/rancher/hardened-whereabouts:v0.6.3-build20240208\n"
"    - name: registry.rancher.com/rancher/helm-project-operator:v0.2.1\n"
"    - name: registry.rancher.com/rancher/istio-kubectl:1.5.10\n"
"    - name: registry.rancher.com/rancher/jimmidyson-configmap-reload:v0.3.0\n"
"    - name: registry.rancher.com/rancher/k3s-upgrade:v1.28.9-k3s1\n"
"    - name: registry.rancher.com/rancher/klipper-helm:v0.8.3-build20240228\n"
"    - name: registry.rancher.com/rancher/klipper-lb:v0.4.7\n"
"    - name: registry.rancher.com/rancher/kube-api-auth:v0.2.1\n"
"    - name: registry.rancher.com/rancher/kubectl:v1.28.7\n"
"    - name: registry.rancher.com/rancher/library-nginx:1.19.2-alpine\n"
"    - name: registry.rancher.com/rancher/local-path-provisioner:v0.0.26\n"
"    - name: registry.rancher.com/rancher/machine:v0.15.0-rancher112\n"
"    - name: registry.rancher.com/rancher/mirrored-cluster-api-controller:v1.4.4\n"
"    - name: registry.rancher.com/rancher/nginx-ingress-controller:nginx-1.9.6-rancher1\n"
"    - name: registry.rancher.com/rancher/pause:3.6\n"
"    - name: registry.rancher.com/rancher/prom-alertmanager:v0.21.0\n"
"    - name: registry.rancher.com/rancher/prom-node-exporter:v1.0.1\n"
"    - name: registry.rancher.com/rancher/prom-prometheus:v2.18.2\n"
"    - name: registry.rancher.com/rancher/prometheus-auth:v0.2.2\n"
"    - name: registry.rancher.com/rancher/prometheus-federator:v0.3.4\n"
"    - name: registry.rancher.com/rancher/pushprox-client:v0.1.0-rancher2-client\n"
"    - name: registry.rancher.com/rancher/pushprox-proxy:v0.1.0-rancher2-proxy\n"
"    - name: registry.rancher.com/rancher/rancher-agent:v2.8.4\n"
"    - name: registry.rancher.com/rancher/rancher-csp-adapter:v3.0.1\n"
"    - name: registry.rancher.com/rancher/rancher-webhook:v0.4.5\n"
"    - name: registry.rancher.com/rancher/rancher:v2.8.4\n"
"    - name: registry.rancher.com/rancher/rke-tools:v0.1.96\n"
"    - name: registry.rancher.com/rancher/rke2-cloud-provider:v1.29.3-build20240412\n"
"    - name: registry.rancher.com/rancher/rke2-runtime:v1.28.9-rke2r1\n"
"    - name: registry.rancher.com/rancher/rke2-upgrade:v1.28.9-rke2r1\n"
"    - name: registry.rancher.com/rancher/security-scan:v0.2.15\n"
"    - name: registry.rancher.com/rancher/shell:v0.1.24\n"
"    - name: registry.rancher.com/rancher/system-agent-installer-k3s:v1.28.9-k3s1\n"
"    - name: registry.rancher.com/rancher/system-agent-installer-rke2:v1.28.9-rke2r1\n"
"    - name: registry.rancher.com/rancher/system-agent:v0.3.6-suc\n"
"    - name: registry.rancher.com/rancher/system-upgrade-controller:v0.13.1\n"
"    - name: registry.rancher.com/rancher/ui-plugin-catalog:1.3.0\n"
"    - name: registry.rancher.com/rancher/ui-plugin-operator:v0.1.1\n"
"    - name: registry.rancher.com/rancher/webhook-receiver:v0.2.5\n"
"    - name: registry.rancher.com/rancher/kubectl:v1.20.2\n"
msgstr ""

#. type: Plain text
#: asciidoc/guides/air-gapped-eib-deployments.adoc:52
msgid ""
"As compared to the full list of 602 container images, this slimmed down "
"version only contains 62 which makes the new CRB image only about 7GB."
msgstr ""

#. type: Plain text
#: asciidoc/guides/air-gapped-eib-deployments.adoc:53
msgid "We also need to create a Helm values file for Rancher:"
msgstr ""

#. type: delimited block -
#: asciidoc/guides/air-gapped-eib-deployments.adoc:54
#, no-wrap
msgid ""
"cat << EOF > $CONFIG_DIR/kubernetes/helm/values/rancher-values.yaml\n"
"hostname: 192.168.100.50.sslip.io\n"
"replicas: 1\n"
"bootstrapPassword: \"adminadminadmin\"\n"
"systemDefaultRegistry: registry.rancher.com\n"
"useBundledSystemChart: true\n"
"EOF\n"
msgstr ""

#. type: delimited block =
#: asciidoc/guides/air-gapped-eib-deployments.adoc:55
msgid ""
"Setting the `systemDefaultRegistry` to `registry.rancher.com` allows Rancher "
"to automatically look for images in the embedded artifact registry started "
"within the CRB image at boot. Omitting this field may result in failure to "
"find the container images on the node."
msgstr ""

#. type: Plain text
#: asciidoc/guides/air-gapped-eib-deployments.adoc:56
#: asciidoc/guides/air-gapped-eib-deployments.adoc:77
#: asciidoc/guides/air-gapped-eib-deployments.adoc:93
#: asciidoc/guides/air-gapped-eib-deployments.adoc:108
msgid "Let's build the image:"
msgstr ""

#. type: delimited block -
#: asciidoc/guides/air-gapped-eib-deployments.adoc:57
#: asciidoc/guides/air-gapped-eib-deployments.adoc:78
#: asciidoc/guides/air-gapped-eib-deployments.adoc:94
#: asciidoc/guides/air-gapped-eib-deployments.adoc:109
#, no-wrap
msgid ""
"podman run --rm -it --privileged -v $CONFIG_DIR:/eib \\\n"
"registry.suse.com/edge/edge-image-builder:1.0.2 \\\n"
"build --definition-file eib-iso-definition.yaml\n"
msgstr ""

#. type: Plain text
#: asciidoc/guides/air-gapped-eib-deployments.adoc:58
#: asciidoc/guides/air-gapped-eib-deployments.adoc:79
#: asciidoc/guides/air-gapped-eib-deployments.adoc:95
#: asciidoc/guides/air-gapped-eib-deployments.adoc:110
msgid "The output should be similar to the following:"
msgstr ""

#. type: delimited block -
#: asciidoc/guides/air-gapped-eib-deployments.adoc:59
#, no-wrap
msgid ""
"Generating image customization components...\n"
"Identifier ................... [SUCCESS]\n"
"Custom Files ................. [SKIPPED]\n"
"Time ......................... [SKIPPED]\n"
"Network ...................... [SUCCESS]\n"
"Groups ....................... [SKIPPED]\n"
"Users ........................ [SUCCESS]\n"
"Proxy ........................ [SKIPPED]\n"
"Rpm .......................... [SKIPPED]\n"
"Systemd ...................... [SKIPPED]\n"
"Elemental .................... [SKIPPED]\n"
"Suma ......................... [SKIPPED]\n"
"Downloading file: dl-manifest-1.yaml 100% (437/437 kB, 17 MB/s)\n"
"Populating Embedded Artifact Registry... 100% (69/69, 26 it/min)\n"
"Embedded Artifact Registry ... [SUCCESS]\n"
"Keymap ....................... [SUCCESS]\n"
"Configuring Kubernetes component...\n"
"The Kubernetes CNI is not explicitly set, defaulting to 'cilium'.\n"
"Downloading file: rke2_installer.sh\n"
"Downloading file: rke2-images-core.linux-amd64.tar.zst 100% (780/780 MB, 115 MB/s)\n"
"Downloading file: rke2-images-cilium.linux-amd64.tar.zst 100% (367/367 MB, 108 MB/s)\n"
"Downloading file: rke2.linux-amd64.tar.gz 100% (34/34 MB, 117 MB/s)\n"
"Downloading file: sha256sum-amd64.txt 100% (3.9/3.9 kB, 34 MB/s)\n"
"Downloading file: dl-manifest-1.yaml 100% (437/437 kB, 106 MB/s)\n"
"Kubernetes ................... [SUCCESS]\n"
"Certificates ................. [SKIPPED]\n"
"Building ISO image...\n"
"Kernel Params ................ [SKIPPED]\n"
"Image build complete!\n"
msgstr ""

#. type: Plain text
#: asciidoc/guides/air-gapped-eib-deployments.adoc:60
msgid ""
"Once a node using the built image is provisioned, we can verify the Rancher "
"installation:"
msgstr ""

#. type: delimited block -
#: asciidoc/guides/air-gapped-eib-deployments.adoc:61
#, no-wrap
msgid "/var/lib/rancher/rke2/bin/kubectl get all -A --kubeconfig /etc/rancher/rke2/rke2.yaml\n"
msgstr ""

#. type: Plain text
#: asciidoc/guides/air-gapped-eib-deployments.adoc:62
#: asciidoc/guides/air-gapped-eib-deployments.adoc:83
#: asciidoc/guides/air-gapped-eib-deployments.adoc:99
#: asciidoc/guides/air-gapped-eib-deployments.adoc:115
#: asciidoc/guides/air-gapped-eib-deployments.adoc:123
msgid ""
"The output should be similar to the following, showing that everything has "
"been successfully deployed:"
msgstr ""

#. type: delimited block -
#: asciidoc/guides/air-gapped-eib-deployments.adoc:63
#, no-wrap
msgid ""
"NAMESPACE                         NAME                                                        READY   STATUS      RESTARTS   AGE\n"
"cattle-fleet-local-system         pod/fleet-agent-68f4d5d5f7-tdlk7                            1/1     Running     0          34s\n"
"cattle-fleet-system               pod/fleet-controller-85564cc978-pbtvk                       1/1     Running     0          5m51s\n"
"cattle-fleet-system               pod/gitjob-9dc58fb5b-7cwsw                                  1/1     Running     0          5m51s\n"
"cattle-provisioning-capi-system   pod/capi-controller-manager-5c57b4b8f7-wlp5k                1/1     Running     0          4m52s\n"
"cattle-system                     pod/helm-operation-4fk5c                                    0/2     Completed   0          37s\n"
"cattle-system                     pod/helm-operation-6zgbq                                    0/2     Completed   0          4m54s\n"
"cattle-system                     pod/helm-operation-cjds5                                    0/2     Completed   0          5m37s\n"
"cattle-system                     pod/helm-operation-kt5c2                                    0/2     Completed   0          5m21s\n"
"cattle-system                     pod/helm-operation-ppgtw                                    0/2     Completed   0          5m30s\n"
"cattle-system                     pod/helm-operation-tvcwk                                    0/2     Completed   0          5m54s\n"
"cattle-system                     pod/helm-operation-wpxd4                                    0/2     Completed   0          53s\n"
"cattle-system                     pod/rancher-58575f9575-svrg2                                1/1     Running     0          6m34s\n"
"cattle-system                     pod/rancher-webhook-5c6556f7ff-vgmkt                        1/1     Running     0          5m19s\n"
"cert-manager                      pod/cert-manager-6c69f9f796-fkm8f                           1/1     Running     0          7m14s\n"
"cert-manager                      pod/cert-manager-cainjector-584f44558c-wg7p6                1/1     Running     0          7m14s\n"
"cert-manager                      pod/cert-manager-webhook-76f9945d6f-lv2nv                   1/1     Running     0          7m14s\n"
"endpoint-copier-operator          pod/endpoint-copier-operator-58964b659b-l64dk               1/1     Running     0          7m16s\n"
"endpoint-copier-operator          pod/endpoint-copier-operator-58964b659b-z9t9d               1/1     Running     0          7m16s\n"
"kube-system                       pod/cilium-fht55                                            1/1     Running     0          7m32s\n"
"kube-system                       pod/cilium-operator-558bbf6cfd-gwfwf                        1/1     Running     0          7m32s\n"
"kube-system                       pod/cilium-operator-558bbf6cfd-qsxb5                        0/1     Pending     0          7m32s\n"
"kube-system                       pod/cloud-controller-manager-host1.local                    1/1     Running     0          7m21s\n"
"kube-system                       pod/etcd-host1.local                                        1/1     Running     0          7m8s\n"
"kube-system                       pod/helm-install-cert-manager-fvbtt                         0/1     Completed   0          8m12s\n"
"kube-system                       pod/helm-install-endpoint-copier-operator-5kkgw             0/1     Completed   0          8m12s\n"
"kube-system                       pod/helm-install-metallb-zfphb                              0/1     Completed   0          8m12s\n"
"kube-system                       pod/helm-install-rancher-nc4nt                              0/1     Completed   2          8m12s\n"
"kube-system                       pod/helm-install-rke2-cilium-7wq87                          0/1     Completed   0          8m12s\n"
"kube-system                       pod/helm-install-rke2-coredns-nl4gc                         0/1     Completed   0          8m12s\n"
"kube-system                       pod/helm-install-rke2-ingress-nginx-svjqd                   0/1     Completed   0          8m12s\n"
"kube-system                       pod/helm-install-rke2-metrics-server-gqgqz                  0/1     Completed   0          8m12s\n"
"kube-system                       pod/helm-install-rke2-snapshot-controller-crd-r6b5p         0/1     Completed   0          8m12s\n"
"kube-system                       pod/helm-install-rke2-snapshot-controller-ss9v4             0/1     Completed   1          8m12s\n"
"kube-system                       pod/helm-install-rke2-snapshot-validation-webhook-vlkpn     0/1     Completed   0          8m12s\n"
"kube-system                       pod/kube-apiserver-host1.local                              1/1     Running     0          7m29s\n"
"kube-system                       pod/kube-controller-manager-host1.local                     1/1     Running     0          7m30s\n"
"kube-system                       pod/kube-proxy-host1.local                                  1/1     Running     0          7m30s\n"
"kube-system                       pod/kube-scheduler-host1.local                              1/1     Running     0          7m42s\n"
"kube-system                       pod/rke2-coredns-rke2-coredns-6c8d9bb6d-qlwc8               1/1     Running     0          7m31s\n"
"kube-system                       pod/rke2-coredns-rke2-coredns-autoscaler-55fb4bbbcf-j5r2z   1/1     Running     0          7m31s\n"
"kube-system                       pod/rke2-ingress-nginx-controller-4h2mm                     1/1     Running     0          7m3s\n"
"kube-system                       pod/rke2-metrics-server-544c8c66fc-lsrc6                    1/1     Running     0          7m15s\n"
"kube-system                       pod/rke2-snapshot-controller-59cc9cd8f4-4wx75               1/1     Running     0          7m14s\n"
"kube-system                       pod/rke2-snapshot-validation-webhook-54c5989b65-5kp2x       1/1     Running     0          7m15s\n"
"metallb-system                    pod/metallb-controller-5895d8446d-z54lm                     1/1     Running     0          7m15s\n"
"metallb-system                    pod/metallb-speaker-fxwgk                                   1/1     Running     0          7m15s\n"
msgstr ""

#. type: delimited block -
#: asciidoc/guides/air-gapped-eib-deployments.adoc:64
#, no-wrap
msgid ""
"NAMESPACE                         NAME                                              TYPE           CLUSTER-IP      EXTERNAL-IP       PORT(S)\n"
"         AGE\n"
"cattle-fleet-system               service/gitjob                                    ClusterIP      10.43.30.8      <none>            80/TCP\n"
"         5m51s\n"
"cattle-provisioning-capi-system   service/capi-webhook-service                      ClusterIP      10.43.7.100     <none>            443/TCP\n"
"         4m52s\n"
"cattle-system                     service/rancher                                   ClusterIP      10.43.100.229   <none>            80/TCP,443/TCP\n"
"         6m34s\n"
"cattle-system                     service/rancher-webhook                           ClusterIP      10.43.121.133   <none>            443/TCP\n"
"         5m19s\n"
"cert-manager                      service/cert-manager                              ClusterIP      10.43.140.65    <none>            9402/TCP\n"
"         7m14s\n"
"cert-manager                      service/cert-manager-webhook                      ClusterIP      10.43.108.158   <none>            443/TCP\n"
"         7m14s\n"
"default                           service/kubernetes                                ClusterIP      10.43.0.1       <none>            443/TCP\n"
"         8m26s\n"
"default                           service/kubernetes-vip                            LoadBalancer   10.43.138.138   192.168.100.151   9345:31006/TCP,6443:31599/TCP   8m21s\n"
"kube-system                       service/cilium-agent                              ClusterIP      None            <none>            9964/TCP\n"
"         7m32s\n"
"kube-system                       service/rke2-coredns-rke2-coredns                 ClusterIP      10.43.0.10      <none>            53/UDP,53/TCP\n"
"         7m31s\n"
"kube-system                       service/rke2-ingress-nginx-controller-admission   ClusterIP      10.43.157.19    <none>            443/TCP\n"
"         7m3s\n"
"kube-system                       service/rke2-metrics-server                       ClusterIP      10.43.4.123     <none>            443/TCP\n"
"         7m15s\n"
"kube-system                       service/rke2-snapshot-validation-webhook          ClusterIP      10.43.91.161    <none>            443/TCP\n"
"         7m16s\n"
"metallb-system                    service/metallb-webhook-service                   ClusterIP      10.43.71.192    <none>            443/TCP\n"
"         7m15s\n"
msgstr ""

#. type: delimited block -
#: asciidoc/guides/air-gapped-eib-deployments.adoc:65
#, no-wrap
msgid ""
"NAMESPACE        NAME                                           DESIRED   CURRENT   READY   UP-TO-DATE   AVAILABLE   NODE SELECTOR            AGE\n"
"kube-system      daemonset.apps/cilium                          1         1         1       1            1           kubernetes.io/os=linux   7m32s\n"
"kube-system      daemonset.apps/rke2-ingress-nginx-controller   1         1         1       1            1           kubernetes.io/os=linux   7m3s\n"
"metallb-system   daemonset.apps/metallb-speaker                 1         1         1       1            1           kubernetes.io/os=linux   7m15s\n"
msgstr ""

#. type: delimited block -
#: asciidoc/guides/air-gapped-eib-deployments.adoc:66
#, no-wrap
msgid ""
"NAMESPACE                         NAME                                                   READY   UP-TO-DATE   AVAILABLE   AGE\n"
"cattle-fleet-local-system         deployment.apps/fleet-agent                            1/1     1            1           34s\n"
"cattle-fleet-system               deployment.apps/fleet-controller                       1/1     1            1           5m51s\n"
"cattle-fleet-system               deployment.apps/gitjob                                 1/1     1            1           5m51s\n"
"cattle-provisioning-capi-system   deployment.apps/capi-controller-manager                1/1     1            1           4m52s\n"
"cattle-system                     deployment.apps/rancher                                1/1     1            1           6m34s\n"
"cattle-system                     deployment.apps/rancher-webhook                        1/1     1            1           5m19s\n"
"cert-manager                      deployment.apps/cert-manager                           1/1     1            1           7m14s\n"
"cert-manager                      deployment.apps/cert-manager-cainjector                1/1     1            1           7m14s\n"
"cert-manager                      deployment.apps/cert-manager-webhook                   1/1     1            1           7m14s\n"
"endpoint-copier-operator          deployment.apps/endpoint-copier-operator               2/2     2            2           7m16s\n"
"kube-system                       deployment.apps/cilium-operator                        1/2     2            1           7m32s\n"
"kube-system                       deployment.apps/rke2-coredns-rke2-coredns              1/1     1            1           7m31s\n"
"kube-system                       deployment.apps/rke2-coredns-rke2-coredns-autoscaler   1/1     1            1           7m31s\n"
"kube-system                       deployment.apps/rke2-metrics-server                    1/1     1            1           7m15s\n"
"kube-system                       deployment.apps/rke2-snapshot-controller               1/1     1            1           7m14s\n"
"kube-system                       deployment.apps/rke2-snapshot-validation-webhook       1/1     1            1           7m15s\n"
"metallb-system                    deployment.apps/metallb-controller                     1/1     1            1           7m15s\n"
msgstr ""

#. type: delimited block -
#: asciidoc/guides/air-gapped-eib-deployments.adoc:67
#, no-wrap
msgid ""
"NAMESPACE                         NAME                                                              DESIRED   CURRENT   READY   AGE\n"
"cattle-fleet-local-system         replicaset.apps/fleet-agent-68f4d5d5f7                            1         1         1       34s\n"
"cattle-fleet-system               replicaset.apps/fleet-controller-85564cc978                       1         1         1       5m51s\n"
"cattle-fleet-system               replicaset.apps/gitjob-9dc58fb5b                                  1         1         1       5m51s\n"
"cattle-provisioning-capi-system   replicaset.apps/capi-controller-manager-5c57b4b8f7                1         1         1       4m52s\n"
"cattle-system                     replicaset.apps/rancher-58575f9575                                1         1         1       6m34s\n"
"cattle-system                     replicaset.apps/rancher-webhook-5c6556f7ff                        1         1         1       5m19s\n"
"cert-manager                      replicaset.apps/cert-manager-6c69f9f796                           1         1         1       7m14s\n"
"cert-manager                      replicaset.apps/cert-manager-cainjector-584f44558c                1         1         1       7m14s\n"
"cert-manager                      replicaset.apps/cert-manager-webhook-76f9945d6f                   1         1         1       7m14s\n"
"endpoint-copier-operator          replicaset.apps/endpoint-copier-operator-58964b659b               2         2         2       7m16s\n"
"kube-system                       replicaset.apps/cilium-operator-558bbf6cfd                        2         2         1       7m32s\n"
"kube-system                       replicaset.apps/rke2-coredns-rke2-coredns-6c8d9bb6d               1         1         1       7m31s\n"
"kube-system                       replicaset.apps/rke2-coredns-rke2-coredns-autoscaler-55fb4bbbcf   1         1         1       7m31s\n"
"kube-system                       replicaset.apps/rke2-metrics-server-544c8c66fc                    1         1         1       7m15s\n"
"kube-system                       replicaset.apps/rke2-snapshot-controller-59cc9cd8f4               1         1         1       7m14s\n"
"kube-system                       replicaset.apps/rke2-snapshot-validation-webhook-54c5989b65       1         1         1       7m15s\n"
"metallb-system                    replicaset.apps/metallb-controller-5895d8446d                     1         1         1       7m15s\n"
msgstr ""

#. type: delimited block -
#: asciidoc/guides/air-gapped-eib-deployments.adoc:68
#, no-wrap
msgid ""
"NAMESPACE     NAME                                                      COMPLETIONS   DURATION   AGE\n"
"kube-system   job.batch/helm-install-cert-manager                       1/1           85s        8m21s\n"
"kube-system   job.batch/helm-install-endpoint-copier-operator           1/1           59s        8m21s\n"
"kube-system   job.batch/helm-install-metallb                            1/1           60s        8m21s\n"
"kube-system   job.batch/helm-install-rancher                            1/1           100s       8m21s\n"
"kube-system   job.batch/helm-install-rke2-cilium                        1/1           44s        8m18s\n"
"kube-system   job.batch/helm-install-rke2-coredns                       1/1           45s        8m18s\n"
"kube-system   job.batch/helm-install-rke2-ingress-nginx                 1/1           76s        8m16s\n"
"kube-system   job.batch/helm-install-rke2-metrics-server                1/1           60s        8m16s\n"
"kube-system   job.batch/helm-install-rke2-snapshot-controller           1/1           61s        8m15s\n"
"kube-system   job.batch/helm-install-rke2-snapshot-controller-crd       1/1           60s        8m16s\n"
"kube-system   job.batch/helm-install-rke2-snapshot-validation-webhook   1/1           60s        8m14s\n"
msgstr ""

#. type: Plain text
#: asciidoc/guides/air-gapped-eib-deployments.adoc:69
msgid ""
"And when we go to `https://192.168.100.50.sslip.io` and log in with the "
"`adminadminadmin` password that we set earlier, we are greeted with the "
"Rancher dashboard:"
msgstr ""

#. type: Target for macro image
#: asciidoc/guides/air-gapped-eib-deployments.adoc:70
#, no-wrap
msgid "air-gapped-rancher.png"
msgstr ""

#. type: Title ==
#: asciidoc/guides/air-gapped-eib-deployments.adoc:71
#, no-wrap
msgid "NeuVector Installation [[neuvector-install]]"
msgstr ""

#. type: Plain text
#: asciidoc/guides/air-gapped-eib-deployments.adoc:72
msgid ""
"Unlike the Rancher installation, the NeuVector installation does not require "
"any special handling in EIB. EIB will automatically air-gap every image "
"required by NeuVector."
msgstr ""

#. type: Plain text
#: asciidoc/guides/air-gapped-eib-deployments.adoc:73
msgid "We will create the definition file:"
msgstr ""

#. type: delimited block -
#: asciidoc/guides/air-gapped-eib-deployments.adoc:74
#, no-wrap
msgid ""
"apiVersion: 1.0\n"
"image:\n"
"  imageType: iso\n"
"  arch: x86_64\n"
"  baseImage: slemicro.iso\n"
"  outputImageName: eib-image.iso\n"
"operatingSystem:\n"
"  users:\n"
"    - username: root\n"
"      encryptedPassword: $6$jHugJNNd3HElGsUZ$eodjVe4te5ps44SVcWshdfWizrP.xAyd71CVEXazBJ/.v799/WRCBXxfYmunlBO2yp1hm/zb4r8EmnrrNCF.P/\n"
"kubernetes:\n"
"  version: v1.28.9+rke2r1\n"
"  helm:\n"
"    charts:\n"
"      - name: neuvector-crd\n"
"        version: 103.0.3+up2.7.6\n"
"        repositoryName: rancher-charts\n"
"        targetNamespace: neuvector\n"
"        createNamespace: true\n"
"        installationNamespace: kube-system\n"
"        valuesFile: neuvector-values.yaml\n"
"      - name: neuvector\n"
"        version: 103.0.3+up2.7.6\n"
"        repositoryName: rancher-charts\n"
"        targetNamespace: neuvector\n"
"        createNamespace: true\n"
"        installationNamespace: kube-system\n"
"        valuesFile: neuvector-values.yaml\n"
"    repositories:\n"
"      - name: rancher-charts\n"
"        url: https://charts.rancher.io/\n"
msgstr ""

#. type: Plain text
#: asciidoc/guides/air-gapped-eib-deployments.adoc:75
msgid "We will also create a Helm values file for NeuVector:"
msgstr ""

#. type: delimited block -
#: asciidoc/guides/air-gapped-eib-deployments.adoc:76
#, no-wrap
msgid ""
"cat << EOF > $CONFIG_DIR/kubernetes/helm/values/neuvector-values.yaml\n"
"controller:\n"
"  replicas: 1\n"
"manager:\n"
"  enabled: false\n"
"cve:\n"
"  scanner:\n"
"    enabled: false\n"
"    replicas: 1\n"
"k3s:\n"
"  enabled: true\n"
"crdwebhook:\n"
"  enabled: false\n"
"EOF\n"
msgstr ""

#. type: delimited block -
#: asciidoc/guides/air-gapped-eib-deployments.adoc:80
#, no-wrap
msgid ""
"Generating image customization components...\n"
"Identifier ................... [SUCCESS]\n"
"Custom Files ................. [SKIPPED]\n"
"Time ......................... [SKIPPED]\n"
"Network ...................... [SUCCESS]\n"
"Groups ....................... [SKIPPED]\n"
"Users ........................ [SUCCESS]\n"
"Proxy ........................ [SKIPPED]\n"
"Rpm .......................... [SKIPPED]\n"
"Systemd ...................... [SKIPPED]\n"
"Elemental .................... [SKIPPED]\n"
"Suma ......................... [SKIPPED]\n"
"Populating Embedded Artifact Registry... 100% (6/6, 20 it/min)         \n"
"Embedded Artifact Registry ... [SUCCESS]\n"
"Keymap ....................... [SUCCESS]\n"
"Configuring Kubernetes component...\n"
"The Kubernetes CNI is not explicitly set, defaulting to 'cilium'.\n"
"Downloading file: rke2_installer.sh\n"
"Kubernetes ................... [SUCCESS]\n"
"Certificates ................. [SKIPPED]\n"
"Building ISO image...\n"
"Kernel Params ................ [SKIPPED]\n"
"Image build complete!\n"
msgstr ""

#. type: Plain text
#: asciidoc/guides/air-gapped-eib-deployments.adoc:81
msgid ""
"Once a node using the built image is provisioned, we can verify the "
"NeuVector installation:"
msgstr ""

#. type: delimited block -
#: asciidoc/guides/air-gapped-eib-deployments.adoc:82
#, no-wrap
msgid "/var/lib/rancher/rke2/bin/kubectl get all -n neuvector --kubeconfig /etc/rancher/rke2/rke2.yaml\n"
msgstr ""

#. type: delimited block -
#: asciidoc/guides/air-gapped-eib-deployments.adoc:84
#, no-wrap
msgid ""
"NAME                                           READY   STATUS    RESTARTS   AGE\n"
"pod/neuvector-controller-pod-bc74745cf-x9fsc   1/1     Running   0          13m\n"
"pod/neuvector-enforcer-pod-vzw7t               1/1     Running   0          13m\n"
msgstr ""

#. type: delimited block -
#: asciidoc/guides/air-gapped-eib-deployments.adoc:85
#, no-wrap
msgid ""
"NAME                                      TYPE        CLUSTER-IP     EXTERNAL-IP   PORT(S)                         AGE\n"
"service/neuvector-svc-admission-webhook   ClusterIP   10.43.240.25   <none>        443/TCP                         13m\n"
"service/neuvector-svc-controller          ClusterIP   None           <none>        18300/TCP,18301/TCP,18301/UDP   13m\n"
msgstr ""

#. type: delimited block -
#: asciidoc/guides/air-gapped-eib-deployments.adoc:86
#, no-wrap
msgid ""
"NAME                                    DESIRED   CURRENT   READY   UP-TO-DATE   AVAILABLE   NODE SELECTOR   AGE\n"
"daemonset.apps/neuvector-enforcer-pod   1         1         1       1            1           <none>          13m\n"
msgstr ""

#. type: delimited block -
#: asciidoc/guides/air-gapped-eib-deployments.adoc:87
#, no-wrap
msgid ""
"NAME                                       READY   UP-TO-DATE   AVAILABLE   AGE\n"
"deployment.apps/neuvector-controller-pod   1/1     1            1           13m\n"
msgstr ""

#. type: delimited block -
#: asciidoc/guides/air-gapped-eib-deployments.adoc:88
#, no-wrap
msgid ""
"NAME                                                 DESIRED   CURRENT   READY   AGE\n"
"replicaset.apps/neuvector-controller-pod-bc74745cf   1         1         1       13m\n"
msgstr ""

#. type: delimited block -
#: asciidoc/guides/air-gapped-eib-deployments.adoc:89
#, no-wrap
msgid ""
"NAME                                  SCHEDULE    SUSPEND   ACTIVE   LAST SCHEDULE   AGE\n"
"cronjob.batch/neuvector-updater-pod   0 0 * * *   False     0        <none>          13m\n"
msgstr ""

#. type: Title ==
#: asciidoc/guides/air-gapped-eib-deployments.adoc:90
#, no-wrap
msgid "Longhorn Installation [[longhorn-install]]"
msgstr ""

#. type: Plain text
#: asciidoc/guides/air-gapped-eib-deployments.adoc:91
msgid ""
"The https://longhorn.io/docs/1.6.1/deploy/install/airgap/[official "
"documentation] for Longhorn contains a `longhorn-images.txt` file which "
"lists all the images required for an air-gapped installation.  We will be "
"including them in our definition file. Let's create it:"
msgstr ""

#. type: delimited block -
#: asciidoc/guides/air-gapped-eib-deployments.adoc:92
#, no-wrap
msgid ""
"apiVersion: 1.0\n"
"image:\n"
"  imageType: iso\n"
"  arch: x86_64\n"
"  baseImage: slemicro.iso\n"
"  outputImageName: eib-image.iso\n"
"operatingSystem:\n"
"  users:\n"
"    - username: root\n"
"      encryptedPassword: $6$jHugJNNd3HElGsUZ$eodjVe4te5ps44SVcWshdfWizrP.xAyd71CVEXazBJ/.v799/WRCBXxfYmunlBO2yp1hm/zb4r8EmnrrNCF.P/\n"
"kubernetes:\n"
"  version: v1.28.9+rke2r1\n"
"  helm:\n"
"    charts:\n"
"      - name: longhorn\n"
"        repositoryName: longhorn\n"
"        targetNamespace: longhorn-system\n"
"        createNamespace: true\n"
"        version: 1.6.1\n"
"    repositories:\n"
"      - name: longhorn\n"
"        url: https://charts.longhorn.io\n"
"embeddedArtifactRegistry:\n"
"  images:\n"
"    - name: longhornio/csi-attacher:v4.4.2\n"
"    - name: longhornio/csi-provisioner:v3.6.2\n"
"    - name: longhornio/csi-resizer:v1.9.2\n"
"    - name: longhornio/csi-snapshotter:v6.3.2\n"
"    - name: longhornio/csi-node-driver-registrar:v2.9.2\n"
"    - name: longhornio/livenessprobe:v2.12.0\n"
"    - name: longhornio/backing-image-manager:v1.6.1\n"
"    - name: longhornio/longhorn-engine:v1.6.1\n"
"    - name: longhornio/longhorn-instance-manager:v1.6.1\n"
"    - name: longhornio/longhorn-manager:v1.6.1\n"
"    - name: longhornio/longhorn-share-manager:v1.6.1\n"
"    - name: longhornio/longhorn-ui:v1.6.1\n"
"    - name: longhornio/support-bundle-kit:v0.0.36\n"
msgstr ""

#. type: delimited block -
#: asciidoc/guides/air-gapped-eib-deployments.adoc:96
#, no-wrap
msgid ""
"Generating image customization components...\n"
"Identifier ................... [SUCCESS]\n"
"Custom Files ................. [SKIPPED]\n"
"Time ......................... [SKIPPED]\n"
"Network ...................... [SUCCESS]\n"
"Groups ....................... [SKIPPED]\n"
"Users ........................ [SUCCESS]\n"
"Proxy ........................ [SKIPPED]\n"
"Rpm .......................... [SKIPPED]\n"
"Systemd ...................... [SKIPPED]\n"
"Elemental .................... [SKIPPED]\n"
"Suma ......................... [SKIPPED]\n"
"Populating Embedded Artifact Registry... 100% (13/13, 20 it/min)\n"
"Embedded Artifact Registry ... [SUCCESS]\n"
"Keymap ....................... [SUCCESS]\n"
"Configuring Kubernetes component...\n"
"The Kubernetes CNI is not explicitly set, defaulting to 'cilium'.\n"
"Downloading file: rke2_installer.sh\n"
"Downloading file: rke2-images-core.linux-amd64.tar.zst 100% (782/782 MB, 108 MB/s)\n"
"Downloading file: rke2-images-cilium.linux-amd64.tar.zst 100% (367/367 MB, 104 MB/s)\n"
"Downloading file: rke2.linux-amd64.tar.gz 100% (34/34 MB, 108 MB/s)\n"
"Downloading file: sha256sum-amd64.txt 100% (3.9/3.9 kB, 7.5 MB/s)\n"
"Kubernetes ................... [SUCCESS]\n"
"Certificates ................. [SKIPPED]\n"
"Building ISO image...\n"
"Kernel Params ................ [SKIPPED]\n"
"Image build complete!\n"
msgstr ""

#. type: Plain text
#: asciidoc/guides/air-gapped-eib-deployments.adoc:97
msgid ""
"Once a node using the built image is provisioned, we can verify the Longhorn "
"installation:"
msgstr ""

#. type: delimited block -
#: asciidoc/guides/air-gapped-eib-deployments.adoc:98
#, no-wrap
msgid "/var/lib/rancher/rke2/bin/kubectl get all -n longhorn-system --kubeconfig /etc/rancher/rke2/rke2.yaml\n"
msgstr ""

#. type: delimited block -
#: asciidoc/guides/air-gapped-eib-deployments.adoc:100
#, no-wrap
msgid ""
"NAME                                                    READY   STATUS    RESTARTS      AGE\n"
"pod/csi-attacher-5c4bfdcf59-9hgvv                       1/1     Running   0             35s\n"
"pod/csi-attacher-5c4bfdcf59-dt6jl                       1/1     Running   0             35s\n"
"pod/csi-attacher-5c4bfdcf59-swpwq                       1/1     Running   0             35s\n"
"pod/csi-provisioner-667796df57-dfrzw                    1/1     Running   0             35s\n"
"pod/csi-provisioner-667796df57-tvsrt                    1/1     Running   0             35s\n"
"pod/csi-provisioner-667796df57-xszsx                    1/1     Running   0             35s\n"
"pod/csi-resizer-694f8f5f64-6khlb                        1/1     Running   0             35s\n"
"pod/csi-resizer-694f8f5f64-gnr45                        1/1     Running   0             35s\n"
"pod/csi-resizer-694f8f5f64-sbl4k                        1/1     Running   0             35s\n"
"pod/csi-snapshotter-959b69d4b-2k4v8                     1/1     Running   0             35s\n"
"pod/csi-snapshotter-959b69d4b-9d8wl                     1/1     Running   0             35s\n"
"pod/csi-snapshotter-959b69d4b-l2w95                     1/1     Running   0             35s\n"
"pod/engine-image-ei-5cefaf2b-cwd8f                      1/1     Running   0             43s\n"
"pod/instance-manager-f0d17f96bc92f3cc44787a2a347f6a98   1/1     Running   0             43s\n"
"pod/longhorn-csi-plugin-szv7t                           3/3     Running   0             35s\n"
"pod/longhorn-driver-deployer-9f4fc86-q8fz2              1/1     Running   0             83s\n"
"pod/longhorn-manager-zp66l                              1/1     Running   0             83s\n"
"pod/longhorn-ui-5f4b7bbf69-k645d                        1/1     Running   3 (65s ago)   83s\n"
"pod/longhorn-ui-5f4b7bbf69-t7xt4                        1/1     Running   3 (62s ago)   83s\n"
msgstr ""

#. type: delimited block -
#: asciidoc/guides/air-gapped-eib-deployments.adoc:101
#, no-wrap
msgid ""
"NAME                                  TYPE        CLUSTER-IP     EXTERNAL-IP   PORT(S)    AGE\n"
"service/longhorn-admission-webhook    ClusterIP   10.43.74.59    <none>        9502/TCP   83s\n"
"service/longhorn-backend              ClusterIP   10.43.45.206   <none>        9500/TCP   83s\n"
"service/longhorn-conversion-webhook   ClusterIP   10.43.83.108   <none>        9501/TCP   83s\n"
"service/longhorn-engine-manager       ClusterIP   None           <none>        <none>     83s\n"
"service/longhorn-frontend             ClusterIP   10.43.84.55    <none>        80/TCP     83s\n"
"service/longhorn-recovery-backend     ClusterIP   10.43.75.200   <none>        9503/TCP   83s\n"
"service/longhorn-replica-manager      ClusterIP   None           <none>        <none>     83s\n"
msgstr ""

#. type: delimited block -
#: asciidoc/guides/air-gapped-eib-deployments.adoc:102
#, no-wrap
msgid ""
"NAME                                      DESIRED   CURRENT   READY   UP-TO-DATE   AVAILABLE   NODE SELECTOR   AGE\n"
"daemonset.apps/engine-image-ei-5cefaf2b   1         1         1       1            1           <none>          43s\n"
"daemonset.apps/longhorn-csi-plugin        1         1         1       1            1           <none>          35s\n"
"daemonset.apps/longhorn-manager           1         1         1       1            1           <none>          83s\n"
msgstr ""

#. type: delimited block -
#: asciidoc/guides/air-gapped-eib-deployments.adoc:103
#, no-wrap
msgid ""
"NAME                                       READY   UP-TO-DATE   AVAILABLE   AGE\n"
"deployment.apps/csi-attacher               3/3     3            3           35s\n"
"deployment.apps/csi-provisioner            3/3     3            3           35s\n"
"deployment.apps/csi-resizer                3/3     3            3           35s\n"
"deployment.apps/csi-snapshotter            3/3     3            3           35s\n"
"deployment.apps/longhorn-driver-deployer   1/1     1            1           83s\n"
"deployment.apps/longhorn-ui                2/2     2            2           83s\n"
msgstr ""

#. type: delimited block -
#: asciidoc/guides/air-gapped-eib-deployments.adoc:104
#, no-wrap
msgid ""
"NAME                                               DESIRED   CURRENT   READY   AGE\n"
"replicaset.apps/csi-attacher-5c4bfdcf59            3         3         3       35s\n"
"replicaset.apps/csi-provisioner-667796df57         3         3         3       35s\n"
"replicaset.apps/csi-resizer-694f8f5f64             3         3         3       35s\n"
"replicaset.apps/csi-snapshotter-959b69d4b          3         3         3       35s\n"
"replicaset.apps/longhorn-driver-deployer-9f4fc86   1         1         1       83s\n"
"replicaset.apps/longhorn-ui-5f4b7bbf69             2         2         2       83s\n"
msgstr ""

#. type: Title ==
#: asciidoc/guides/air-gapped-eib-deployments.adoc:105
#, no-wrap
msgid "KubeVirt and CDI Installation [[kubevirt-install]]"
msgstr ""

#. type: Plain text
#: asciidoc/guides/air-gapped-eib-deployments.adoc:106
msgid ""
"The Helm charts for both KubeVirt and CDI are only installing their "
"respective operators.  It is up to the operators to deploy the rest of the "
"systems which means we will have to include all necessary container images "
"in our definition file. Let's create it:"
msgstr ""

#. type: delimited block -
#: asciidoc/guides/air-gapped-eib-deployments.adoc:107
#, no-wrap
msgid ""
"apiVersion: 1.0\n"
"image:\n"
"  imageType: iso\n"
"  arch: x86_64\n"
"  baseImage: slemicro.iso\n"
"  outputImageName: eib-image.iso\n"
"operatingSystem:\n"
"  users:\n"
"    - username: root\n"
"      encryptedPassword: $6$jHugJNNd3HElGsUZ$eodjVe4te5ps44SVcWshdfWizrP.xAyd71CVEXazBJ/.v799/WRCBXxfYmunlBO2yp1hm/zb4r8EmnrrNCF.P/\n"
"kubernetes:\n"
"  version: v1.28.9+rke2r1\n"
"  helm:\n"
"    charts:\n"
"      - name: kubevirt-chart\n"
"        repositoryName: suse-edge\n"
"        version: 0.2.4\n"
"        targetNamespace: kubevirt-system\n"
"        createNamespace: true\n"
"        installationNamespace: kube-system\n"
"      - name: cdi-chart\n"
"        repositoryName: suse-edge\n"
"        version: 0.2.3\n"
"        targetNamespace: cdi-system\n"
"        createNamespace: true\n"
"        installationNamespace: kube-system\n"
"    repositories:\n"
"      - name: suse-edge\n"
"        url: oci://registry.suse.com/edge\n"
"embeddedArtifactRegistry:\n"
"  images:\n"
"    - name: registry.suse.com/suse/sles/15.5/cdi-uploadproxy:1.58.0-150500.6.12.1\n"
"    - name: registry.suse.com/suse/sles/15.5/cdi-uploadserver:1.58.0-150500.6.12.1\n"
"    - name: registry.suse.com/suse/sles/15.5/cdi-apiserver:1.58.0-150500.6.12.1\n"
"    - name: registry.suse.com/suse/sles/15.5/cdi-controller:1.58.0-150500.6.12.1\n"
"    - name: registry.suse.com/suse/sles/15.5/cdi-importer:1.58.0-150500.6.12.1\n"
"    - name: registry.suse.com/suse/sles/15.5/cdi-cloner:1.58.0-150500.6.12.1\n"
"    - name: registry.suse.com/suse/sles/15.5/virt-api:1.1.1-150500.8.12.1\n"
"    - name: registry.suse.com/suse/sles/15.5/virt-controller:1.1.1-150500.8.12.1\n"
"    - name: registry.suse.com/suse/sles/15.5/virt-launcher:1.1.1-150500.8.12.1\n"
"    - name: registry.suse.com/suse/sles/15.5/virt-handler:1.1.1-150500.8.12.1\n"
"    - name: registry.suse.com/suse/sles/15.5/virt-exportproxy:1.1.1-150500.8.12.1\n"
"    - name: registry.suse.com/suse/sles/15.5/virt-exportserver:1.1.1-150500.8.12.1\n"
msgstr ""

#. type: delimited block -
#: asciidoc/guides/air-gapped-eib-deployments.adoc:111
#, no-wrap
msgid ""
"Generating image customization components...\n"
"Identifier ................... [SUCCESS]\n"
"Custom Files ................. [SKIPPED]\n"
"Time ......................... [SKIPPED]\n"
"Network ...................... [SUCCESS]\n"
"Groups ....................... [SKIPPED]\n"
"Users ........................ [SUCCESS]\n"
"Proxy ........................ [SKIPPED]\n"
"Rpm .......................... [SKIPPED]\n"
"Systemd ...................... [SKIPPED]\n"
"Elemental .................... [SKIPPED]\n"
"Suma ......................... [SKIPPED]\n"
"Populating Embedded Artifact Registry... 100% (13/13, 6 it/min)\n"
"Embedded Artifact Registry ... [SUCCESS]\n"
"Keymap ....................... [SUCCESS]\n"
"Configuring Kubernetes component...\n"
"The Kubernetes CNI is not explicitly set, defaulting to 'cilium'.\n"
"Downloading file: rke2_installer.sh\n"
"Kubernetes ................... [SUCCESS]\n"
"Certificates ................. [SKIPPED]\n"
"Building ISO image...\n"
"Kernel Params ................ [SKIPPED]\n"
"Image build complete!\n"
msgstr ""

#. type: Plain text
#: asciidoc/guides/air-gapped-eib-deployments.adoc:112
msgid ""
"Once a node using the built image is provisioned, we can verify the "
"installation of both KubeVirt and CDI."
msgstr ""

#. type: Plain text
#: asciidoc/guides/air-gapped-eib-deployments.adoc:113
msgid "Verify KubeVirt:"
msgstr ""

#. type: delimited block -
#: asciidoc/guides/air-gapped-eib-deployments.adoc:114
#, no-wrap
msgid "/var/lib/rancher/rke2/bin/kubectl get all -n kubevirt-system --kubeconfig /etc/rancher/rke2/rke2.yaml\n"
msgstr ""

#. type: delimited block -
#: asciidoc/guides/air-gapped-eib-deployments.adoc:116
#, no-wrap
msgid ""
"NAME                                   READY   STATUS    RESTARTS   AGE\n"
"pod/virt-api-7c45477984-z226r          1/1     Running   0          2m4s\n"
"pod/virt-controller-664d9986b5-8p8gm   1/1     Running   0          98s\n"
"pod/virt-controller-664d9986b5-v2n4h   1/1     Running   0          98s\n"
"pod/virt-handler-2fx8c                 1/1     Running   0          98s\n"
"pod/virt-operator-5cf69867dc-hz5s8     1/1     Running   0          2m30s\n"
"pod/virt-operator-5cf69867dc-kp266     1/1     Running   0          2m30s\n"
msgstr ""

#. type: delimited block -
#: asciidoc/guides/air-gapped-eib-deployments.adoc:117
#, no-wrap
msgid ""
"NAME                                  TYPE        CLUSTER-IP      EXTERNAL-IP   PORT(S)   AGE\n"
"service/kubevirt-operator-webhook     ClusterIP   10.43.210.235   <none>        443/TCP   2m7s\n"
"service/kubevirt-prometheus-metrics   ClusterIP   None            <none>        443/TCP   2m7s\n"
"service/virt-api                      ClusterIP   10.43.226.140   <none>        443/TCP   2m7s\n"
"service/virt-exportproxy              ClusterIP   10.43.213.201   <none>        443/TCP   2m7s\n"
msgstr ""

#. type: delimited block -
#: asciidoc/guides/air-gapped-eib-deployments.adoc:118
#, no-wrap
msgid ""
"NAME                          DESIRED   CURRENT   READY   UP-TO-DATE   AVAILABLE   NODE SELECTOR            AGE\n"
"daemonset.apps/virt-handler   1         1         1       1            1           kubernetes.io/os=linux   98s\n"
msgstr ""

#. type: delimited block -
#: asciidoc/guides/air-gapped-eib-deployments.adoc:119
#, no-wrap
msgid ""
"NAME                              READY   UP-TO-DATE   AVAILABLE   AGE\n"
"deployment.apps/virt-api          1/1     1            1           2m4s\n"
"deployment.apps/virt-controller   2/2     2            2           98s\n"
"deployment.apps/virt-operator     2/2     2            2           2m30s\n"
msgstr ""

#. type: delimited block -
#: asciidoc/guides/air-gapped-eib-deployments.adoc:120
#, no-wrap
msgid ""
"NAME                                         DESIRED   CURRENT   READY   AGE\n"
"replicaset.apps/virt-api-7c45477984          1         1         1       2m4s\n"
"replicaset.apps/virt-controller-664d9986b5   2         2         2       98s\n"
"replicaset.apps/virt-operator-5cf69867dc     2         2         2       2m30s\n"
msgstr ""

#. type: Plain text
#: asciidoc/guides/air-gapped-eib-deployments.adoc:121
msgid "Verify CDI:"
msgstr ""

#. type: delimited block -
#: asciidoc/guides/air-gapped-eib-deployments.adoc:122
#, no-wrap
msgid "/var/lib/rancher/rke2/bin/kubectl get all -n cdi-system --kubeconfig /etc/rancher/rke2/rke2.yaml\n"
msgstr ""

#. type: delimited block -
#: asciidoc/guides/air-gapped-eib-deployments.adoc:124
#, no-wrap
msgid ""
"NAME                                   READY   STATUS    RESTARTS   AGE\n"
"pod/cdi-apiserver-db465b888-mdsmm      1/1     Running   0          3m6s\n"
"pod/cdi-deployment-56c7d74995-vt9sw    1/1     Running   0          3m6s\n"
"pod/cdi-operator-55c74f4b86-gkt58      1/1     Running   0          3m10s\n"
"pod/cdi-uploadproxy-7d7b94b968-msg2h   1/1     Running   0          3m6s\n"
msgstr ""

#. type: delimited block -
#: asciidoc/guides/air-gapped-eib-deployments.adoc:125
#, no-wrap
msgid ""
"NAME                             TYPE        CLUSTER-IP      EXTERNAL-IP   PORT(S)    AGE\n"
"service/cdi-api                  ClusterIP   10.43.161.135   <none>        443/TCP    3m6s\n"
"service/cdi-prometheus-metrics   ClusterIP   10.43.161.159   <none>        8080/TCP   3m6s\n"
"service/cdi-uploadproxy          ClusterIP   10.43.25.136    <none>        443/TCP    3m6s\n"
msgstr ""

#. type: delimited block -
#: asciidoc/guides/air-gapped-eib-deployments.adoc:126
#, no-wrap
msgid ""
"NAME                              READY   UP-TO-DATE   AVAILABLE   AGE\n"
"deployment.apps/cdi-apiserver     1/1     1            1           3m6s\n"
"deployment.apps/cdi-deployment    1/1     1            1           3m6s\n"
"deployment.apps/cdi-operator      1/1     1            1           3m10s\n"
"deployment.apps/cdi-uploadproxy   1/1     1            1           3m6s\n"
msgstr ""

#. type: delimited block -
#: asciidoc/guides/air-gapped-eib-deployments.adoc:127
#, no-wrap
msgid ""
"NAME                                         DESIRED   CURRENT   READY   AGE\n"
"replicaset.apps/cdi-apiserver-db465b888      1         1         1       3m6s\n"
"replicaset.apps/cdi-deployment-56c7d74995    1         1         1       3m6s\n"
"replicaset.apps/cdi-operator-55c74f4b86      1         1         1       3m10s\n"
"replicaset.apps/cdi-uploadproxy-7d7b94b968   1         1         1       3m6s\n"
msgstr ""

#. type: Title ==
#: asciidoc/guides/air-gapped-eib-deployments.adoc:128
#, no-wrap
msgid "Troubleshooting"
msgstr ""

#. type: Plain text
#: asciidoc/guides/air-gapped-eib-deployments.adoc:129
msgid ""
"If you run into any issues while building the images or are looking to "
"further test and debug the process, please refer to the https://github.com/"
"suse-edge/edge-image-builder/tree/release-1.0/docs[upstream documentation]."
msgstr ""

#. type: Title =
#: asciidoc/guides/kiwi-images.adoc:1
#, no-wrap
msgid "Building Updated SLE Micro Images with Kiwi"
msgstr ""

#. type: Plain text
#: asciidoc/guides/kiwi-images.adoc:2
msgid ""
"In this section, we'll walk you through the creation of updated SLE Micro "
"images that can be used as eith"
msgstr ""

#. type: Title ==
#: asciidoc/guides/kiwi-images.adoc:3 asciidoc/guides/metallb-k3s.adoc:4
#, no-wrap
msgid "Why use this method"
msgstr ""

#. type: Plain text
#: asciidoc/guides/kiwi-images.adoc:5
msgid ""
"A SUSE Linux Micro 6.0 (for Edge 3.1) system that has been registered to "
"SUSE Customer Centre (SCC), running your desired output architecture."
msgstr ""

#. type: Plain text
#: asciidoc/guides/kiwi-images.adoc:6
msgid ""
"An internet connection that can be used to pull packages during the image "
"build process that doesn't require a proxy server."
msgstr ""

#. type: Plain text
#: asciidoc/guides/kiwi-images.adoc:7
msgid ""
"Access to the root user, as the build process requires privileged access and "
"the ability to disable SELinux."
msgstr ""

#. type: delimited block =
#: asciidoc/guides/kiwi-images.adoc:8 asciidoc/guides/metallb-k3s.adoc:18
msgid ""
"K3S comes with its own service load balancer named Klipper. You https://"
"metallb.universe.tf/configuration/k3s/[need to disable it to run MetalLB]. "
"To disable Klipper, K3s needs to be installed using the `--"
"disable=servicelb` flag."
msgstr ""

#. type: Plain text
#: asciidoc/guides/kiwi-images.adoc:9 asciidoc/guides/metallb-k3s.adoc:19
#: asciidoc/guides/metallb-kube-api.adoc:8
msgid "Helm"
msgstr ""

#. type: Plain text
#: asciidoc/guides/kiwi-images.adoc:10 asciidoc/guides/metallb-k3s.adoc:20
msgid ""
"A couple of free IPs in our network range. In this case, "
"`192.168.122.10-192.168.122.12`"
msgstr ""

#. type: Title ===
#: asciidoc/guides/kiwi-images.adoc:11 asciidoc/guides/metallb-k3s.adoc:21
#, no-wrap
msgid "Deployment"
msgstr ""

#. type: Plain text
#: asciidoc/guides/kiwi-images.adoc:12 asciidoc/guides/metallb-k3s.adoc:22
msgid "MetalLB leverages Helm (and other methods as well), so:"
msgstr ""

#. type: delimited block -
#: asciidoc/guides/kiwi-images.adoc:13
#, no-wrap
msgid "$ sudo setenforce 0\n"
msgstr ""

#. type: delimited block -
#: asciidoc/guides/kiwi-images.adoc:14
#, no-wrap
msgid "$ mkdir -p output\n"
msgstr ""

#. type: delimited block -
#: asciidoc/guides/kiwi-images.adoc:15
#, no-wrap
msgid "$ podman pull registry.opensuse.org/home/roxenham/micro6sdk/containers/edge/micro6sdk/kiwi-sdk:1.0.0\n"
msgstr ""

#. type: delimited block -
#: asciidoc/guides/kiwi-images.adoc:16
#, no-wrap
msgid ""
"$ podman run --privileged -v /etc/zypp/repos.d:/micro-sdk/repos/ -v ./output:/tmp/output -it registry.opensuse.org/home/roxenham/micro6sdk/containers/edge/micro6sdk/kiwi-sdk:1.0.0 build-image\n"
"(...)\n"
msgstr ""

#. type: delimited block -
#: asciidoc/guides/kiwi-images.adoc:17
#, no-wrap
msgid ""
"$ podman run --privileged -v /etc/zypp/repos.d:/micro-sdk/repos/ -v ./output:/tmp/output -it registry.opensuse.org/home/roxenham/micro6sdk/containers/edge/micro6sdk/kiwi-sdk:1.0.0 build-image -p Default-SelfInstall\n"
"(...)\n"
msgstr ""

#. type: Plain text
#: asciidoc/guides/kiwi-images.adoc:18
msgid ""
"When the image build process has completed, you will find your desired "
"images in the local `output` directory, for example:"
msgstr ""

#. type: delimited block -
#: asciidoc/guides/kiwi-images.adoc:19
#, no-wrap
msgid ""
"# ls -1 output/\n"
"SLE-Micro.x86_64-6.0.changes\n"
"SLE-Micro.x86_64-6.0.packages\n"
"SLE-Micro.x86_64-6.0.raw\n"
"SLE-Micro.x86_64-6.0.verified\n"
"build\n"
"kiwi.result\n"
"kiwi.result.json\n"
msgstr ""

#. type: delimited block =
#: asciidoc/guides/kiwi-images.adoc:20
msgid ""
"If you want to rebuild the image, you'll need to empty the output directory, "
"or Kiwi will error due to existing output files:"
msgstr ""

#. type: delimited block -
#: asciidoc/guides/kiwi-images.adoc:21
#, no-wrap
msgid "$ rm -rf output/*\n"
msgstr ""

#. type: Title ==
#: asciidoc/guides/metallb-k3s.adoc:1 asciidoc/guides/metallb-k3s.adoc:13
#, no-wrap
msgid "MetalLB on K3s (using L2)"
msgstr ""

#. type: Plain text
#: asciidoc/guides/metallb-k3s.adoc:2
msgid ""
"MetalLB is a load-balancer implementation for bare-metal Kubernetes "
"clusters, using standard routing protocols."
msgstr ""

#. type: Plain text
#: asciidoc/guides/metallb-k3s.adoc:3
msgid "In this guide, we demonstrate how to deploy MetalLB in layer 2 mode."
msgstr ""

#. type: Plain text
#: asciidoc/guides/metallb-k3s.adoc:5
msgid ""
"MetalLB is a compelling choice for load balancing in bare-metal Kubernetes "
"clusters for several reasons:"
msgstr ""

#. type: Plain text
#: asciidoc/guides/metallb-k3s.adoc:6
msgid ""
"Native Integration with Kubernetes: MetalLB seamlessly integrates with "
"Kubernetes, making it easy to deploy and manage using familiar Kubernetes "
"tools and practices."
msgstr ""

#. type: Plain text
#: asciidoc/guides/metallb-k3s.adoc:7
msgid ""
"Bare-Metal Compatibility: Unlike cloud-based load balancers, MetalLB is "
"designed specifically for on-premises deployments where traditional load "
"balancers might not be available or feasible."
msgstr ""

#. type: Plain text
#: asciidoc/guides/metallb-k3s.adoc:8
msgid ""
"Supports Multiple Protocols: MetalLB supports both Layer 2 and BGP (Border "
"Gateway Protocol) modes, providing flexibility for different network "
"architectures and requirements."
msgstr ""

#. type: Plain text
#: asciidoc/guides/metallb-k3s.adoc:9
msgid ""
"High Availability: By distributing load-balancing responsibilities across "
"multiple nodes, MetalLB ensures high availability and reliability for your "
"services."
msgstr ""

#. type: Plain text
#: asciidoc/guides/metallb-k3s.adoc:10
msgid ""
"Scalability: MetalLB can handle large-scale deployments, scaling alongside "
"your Kubernetes cluster to meet increasing demand."
msgstr ""

#. type: Plain text
#: asciidoc/guides/metallb-k3s.adoc:11
msgid ""
"In layer 2 mode, one node assumes the responsibility of advertising a "
"service to the local network. From the network’s perspective, it simply "
"looks like that machine has multiple IP addresses assigned to its network "
"interface."
msgstr ""

#. type: Plain text
#: asciidoc/guides/metallb-k3s.adoc:12
msgid ""
"The major advantage of the layer 2 mode is its universality: it works on any "
"Ethernet network, with no special hardware required, not even fancy routers."
msgstr ""

#. type: Plain text
#: asciidoc/guides/metallb-k3s.adoc:14
msgid ""
"In this quick start, L2 mode will be used, so it means we do not need any "
"special network gear but just a couple of free IPs in our network range, "
"ideally outside of the DHCP pool so they are not assigned."
msgstr ""

#. type: Plain text
#: asciidoc/guides/metallb-k3s.adoc:15
msgid ""
"In this example, our DHCP pool is `192.168.122.100-192.168.122.200` (yes, "
"three IPs, see <<traefik-and-metallb,Traefik and MetalLB>> for the reason of "
"the extra IP) for a `192.168.122.0/24` network, so anything outside this "
"range is OK (besides the gateway and other hosts that can be already "
"running!)"
msgstr ""

#. type: Plain text
#: asciidoc/guides/metallb-k3s.adoc:17
msgid "A K3s cluster where MetalLB is going to be deployed."
msgstr ""

#. type: delimited block -
#: asciidoc/guides/metallb-k3s.adoc:23
#, no-wrap
msgid ""
"helm install \\\n"
"  metallb oci://registry.suse.com/edge/metallb-chart \\\n"
"  --namespace metallb-system \\\n"
"  --create-namespace\n"
msgstr ""

#. type: delimited block -
#: asciidoc/guides/metallb-k3s.adoc:24
#, no-wrap
msgid ""
"while ! kubectl wait --for condition=ready -n metallb-system $(kubectl get\\\n"
" pods -n metallb-system -l app.kubernetes.io/component=controller -o name)\\\n"
" --timeout=10s; do\n"
" sleep 2\n"
"done\n"
msgstr ""

#. type: Title ===
#: asciidoc/guides/metallb-k3s.adoc:25
#, no-wrap
msgid "Configuration"
msgstr ""

#. type: Plain text
#: asciidoc/guides/metallb-k3s.adoc:26
msgid ""
"At this point, the installation is completed. Now it is time to https://"
"metallb.universe.tf/configuration/[configure] using our example values:"
msgstr ""

#. type: delimited block -
#: asciidoc/guides/metallb-k3s.adoc:27
#, no-wrap
msgid ""
"cat <<-EOF | kubectl apply -f -\n"
"apiVersion: metallb.io/v1beta1\n"
"kind: IPAddressPool\n"
"metadata:\n"
"  name: ip-pool\n"
"  namespace: metallb-system\n"
"spec:\n"
"  addresses:\n"
"  - 192.168.122.10/32\n"
"  - 192.168.122.11/32\n"
"  - 192.168.122.12/32\n"
"EOF\n"
msgstr ""

#. type: delimited block -
#: asciidoc/guides/metallb-k3s.adoc:28
#, no-wrap
msgid ""
"cat <<-EOF | kubectl apply -f -\n"
"apiVersion: metallb.io/v1beta1\n"
"kind: L2Advertisement\n"
"metadata:\n"
"  name: ip-pool-l2-adv\n"
"  namespace: metallb-system\n"
"spec:\n"
"  ipAddressPools:\n"
"  - ip-pool\n"
"EOF\n"
msgstr ""

#. type: Plain text
#: asciidoc/guides/metallb-k3s.adoc:29
msgid ""
"Now, it is ready to be used. You can customize many things for L2 mode, such "
"as:"
msgstr ""

#. type: Plain text
#: asciidoc/guides/metallb-k3s.adoc:30
msgid ""
"https://metallb.universe.tf/usage/#ipv6-and-dual-stack-services[IPv6 And "
"Dual Stack Services]"
msgstr ""

#. type: Plain text
#: asciidoc/guides/metallb-k3s.adoc:31
msgid ""
"https://metallb.universe.tf/configuration/"
"_advanced_ipaddresspool_configuration/#controlling-automatic-address-"
"allocation[Control automatic address allocation]"
msgstr ""

#. type: Plain text
#: asciidoc/guides/metallb-k3s.adoc:32
msgid ""
"https://metallb.universe.tf/configuration/"
"_advanced_ipaddresspool_configuration/#reduce-scope-of-address-allocation-to-"
"specific-namespace-and-service[Reduce the scope of address allocation to "
"specific namespaces and services]"
msgstr ""

#. type: Plain text
#: asciidoc/guides/metallb-k3s.adoc:33
msgid ""
"https://metallb.universe.tf/configuration/_advanced_l2_configuration/"
"#limiting-the-set-of-nodes-where-the-service-can-be-announced-from[Limiting "
"the set of nodes where the service can be announced from]"
msgstr ""

#. type: Plain text
#: asciidoc/guides/metallb-k3s.adoc:34
msgid ""
"https://metallb.universe.tf/configuration/_advanced_l2_configuration/"
"#specify-network-interfaces-that-lb-ip-can-be-announced-from[Specify network "
"interfaces that LB IP can be announced from]"
msgstr ""

#. type: Plain text
#: asciidoc/guides/metallb-k3s.adoc:35
msgid ""
"And a lot more for https://metallb.universe.tf/configuration/"
"_advanced_bgp_configuration/[BGP]."
msgstr ""

#. type: Title ===
#: asciidoc/guides/metallb-k3s.adoc:36
#, no-wrap
msgid "Traefik and MetalLB"
msgstr ""

#. type: Plain text
#: asciidoc/guides/metallb-k3s.adoc:37
msgid ""
"Traefik is deployed by default with K3s (https://docs.k3s.io/"
"networking#traefik-ingress-controller[it can be disabled] with `--"
"disable=traefik`) and it is by default exposed as `LoadBalancer` (to be used "
"with Klipper). However, as Klipper needs to be disabled, Traefik service for "
"ingress is still a `LoadBalancer` type. So at the moment of deploying "
"MetalLB, the first IP will be assigned automatically to Traefik Ingress."
msgstr ""

#. type: delimited block -
#: asciidoc/guides/metallb-k3s.adoc:38
#, no-wrap
msgid ""
"# Before deploying MetalLB\n"
"kubectl get svc -n kube-system traefik\n"
"NAME      TYPE           CLUSTER-IP     EXTERNAL-IP   PORT(S)                      AGE\n"
"traefik   LoadBalancer   10.43.44.113   <pending>     80:31093/TCP,443:32095/TCP   28s\n"
"# After deploying MetalLB\n"
"kubectl get svc -n kube-system traefik\n"
"NAME      TYPE           CLUSTER-IP     EXTERNAL-IP      PORT(S)                      AGE\n"
"traefik   LoadBalancer   10.43.44.113   192.168.122.10   80:31093/TCP,443:32095/TCP   3m10s\n"
msgstr ""

#. type: Plain text
#: asciidoc/guides/metallb-k3s.adoc:39
msgid "This will be applied <<ingress-with-metallb,later>> in the process."
msgstr ""

#. type: Title ===
#: asciidoc/guides/metallb-k3s.adoc:40
#, no-wrap
msgid "Usage"
msgstr ""

#. type: Plain text
#: asciidoc/guides/metallb-k3s.adoc:41
msgid "Let us create an example deployment:"
msgstr ""

#. type: delimited block -
#: asciidoc/guides/metallb-k3s.adoc:42
#, no-wrap
msgid ""
"cat <<- EOF | kubectl apply -f -\n"
"---\n"
msgstr ""

#. type: delimited block -
#: asciidoc/guides/metallb-k3s.adoc:43
#, no-wrap
msgid ""
"apiVersion: v1\n"
"kind: Namespace\n"
"metadata:\n"
"  name: hello-kubernetes\n"
"---\n"
msgstr ""

#. type: delimited block -
#: asciidoc/guides/metallb-k3s.adoc:44
#, no-wrap
msgid ""
"apiVersion: v1\n"
"kind: ServiceAccount\n"
"metadata:\n"
"  name: hello-kubernetes\n"
"  namespace: hello-kubernetes\n"
"  labels:\n"
"    app.kubernetes.io/name: hello-kubernetes\n"
"---\n"
msgstr ""

#. type: delimited block -
#: asciidoc/guides/metallb-k3s.adoc:45
#, no-wrap
msgid ""
"apiVersion: apps/v1\n"
"kind: Deployment\n"
"metadata:\n"
"  name: hello-kubernetes\n"
"  namespace: hello-kubernetes\n"
"  labels:\n"
"    app.kubernetes.io/name: hello-kubernetes\n"
"spec:\n"
"  replicas: 2\n"
"  selector:\n"
"    matchLabels:\n"
"      app.kubernetes.io/name: hello-kubernetes\n"
"  template:\n"
"    metadata:\n"
"      labels:\n"
"        app.kubernetes.io/name: hello-kubernetes\n"
"    spec:\n"
"      serviceAccountName: hello-kubernetes\n"
"      containers:\n"
"        - name: hello-kubernetes\n"
"          image: \"paulbouwer/hello-kubernetes:1.10\"\n"
"          imagePullPolicy: IfNotPresent\n"
"          ports:\n"
"            - name: http\n"
"              containerPort: 8080\n"
"              protocol: TCP\n"
"          livenessProbe:\n"
"            httpGet:\n"
"              path: /\n"
"              port: http\n"
"          readinessProbe:\n"
"            httpGet:\n"
"              path: /\n"
"              port: http\n"
"          env:\n"
"          - name: HANDLER_PATH_PREFIX\n"
"            value: \"\"\n"
"          - name: RENDER_PATH_PREFIX\n"
"            value: \"\"\n"
"          - name: KUBERNETES_NAMESPACE\n"
"            valueFrom:\n"
"              fieldRef:\n"
"                fieldPath: metadata.namespace\n"
"          - name: KUBERNETES_POD_NAME\n"
"            valueFrom:\n"
"              fieldRef:\n"
"                fieldPath: metadata.name\n"
"          - name: KUBERNETES_NODE_NAME\n"
"            valueFrom:\n"
"              fieldRef:\n"
"                fieldPath: spec.nodeName\n"
"          - name: CONTAINER_IMAGE\n"
"            value: \"paulbouwer/hello-kubernetes:1.10\"\n"
"EOF\n"
msgstr ""

#. type: Plain text
#: asciidoc/guides/metallb-k3s.adoc:46
msgid "And finally, the service:"
msgstr ""

#. type: delimited block -
#: asciidoc/guides/metallb-k3s.adoc:47
#, no-wrap
msgid ""
"cat <<- EOF | kubectl apply -f -\n"
"apiVersion: v1\n"
"kind: Service\n"
"metadata:\n"
"  name: hello-kubernetes\n"
"  namespace: hello-kubernetes\n"
"  labels:\n"
"    app.kubernetes.io/name: hello-kubernetes\n"
"spec:\n"
"  type: LoadBalancer\n"
"  ports:\n"
"    - port: 80\n"
"      targetPort: http\n"
"      protocol: TCP\n"
"      name: http\n"
"  selector:\n"
"    app.kubernetes.io/name: hello-kubernetes\n"
"EOF\n"
msgstr ""

#. type: Plain text
#: asciidoc/guides/metallb-k3s.adoc:48
msgid "Let us see it in action:"
msgstr ""

#. type: delimited block -
#: asciidoc/guides/metallb-k3s.adoc:49
#, no-wrap
msgid ""
"kubectl get svc -n hello-kubernetes\n"
"NAME               TYPE           CLUSTER-IP     EXTERNAL-IP      PORT(S)        AGE\n"
"hello-kubernetes   LoadBalancer   10.43.127.75   192.168.122.11   80:31461/TCP   8s\n"
msgstr ""

#. type: delimited block -
#: asciidoc/guides/metallb-k3s.adoc:50
#, no-wrap
msgid ""
"curl http://192.168.122.11\n"
"<!DOCTYPE html>\n"
"<html>\n"
"<head>\n"
"    <title>Hello Kubernetes!</title>\n"
"    <link rel=\"stylesheet\" type=\"text/css\" href=\"/css/main.css\">\n"
"    <link rel=\"stylesheet\" href=\"https://fonts.googleapis.com/css?family=Ubuntu:300\" >\n"
"</head>\n"
"<body>\n"
msgstr ""

#. type: delimited block -
#: asciidoc/guides/metallb-k3s.adoc:51
#, no-wrap
msgid ""
"  <div class=\"main\">\n"
"    <img src=\"/images/kubernetes.png\"/>\n"
"    <div class=\"content\">\n"
"      <div id=\"message\">\n"
"  Hello world!\n"
"</div>\n"
"<div id=\"info\">\n"
"  <table>\n"
"    <tr>\n"
"      <th>namespace:</th>\n"
"      <td>hello-kubernetes</td>\n"
"    </tr>\n"
"    <tr>\n"
"      <th>pod:</th>\n"
"      <td>hello-kubernetes-7c8575c848-2c6ps</td>\n"
"    </tr>\n"
"    <tr>\n"
"      <th>node:</th>\n"
"      <td>allinone (Linux 5.14.21-150400.24.46-default)</td>\n"
"    </tr>\n"
"  </table>\n"
"</div>\n"
"<div id=\"footer\">\n"
"  paulbouwer/hello-kubernetes:1.10 (linux/amd64)\n"
"</div>\n"
"    </div>\n"
"  </div>\n"
msgstr ""

#. type: delimited block -
#: asciidoc/guides/metallb-k3s.adoc:52 asciidoc/guides/metallb-k3s.adoc:59
#, no-wrap
msgid ""
"</body>\n"
"</html>\n"
msgstr ""

#. type: Title ==
#: asciidoc/guides/metallb-k3s.adoc:53
#, no-wrap
msgid "Ingress with MetalLB"
msgstr ""

#. type: Plain text
#: asciidoc/guides/metallb-k3s.adoc:54
msgid ""
"As Traefik is already serving as an ingress controller, we can expose any "
"HTTP/HTTPS traffic via an `Ingress` object such as:"
msgstr ""

#. type: delimited block -
#: asciidoc/guides/metallb-k3s.adoc:55
#, no-wrap
msgid ""
"IP=$(kubectl get svc -n kube-system traefik -o jsonpath=\"{.status.loadBalancer.ingress[0].ip}\")\n"
"cat <<- EOF | kubectl apply -f -\n"
"apiVersion: networking.k8s.io/v1\n"
"kind: Ingress\n"
"metadata:\n"
"  name: hello-kubernetes-ingress\n"
"  namespace: hello-kubernetes\n"
"spec:\n"
"  rules:\n"
"  - host: hellok3s.${IP}.sslip.io\n"
"    http:\n"
"      paths:\n"
"        - path: \"/\"\n"
"          pathType: Prefix\n"
"          backend:\n"
"            service:\n"
"              name: hello-kubernetes\n"
"              port:\n"
"                name: http\n"
"EOF\n"
msgstr ""

#. type: Plain text
#: asciidoc/guides/metallb-k3s.adoc:56
msgid "And then:"
msgstr ""

#. type: delimited block -
#: asciidoc/guides/metallb-k3s.adoc:57
#, no-wrap
msgid ""
"curl http://hellok3s.${IP}.sslip.io\n"
"<!DOCTYPE html>\n"
"<html>\n"
"<head>\n"
"    <title>Hello Kubernetes!</title>\n"
"    <link rel=\"stylesheet\" type=\"text/css\" href=\"/css/main.css\">\n"
"    <link rel=\"stylesheet\" href=\"https://fonts.googleapis.com/css?family=Ubuntu:300\" >\n"
"</head>\n"
"<body>\n"
msgstr ""

#. type: delimited block -
#: asciidoc/guides/metallb-k3s.adoc:58
#, no-wrap
msgid ""
"  <div class=\"main\">\n"
"    <img src=\"/images/kubernetes.png\"/>\n"
"    <div class=\"content\">\n"
"      <div id=\"message\">\n"
"  Hello world!\n"
"</div>\n"
"<div id=\"info\">\n"
"  <table>\n"
"    <tr>\n"
"      <th>namespace:</th>\n"
"      <td>hello-kubernetes</td>\n"
"    </tr>\n"
"    <tr>\n"
"      <th>pod:</th>\n"
"      <td>hello-kubernetes-7c8575c848-fvqm2</td>\n"
"    </tr>\n"
"    <tr>\n"
"      <th>node:</th>\n"
"      <td>allinone (Linux 5.14.21-150400.24.46-default)</td>\n"
"    </tr>\n"
"  </table>\n"
"</div>\n"
"<div id=\"footer\">\n"
"  paulbouwer/hello-kubernetes:1.10 (linux/amd64)\n"
"</div>\n"
"    </div>\n"
"  </div>\n"
msgstr ""

#. type: Plain text
#: asciidoc/guides/metallb-k3s.adoc:60
msgid "Also, to verify that MetalLB works correctly, `arping` can be used as:"
msgstr ""

#. type: Plain text
#: asciidoc/guides/metallb-k3s.adoc:61
msgid "`+arping hellok3s.${IP}.sslip.io+`"
msgstr ""

#. type: Plain text
#: asciidoc/guides/metallb-k3s.adoc:62
msgid "Expected result:"
msgstr ""

#. type: delimited block -
#: asciidoc/guides/metallb-k3s.adoc:63
#, no-wrap
msgid ""
"ARPING 192.168.64.210\n"
"60 bytes from 92:12:36:00:d3:58 (192.168.64.210): index=0 time=1.169 msec\n"
"60 bytes from 92:12:36:00:d3:58 (192.168.64.210): index=1 time=2.992 msec\n"
"60 bytes from 92:12:36:00:d3:58 (192.168.64.210): index=2 time=2.884 msec\n"
msgstr ""

#. type: Plain text
#: asciidoc/guides/metallb-k3s.adoc:64
msgid "In the example above, the traffic flows as follows:"
msgstr ""

#. type: Plain text
#: asciidoc/guides/metallb-k3s.adoc:65
msgid "`+hellok3s.${IP}.sslip.io+` is resolved to the actual IP."
msgstr ""

#. type: Plain text
#: asciidoc/guides/metallb-k3s.adoc:66
msgid "Then the traffic is handled by the `metallb-speaker` pod."
msgstr ""

#. type: Plain text
#: asciidoc/guides/metallb-k3s.adoc:67
msgid "`metallb-speaker` redirects the traffic to the `traefik` controller."
msgstr ""

#. type: Plain text
#: asciidoc/guides/metallb-k3s.adoc:68
msgid ""
"Finally, Traefik forwards the request to the `hello-kubernetes` service."
msgstr ""

#. type: Title =
#: asciidoc/guides/metallb-kube-api.adoc:1
#, no-wrap
msgid "MetalLB in front of the Kubernetes API server"
msgstr ""

#. type: Plain text
#: asciidoc/guides/metallb-kube-api.adoc:2
msgid ""
"This guide demonstrates using a MetalLB service to expose the K3s API "
"externally on an HA K3s cluster with three control-plane nodes.  To achieve "
"this, a Kubernetes Service of type `LoadBalancer` and Endpoints will be "
"manually created. The Endpoints keep the IPs of all control plane nodes "
"available in the cluster.  For the Endpoint to be continuously synchronized "
"with the events occurring in the cluster (adding/removing a node or a node "
"goes offline), the https://github.com/suse-edge/endpoint-copier-"
"operator[Endpoint Copier Operator] will be deployed. The operator monitors "
"the events happening in the default `kubernetes` Endpoint and updates the "
"managed one automatically to keep them in sync.  Since the managed Service "
"is of type `LoadBalancer`, `MetalLB` assigns it a static `ExternalIP`. This "
"`ExternalIP` will be used to communicate with the API Server."
msgstr ""

#. type: Plain text
#: asciidoc/guides/metallb-kube-api.adoc:4
msgid "Three hosts to deploy K3s on top."
msgstr ""

#. type: Plain text
#: asciidoc/guides/metallb-kube-api.adoc:5
msgid "Ensure the hosts have different host names."
msgstr ""

#. type: Plain text
#: asciidoc/guides/metallb-kube-api.adoc:6
msgid "For testing, these could be virtual machines"
msgstr ""

#. type: Plain text
#: asciidoc/guides/metallb-kube-api.adoc:7
msgid ""
"At least 2 available IPs in the network (one for the Traefik and one for the "
"managed service)."
msgstr ""

#. type: Title ==
#: asciidoc/guides/metallb-kube-api.adoc:9
#, no-wrap
msgid "Installing K3s"
msgstr ""

#. type: delimited block =
#: asciidoc/guides/metallb-kube-api.adoc:10
msgid ""
"If you do not want a fresh cluster but want to use an existing one, skip "
"this step and proceed to the next one."
msgstr ""

#. type: Plain text
#: asciidoc/guides/metallb-kube-api.adoc:11
msgid ""
"First, a free IP in the network must be reserved that will be used later for "
"`ExternalIP` of the managed Service."
msgstr ""

#. type: Plain text
#: asciidoc/guides/metallb-kube-api.adoc:12
msgid "SSH to the first host and install `K3s` in cluster mode as:"
msgstr ""

#. type: delimited block -
#: asciidoc/guides/metallb-kube-api.adoc:13
#, no-wrap
msgid ""
"# Export the free IP mentioned above\n"
"export VIP_SERVICE_IP=<ip>\n"
"export INSTALL_K3S_SKIP_START=false\n"
msgstr ""

#. type: delimited block -
#: asciidoc/guides/metallb-kube-api.adoc:14
#, no-wrap
msgid ""
"curl -sfL https://get.k3s.io | INSTALL_K3S_EXEC=\"server --cluster-init \\\n"
" --disable=servicelb --write-kubeconfig-mode=644 --tls-san=${VIP_SERVICE_IP} \\\n"
" --tls-san=https://${VIP_SERVICE_IP}.sslip.io\" K3S_TOKEN=foobar sh -\n"
msgstr ""

#. type: delimited block =
#: asciidoc/guides/metallb-kube-api.adoc:15
msgid ""
"Make sure that `--disable=servicelb` flag is provided in the `k3s server` "
"command."
msgstr ""

#. type: delimited block =
#: asciidoc/guides/metallb-kube-api.adoc:16
msgid "From now on, the commands should be run on the local machine."
msgstr ""

#. type: Plain text
#: asciidoc/guides/metallb-kube-api.adoc:17
msgid ""
"To access the API server from outside, the IP of the K3s VM will be used."
msgstr ""

#. type: delimited block -
#: asciidoc/guides/metallb-kube-api.adoc:18
#, no-wrap
msgid ""
"# Replace <node-ip> with the actual IP of the machine\n"
"export NODE_IP=<node-ip>\n"
"scp ${NODE_IP}:/etc/rancher/k3s/k3s.yaml ~/.kube/config && sed \\\n"
" -i '' \"s/127.0.0.1/${NODE_IP}/g\" ~/.kube/config && chmod 600 ~/.kube/config\n"
msgstr ""

#. type: Title ==
#: asciidoc/guides/metallb-kube-api.adoc:19
#, no-wrap
msgid "Configuring an existing K3s cluster"
msgstr ""

#. type: delimited block =
#: asciidoc/guides/metallb-kube-api.adoc:20
msgid "This step is valid only if you intend to use an existing K3s cluster."
msgstr ""

#. type: Plain text
#: asciidoc/guides/metallb-kube-api.adoc:21
msgid ""
"To use an existing K3s cluster, the `servicelb` LB should be disabled and "
"also `tls-san` flags modified."
msgstr ""

#. type: Plain text
#: asciidoc/guides/metallb-kube-api.adoc:22
msgid ""
"To change the K3s flags, `/etc/systemd/system/k3s.service` should be "
"modified on all the VMs in the cluster."
msgstr ""

#. type: Plain text
#: asciidoc/guides/metallb-kube-api.adoc:23
msgid "The flags should be inserted in the `ExecStart`. For example:"
msgstr ""

#. type: delimited block -
#: asciidoc/guides/metallb-kube-api.adoc:24
#, no-wrap
msgid ""
"# Replace the <vip-service-ip> with the actual ip\n"
"ExecStart=/usr/local/bin/k3s \\\n"
"    server \\\n"
"        '--cluster-init' \\\n"
"        '--write-kubeconfig-mode=644' \\\n"
"        '--disable=servicelb' \\\n"
"        '--tls-san=<vip-service-ip>' \\\n"
"        '--tls-san=https://<vip-service-ip>.sslip.io' \\\n"
msgstr ""

#. type: Plain text
#: asciidoc/guides/metallb-kube-api.adoc:25
msgid ""
"Then the following commands should be executed for K3s to load the new "
"configurations:"
msgstr ""

#. type: delimited block -
#: asciidoc/guides/metallb-kube-api.adoc:26
#, no-wrap
msgid ""
"systemctl daemon-reload\n"
"systemctl restart k3s\n"
msgstr ""

#. type: Title ==
#: asciidoc/guides/metallb-kube-api.adoc:27
#, no-wrap
msgid "Installing MetalLB"
msgstr ""

#. type: Plain text
#: asciidoc/guides/metallb-kube-api.adoc:28
msgid ""
"To deploy `MetalLB`, the https://suse-edge.github.io/docs/quickstart/"
"metallb[MetalLB on K3s] guide can be used."
msgstr ""

#. type: Plain text
#: asciidoc/guides/metallb-kube-api.adoc:29
msgid ""
"*NOTE:* Ensure that the IP addresses of the `ip-pool` IPAddressPool do not "
"overlap with the IP addresses previously selected for the `LoadBalancer` "
"service."
msgstr ""

#. type: Plain text
#: asciidoc/guides/metallb-kube-api.adoc:30
msgid ""
"Create a separate `IpAddressPool` that will be used only for the managed "
"Service."
msgstr ""

#. type: delimited block -
#: asciidoc/guides/metallb-kube-api.adoc:31
#, no-wrap
msgid ""
"# Export the VIP_SERVICE_IP on the local machine\n"
"# Replace with the actual IP\n"
"export VIP_SERVICE_IP=<ip>\n"
msgstr ""

#. type: delimited block -
#: asciidoc/guides/metallb-kube-api.adoc:32
#, no-wrap
msgid ""
"cat <<-EOF | kubectl apply -f -\n"
"apiVersion: metallb.io/v1beta1\n"
"kind: IPAddressPool\n"
"metadata:\n"
"  name: kubernetes-vip-ip-pool\n"
"  namespace: metallb-system\n"
"spec:\n"
"  addresses:\n"
"  - ${VIP_SERVICE_IP}/32\n"
"  serviceAllocation:\n"
"    priority: 100\n"
"    namespaces:\n"
"      - default\n"
"EOF\n"
msgstr ""

#. type: delimited block -
#: asciidoc/guides/metallb-kube-api.adoc:33
#, no-wrap
msgid ""
"cat <<-EOF | kubectl apply -f -\n"
"apiVersion: metallb.io/v1beta1\n"
"kind: L2Advertisement\n"
"metadata:\n"
"  name: ip-pool-l2-adv\n"
"  namespace: metallb-system\n"
"spec:\n"
"  ipAddressPools:\n"
"  - ip-pool\n"
"  - kubernetes-vip-ip-pool\n"
"EOF\n"
msgstr ""

#. type: Title ==
#: asciidoc/guides/metallb-kube-api.adoc:34
#, no-wrap
msgid "Installing the Endpoint Copier Operator"
msgstr ""

#. type: delimited block -
#: asciidoc/guides/metallb-kube-api.adoc:35
#, no-wrap
msgid ""
"helm install \\\n"
"endpoint-copier-operator oci://registry.suse.com/edge/endpoint-copier-operator-chart \\\n"
"--namespace endpoint-copier-operator \\\n"
"--create-namespace\n"
msgstr ""

#. type: Plain text
#: asciidoc/guides/metallb-kube-api.adoc:36
msgid "The command above will deploy three different resources in the cluster:"
msgstr ""

#. type: Plain text
#: asciidoc/guides/metallb-kube-api.adoc:37
msgid ""
"The `endpoint-copier-operator` operator Deployment with two replicas. One "
"will be the leader and the other will take over the leader role if needed."
msgstr ""

#. type: Plain text
#: asciidoc/guides/metallb-kube-api.adoc:38
msgid ""
"A Kubernetes service called `kubernetes-vip` in the `default` namespace that "
"will be a copy of the `kubernetes` Service but from type `LoadBalancer`."
msgstr ""

#. type: Plain text
#: asciidoc/guides/metallb-kube-api.adoc:39
msgid ""
"An Endpoint resource called `kubernetes-vip` in the `default` namespace that "
"will be a copy of the `kubernetes` Endpoint."
msgstr ""

#. type: Plain text
#: asciidoc/guides/metallb-kube-api.adoc:40
msgid "Verify that the `kubernetes-vip` Service has the correct IP address:"
msgstr ""

#. type: delimited block -
#: asciidoc/guides/metallb-kube-api.adoc:41
#, no-wrap
msgid ""
"kubectl get service kubernetes-vip -n default \\\n"
" -o=jsonpath='{.status.loadBalancer.ingress[0].ip}'\n"
msgstr ""

#. type: Plain text
#: asciidoc/guides/metallb-kube-api.adoc:42
msgid ""
"Ensure that the `kubernetes-vip` and `kubernetes` Endpoints resources in the "
"`default` namespace point to the same IPs."
msgstr ""

#. type: delimited block -
#: asciidoc/guides/metallb-kube-api.adoc:43
#, no-wrap
msgid "kubectl get endpoints kubernetes kubernetes-vip\n"
msgstr ""

#. type: Plain text
#: asciidoc/guides/metallb-kube-api.adoc:44
msgid ""
"If everything is correct, the last thing left is to use the `VIP_SERVICE_IP` "
"in our `Kubeconfig`."
msgstr ""

#. type: delimited block -
#: asciidoc/guides/metallb-kube-api.adoc:45
#, no-wrap
msgid "sed -i '' \"s/${NODE_IP}/${VIP_SERVICE_IP}/g\" ~/.kube/config\n"
msgstr ""

#. type: Plain text
#: asciidoc/guides/metallb-kube-api.adoc:46
msgid ""
"From now on, all the `kubectl` will go through the `kubernetes-vip` service."
msgstr ""

#. type: Title ==
#: asciidoc/guides/metallb-kube-api.adoc:47
#, no-wrap
msgid "Adding control-plane nodes"
msgstr ""

#. type: Plain text
#: asciidoc/guides/metallb-kube-api.adoc:48
msgid "To monitor the entire process, two more terminal tabs can be opened."
msgstr ""

#. type: Plain text
#: asciidoc/guides/metallb-kube-api.adoc:49
msgid "First terminal:"
msgstr ""

#. type: delimited block -
#: asciidoc/guides/metallb-kube-api.adoc:50
#, no-wrap
msgid "watch kubectl get nodes\n"
msgstr ""

#. type: Plain text
#: asciidoc/guides/metallb-kube-api.adoc:51
msgid "Second terminal:"
msgstr ""

#. type: delimited block -
#: asciidoc/guides/metallb-kube-api.adoc:52
#, no-wrap
msgid "watch kubectl get endpoints\n"
msgstr ""

#. type: Plain text
#: asciidoc/guides/metallb-kube-api.adoc:53
msgid "Now execute the commands below on the second and third nodes."
msgstr ""

#. type: delimited block -
#: asciidoc/guides/metallb-kube-api.adoc:54
#, no-wrap
msgid ""
"# Export the VIP_SERVICE_IP in the VM\n"
"# Replace with the actual IP\n"
"export VIP_SERVICE_IP=<ip>\n"
"export INSTALL_K3S_SKIP_START=false\n"
msgstr ""

#. type: delimited block -
#: asciidoc/guides/metallb-kube-api.adoc:55
#, no-wrap
msgid ""
"curl -sfL https://get.k3s.io | INSTALL_K3S_EXEC=\"server \\\n"
" --server https://${VIP_SERVICE_IP}:6443 --disable=servicelb \\\n"
" --write-kubeconfig-mode=644\" K3S_TOKEN=foobar sh -\n"
msgstr ""
